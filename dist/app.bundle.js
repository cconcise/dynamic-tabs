!function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=2)}([function(t,e,i){"use strict";(function(t){var i=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some(function(t,r){return t[0]===e&&(i=r,!0)}),i}return function(){function e(){this.__entries__=[]}var i={size:{configurable:!0}};return i.size.get=function(){return this.__entries__.length},e.prototype.get=function(e){var i=t(this.__entries__,e),r=this.__entries__[i];return r&&r[1]},e.prototype.set=function(e,i){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,r=t(i,e);~r&&i.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,r=this.__entries__;i<r.length;i+=1){var s=r[i];t.call(e,s[1],s[0])}},Object.defineProperties(e.prototype,i),e}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,s=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),n="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(s):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},o=2,a=["top","right","bottom","left","width","height","size","weight"],h="undefined"!=typeof MutationObserver,c=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,r=!1,s=0;function a(){i&&(i=!1,t()),r&&c()}function h(){n(a)}function c(){var t=Date.now();if(i){if(t-s<o)return;r=!0}else i=!0,r=!1,setTimeout(h,e);s=t}return c}(this.refresh.bind(this),20)};c.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},c.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},c.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},c.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},c.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),h?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},c.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},c.prototype.onTransitionEnd_=function(t){var e=t.propertyName;void 0===e&&(e=""),a.some(function(t){return!!~e.indexOf(t)})&&this.refresh()},c.getInstance=function(){return this.instance_||(this.instance_=new c),this.instance_},c.instance_=null;var f=function(t,e){for(var i=0,r=Object.keys(e);i<r.length;i+=1){var s=r[i];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},d=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||s},l=y(0,0,0,0);function u(t){return parseFloat(t)||0}function b(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return e.reduce(function(e,i){return e+u(t["border-"+i+"-width"])},0)}function p(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return l;var r=d(t).getComputedStyle(t),s=function(t){for(var e={},i=0,r=["top","right","bottom","left"];i<r.length;i+=1){var s=r[i],n=t["padding-"+s];e[s]=u(n)}return e}(r),n=s.left+s.right,o=s.top+s.bottom,a=u(r.width),h=u(r.height);if("border-box"===r.boxSizing&&(Math.round(a+n)!==e&&(a-=b(r,"left","right")+n),Math.round(h+o)!==i&&(h-=b(r,"top","bottom")+o)),!function(t){return t===d(t).document.documentElement}(t)){var c=Math.round(a+n)-e,f=Math.round(h+o)-i;1!==Math.abs(c)&&(a-=c),1!==Math.abs(f)&&(h-=f)}return y(s.left,s.top,a,h)}var v="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof d(t).SVGGraphicsElement}:function(t){return t instanceof d(t).SVGElement&&"function"==typeof t.getBBox};function g(t){return r?v(t)?function(t){var e=t.getBBox();return y(0,0,e.width,e.height)}(t):p(t):l}function y(t,e,i,r){return{x:t,y:e,width:i,height:r}}var m=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=t};m.prototype.isActive=function(){var t=g(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},m.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var _=function(t,e){var i,r,s,n,o,a,h,c=(r=(i=e).x,s=i.y,n=i.width,o=i.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,h=Object.create(a.prototype),f(h,{x:r,y:s,width:n,height:o,top:s,right:r+n,bottom:o+s,left:r}),h);f(this,{target:t,contentRect:c})},w=function(t,e,r){if(this.activeObservations_=[],this.observations_=new i,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=r};w.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new m(t)),this.controller_.addObserver(this),this.controller_.refresh())}},w.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},w.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},w.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},w.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new _(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},w.prototype.clearActive=function(){this.activeObservations_.splice(0)},w.prototype.hasActive=function(){return this.activeObservations_.length>0};var T="undefined"!=typeof WeakMap?new WeakMap:new i,E=function(t){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=c.getInstance(),i=new w(t,e,this);T.set(this,i)};["observe","unobserve","disconnect"].forEach(function(t){E.prototype[t]=function(){return(e=T.get(this))[t].apply(e,arguments);var e}});var O=void 0!==s.ResizeObserver?s.ResizeObserver:E;e.a=O}).call(this,i(1))},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";i.r(e);var r=i(0);function s(t){if(!t)return void console.log("ERROR: To register dynamic tabs, pass in the ID of a node containing the tabs");this.container=document.getElementById(t),this.registeredTabs=[],this.activeTabIndex=0,this.switchCallbacks=[],this.framer=this.container.getElementsByClassName("dynamic-tabs-framer")[0],this.framerShift=0,this.framerWidth=0,this.totalTabsWidth=0,this.indicatorBar=this.container.getElementsByClassName("dt-indicator-bar")[0],this.arrowLeft=this.container.getElementsByClassName("arrow-left")[0],this.arrowRight=this.container.getElementsByClassName("arrow-right")[0],this.arrowLeft.addEventListener("click",this.scrollLeft.bind(this,.85)),this.arrowRight.addEventListener("click",this.scrollRight.bind(this,.85)),new r.a(t=>{for(const e of t){this.refreshLayout();const{left:t,top:i,width:r,height:s}=e.contentRect;console.log("Element:",e.target),console.log(`Element's size: ${r}px x ${s}px`),console.log(`Element's paddings: ${i}px ; ${t}px`)}}).observe(this.framer)}function n(t){this.activeTabIndex<this.registeredTabs.length&&this.registeredTabs[this.activeTabIndex].el.removeAttribute("data-dtactive"),this.registeredTabs[t].el.setAttribute("data-dtactive","y")}function o(t,e){a.call(this,0,{left:t,width:e[0]});for(let t=1,i=this.registeredTabs.length;t<i;t++)a.call(this,t,{left:this.registeredTabs[t-1].rect.left+this.registeredTabs[t-1].rect.width,width:e[t]})}function a(t,e){this.registeredTabs.splice(t,1,{el:this.registeredTabs[t].el,rect:e})}s.prototype.registerTabs=function(t,e=""){if(void 0!==t&&0!==t.length){for(let i=0;i<t.length;i++)this.registerTab(document.getElementById(e+t[i]));n.call(this,0),this.refreshLayout()}else console.log("ERROR: Must pass in an array of tab IDs to register")},s.prototype.registerAllTabs=function(){const t=this.container.getElementsByClassName("dynamic-tab");if(0!==t.length){for(let e=0;e<t.length;e++)this.registerTab(t[e]);n.call(this,0),this.refreshLayout()}else console.log("ERROR: There are no tabs to register")},s.prototype.registerTab=function(t,e=!1){t.setAttribute("data-dtr","y");const i=this.registeredTabs.length;let r=this;t.handleEvent=function(t){if("click"===t.type){r.setActiveTabIndex(i);for(let t=0;t<r.switchCallbacks.length;t++)r.switchCallbacks[t](r.activeTabIndex,i)}},t.addEventListener("click",t),this.registeredTabs.push({el:t,rect:{left:0,width:0}}),e&&this.refreshLayout()},s.prototype.deregisterAllTabs=function(){for(let t=this.registeredTabs.length;t>0;t--)this.deregisterTab(0);this.switchCallbacks=[],this.refreshLayout()},s.prototype.deregisterTab=function(t,e=!1){this.registeredTabs[t].el.removeEventListener("click",this.registeredTabs[t].el),this.registeredTabs[t].el.removeAttribute("data-dtr"),this.registeredTabs[t].el.removeAttribute("data-dtactive");const i=this.registeredTabs[t].el.style["margin-left"];"0px"!==i&&""!==i&&(this.registeredTabs[t].el.style["margin-left"]="0px"),this.registeredTabs.splice(t,1),0===this.registeredTabs.length&&(this.indicatorBar.style.width="0"),e&&this.refreshLayout()},s.prototype.setActiveTabIndex=function(t){0!==this.registeredTabs.length?t>=this.registeredTabs.length?console.log("ERROR: Invalid tab index failed to set"):(this.activeTabIndex=t,n.call(this,t),this.scrollToActiveTab()):this.activeTabIndex=0},s.prototype.addSwitchCallback=function(t){this.switchCallbacks.push(t)},s.prototype.refreshLayout=function(){if(0===this.registeredTabs.length)return;this.framerWidth=this.framer.getBoundingClientRect().width,this.totalTabsWidth=0;let t=this.registeredTabs.map(t=>{const e=t.el.getBoundingClientRect().width;return this.totalTabsWidth+=e,e});this.totalTabsWidth>this.framerWidth?(this.framer.style["text-align"]="left",o.call(this,0,t),this.scrollToActiveTab()):(this.framer.style["text-align"]="center",this.setTabsOffset(0),o.call(this,(this.framerWidth-this.totalTabsWidth)/2,t),this.resetIndicator(),this.hideArrow())},s.prototype.scrollToActiveTab=function(){if(this.totalTabsWidth<=this.framerWidth)return void this.resetIndicator();let t=this.registeredTabs[this.activeTabIndex];const e=t.rect.left+this.framerShift,i=t.rect.left+t.rect.width+this.framerShift;if(e<0){const i=Math.abs(e)/this.framerWidth;this.scrollLeft(i+1.1*t.rect.width/this.framerWidth)}else if(i>this.framerWidth){const e=i/this.framerWidth;this.scrollRight(e-1.1*t.rect.width/this.framerWidth)}else 0===this.activeTabIndex&&this.hideArrow("left"),this.resetIndicator();const r=this.registeredTabs[this.registeredTabs.length-1].rect;r.left+r.width+this.framerShift>this.framerWidth&&this.showArrow("right")},s.prototype.resetIndicator=function(){let t=this.activeTabIndex;t>=this.registeredTabs.length&&(t=this.registeredTabs.length-1),this.indicatorBar.style.left=this.framerShift+this.registeredTabs[t].rect.left+"px",this.indicatorBar.style.width=this.registeredTabs[t].rect.width+"px"},s.prototype.scrollLeft=function(t){void 0===t&&(t=.85);let e=t*this.framerWidth;this.framerShift>=0||(Math.abs(this.framerShift)>e?this.setTabsOffset(this.framerShift+e):(this.setTabsOffset(0),this.hideArrow("left")),this.resetIndicator(),this.showArrow("right"))},s.prototype.scrollRight=function(t){void 0===t&&(t=.85);let e=t*this.framerWidth;const i=Math.abs(this.totalTabsWidth-this.framerWidth+this.framerShift);i<=0||(i>e?this.setTabsOffset(this.framerShift-e):(this.setTabsOffset(-(this.totalTabsWidth-this.framerWidth)),this.hideArrow("right")),this.resetIndicator(),this.showArrow("left"))},s.prototype.setTabsOffset=function(t){this.framerShift=t,this.registeredTabs[0].el.style["margin-left"]=this.framerShift+"px"},s.prototype.showArrow=function(t){"left"===t?this.arrowLeft.style.visibility="":"right"===t?this.arrowRight.style.visibility="":(this.arrowLeft.style.visibility="",this.arrowRight.style.visibility="")},s.prototype.hideArrow=function(t){"left"===t?this.arrowLeft.style.visibility="hidden":"right"===t?this.arrowRight.style.visibility="hidden":(this.arrowLeft.style.visibility="hidden",this.arrowRight.style.visibility="hidden")},e.default=s}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Jlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbC9kaXN0L1Jlc2l6ZU9ic2VydmVyLmVzLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImdsb2JhbCIsIk1hcFNoaW0iLCJNYXAiLCJnZXRJbmRleCIsImFyciIsImtleSIsInJlc3VsdCIsInNvbWUiLCJlbnRyeSIsImluZGV4IiwiYW5vbnltb3VzIiwidGhpcyIsIl9fZW50cmllc19fIiwicHJvdG90eXBlQWNjZXNzb3JzIiwic2l6ZSIsImxlbmd0aCIsInNldCIsInB1c2giLCJkZWxldGUiLCJlbnRyaWVzIiwic3BsaWNlIiwiaGFzIiwiY2xlYXIiLCJmb3JFYWNoIiwiY2FsbGJhY2siLCJjdHgiLCJsaXN0IiwiZGVmaW5lUHJvcGVydGllcyIsImlzQnJvd3NlciIsIndpbmRvdyIsImRvY3VtZW50IiwiZ2xvYmFsJDEiLCJNYXRoIiwic2VsZiIsIkZ1bmN0aW9uIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lJDEiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiaW5kIiwic2V0VGltZW91dCIsIkRhdGUiLCJub3ciLCJ0cmFpbGluZ1RpbWVvdXQiLCJ0cmFuc2l0aW9uS2V5cyIsIm11dGF0aW9uT2JzZXJ2ZXJTdXBwb3J0ZWQiLCJNdXRhdGlvbk9ic2VydmVyIiwiUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyIiwiY29ubmVjdGVkXyIsIm11dGF0aW9uRXZlbnRzQWRkZWRfIiwibXV0YXRpb25zT2JzZXJ2ZXJfIiwib2JzZXJ2ZXJzXyIsIm9uVHJhbnNpdGlvbkVuZF8iLCJyZWZyZXNoIiwiZGVsYXkiLCJsZWFkaW5nQ2FsbCIsInRyYWlsaW5nQ2FsbCIsImxhc3RDYWxsVGltZSIsInJlc29sdmVQZW5kaW5nIiwicHJveHkiLCJ0aW1lb3V0Q2FsbGJhY2siLCJ0aW1lU3RhbXAiLCJ0aHJvdHRsZSIsImFkZE9ic2VydmVyIiwib2JzZXJ2ZXIiLCJpbmRleE9mIiwiY29ubmVjdF8iLCJyZW1vdmVPYnNlcnZlciIsIm9ic2VydmVycyIsImRpc2Nvbm5lY3RfIiwidXBkYXRlT2JzZXJ2ZXJzXyIsImFjdGl2ZU9ic2VydmVycyIsImZpbHRlciIsImdhdGhlckFjdGl2ZSIsImhhc0FjdGl2ZSIsImJyb2FkY2FzdEFjdGl2ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvYnNlcnZlIiwiYXR0cmlidXRlcyIsImNoaWxkTGlzdCIsImNoYXJhY3RlckRhdGEiLCJzdWJ0cmVlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc2Nvbm5lY3QiLCJyZWYiLCJwcm9wZXJ0eU5hbWUiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlXyIsImRlZmluZUNvbmZpZ3VyYWJsZSIsInRhcmdldCIsInByb3BzIiwia2V5cyIsIndyaXRhYmxlIiwiZ2V0V2luZG93T2YiLCJvd25lckRvY3VtZW50IiwiZGVmYXVsdFZpZXciLCJlbXB0eVJlY3QiLCJjcmVhdGVSZWN0SW5pdCIsInRvRmxvYXQiLCJwYXJzZUZsb2F0IiwiZ2V0Qm9yZGVyc1NpemUiLCJzdHlsZXMiLCJwb3NpdGlvbnMiLCJsZW4iLCJhcmd1bWVudHMiLCJyZWR1Y2UiLCJwb3NpdGlvbiIsImdldEhUTUxFbGVtZW50Q29udGVudFJlY3QiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImdldENvbXB1dGVkU3R5bGUiLCJwYWRkaW5ncyIsImdldFBhZGRpbmdzIiwiaG9yaXpQYWQiLCJsZWZ0IiwicmlnaHQiLCJ2ZXJ0UGFkIiwidG9wIiwiYm90dG9tIiwid2lkdGgiLCJoZWlnaHQiLCJib3hTaXppbmciLCJyb3VuZCIsImRvY3VtZW50RWxlbWVudCIsImlzRG9jdW1lbnRFbGVtZW50IiwidmVydFNjcm9sbGJhciIsImhvcml6U2Nyb2xsYmFyIiwiYWJzIiwiaXNTVkdHcmFwaGljc0VsZW1lbnQiLCJTVkdHcmFwaGljc0VsZW1lbnQiLCJTVkdFbGVtZW50IiwiZ2V0QkJveCIsImdldENvbnRlbnRSZWN0IiwiYmJveCIsImdldFNWR0NvbnRlbnRSZWN0IiwieCIsInkiLCJSZXNpemVPYnNlcnZhdGlvbiIsImJyb2FkY2FzdFdpZHRoIiwiYnJvYWRjYXN0SGVpZ2h0IiwiY29udGVudFJlY3RfIiwiaXNBY3RpdmUiLCJyZWN0IiwiYnJvYWRjYXN0UmVjdCIsIlJlc2l6ZU9ic2VydmVyRW50cnkiLCJyZWN0SW5pdCIsIkNvbnN0ciIsImNvbnRlbnRSZWN0IiwiRE9NUmVjdFJlYWRPbmx5IiwiY3JlYXRlIiwiUmVzaXplT2JzZXJ2ZXJTUEkiLCJjb250cm9sbGVyIiwiY2FsbGJhY2tDdHgiLCJhY3RpdmVPYnNlcnZhdGlvbnNfIiwib2JzZXJ2YXRpb25zXyIsIlR5cGVFcnJvciIsImNhbGxiYWNrXyIsImNvbnRyb2xsZXJfIiwiY2FsbGJhY2tDdHhfIiwiRWxlbWVudCIsIm9ic2VydmF0aW9ucyIsInVub2JzZXJ2ZSIsImNsZWFyQWN0aXZlIiwidGhpcyQxIiwib2JzZXJ2YXRpb24iLCJtYXAiLCJXZWFrTWFwIiwiUmVzaXplT2JzZXJ2ZXIiLCJtZXRob2QiLCJhcHBseSIsIl9fd2VicGFja19leHBvcnRzX18iLCJnIiwiZXZhbCIsImUiLCJEeW5hbWljVGFicyIsImNvbnRhaW5lcklEIiwiY29uc29sZSIsImxvZyIsImNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwicmVnaXN0ZXJlZFRhYnMiLCJhY3RpdmVUYWJJbmRleCIsInN3aXRjaENhbGxiYWNrcyIsImZyYW1lciIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJmcmFtZXJTaGlmdCIsImZyYW1lcldpZHRoIiwidG90YWxUYWJzV2lkdGgiLCJpbmRpY2F0b3JCYXIiLCJhcnJvd0xlZnQiLCJhcnJvd1JpZ2h0Iiwic2Nyb2xsTGVmdCIsInNjcm9sbFJpZ2h0IiwicmVzaXplX29ic2VydmVyX3BvbHlmaWxsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJyZWZyZXNoTGF5b3V0Iiwic2V0QWN0aXZlSGlnaGxpZ2h0IiwidGFiSW5kZXgiLCJlbCIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInJlc2V0UmVjdHMiLCJmaXJzdExlZnQiLCJ3aWR0aHMiLCJzZXROZXdSZWN0IiwidGFic0xlbiIsInJlZ2lzdGVyVGFicyIsInRhYklEcyIsImlkUHJlZml4IiwidW5kZWZpbmVkIiwicmVnaXN0ZXJUYWIiLCJyZWdpc3RlckFsbFRhYnMiLCJ0YWJzIiwidGFiIiwibmV3VGFiSW5kZXgiLCJwYXJlbnQiLCJoYW5kbGVFdmVudCIsInR5cGUiLCJzZXRBY3RpdmVUYWJJbmRleCIsImRlcmVnaXN0ZXJBbGxUYWJzIiwiZGVyZWdpc3RlclRhYiIsIm1sIiwic3R5bGUiLCJuZXdJbmRleCIsInNjcm9sbFRvQWN0aXZlVGFiIiwiYWRkU3dpdGNoQ2FsbGJhY2siLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3Iiwic2V0VGFic09mZnNldCIsInJlc2V0SW5kaWNhdG9yIiwiaGlkZUFycm93IiwiYWN0aXZlVGFiIiwibGVmdEVkZ2UiLCJyaWdodEVkZ2UiLCJuVGhGcmFtZSIsImxhc3RUYWIiLCJzaG93QXJyb3ciLCJpbmR4IiwiZnJhbWVyV2lkdGhzIiwicGl4ZWxzVG9TaGlmdCIsImNhblNoaWZ0Iiwib2Zmc2V0IiwibGVmdFJpZ2h0QWxsIiwidmlzaWJpbGl0eSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBakIsR0FDQVksT0FBQUMsZUFBQWIsRUFBQSxjQUFpRGtCLE9BQUEsS0FJakRwQixFQUFBcUIsRUFBQSxTQUFBbEIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBbUIsV0FDQSxXQUEyQixPQUFBbkIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSCxFQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQVUsRUFBQUMsR0FBc0QsT0FBQVYsT0FBQVcsVUFBQUMsZUFBQW5CLEtBQUFnQixFQUFBQyxJQUd0RHhCLEVBQUEyQixFQUFBLElBSUEzQixJQUFBNEIsRUFBQSxtQ0NuRUEsU0FBQUMsR0FPQSxJQUFBQyxFQUFBLFdBQ0EsdUJBQUFDLElBQ0EsT0FBQUEsSUFVQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBLElBQUFDLEdBQUEsRUFZQSxPQVZBRixFQUFBRyxLQUFBLFNBQUFDLEVBQUFDLEdBQ0EsT0FBQUQsRUFBQSxLQUFBSCxJQUNBQyxFQUFBRyxHQUVBLEtBTUFILEVBR0Esa0JBQ0EsU0FBQUksSUFDQUMsS0FBQUMsZUFHQSxJQUFBQyxHQUFrQ0MsTUFBUTNCLGNBQUEsSUFpRjFDLE9BNUVBMEIsRUFBQUMsS0FBQXpCLElBQUEsV0FDQSxPQUFBc0IsS0FBQUMsWUFBQUcsUUFPQUwsRUFBQWQsVUFBQVAsSUFBQSxTQUFBZ0IsR0FDQSxJQUFBSSxFQUFBTixFQUFBUSxLQUFBQyxZQUFBUCxHQUNBRyxFQUFBRyxLQUFBQyxZQUFBSCxHQUVBLE9BQUFELEtBQUEsSUFRQUUsRUFBQWQsVUFBQW9CLElBQUEsU0FBQVgsRUFBQWQsR0FDQSxJQUFBa0IsRUFBQU4sRUFBQVEsS0FBQUMsWUFBQVAsSUFFQUksRUFDQUUsS0FBQUMsWUFBQUgsR0FBQSxHQUFBbEIsRUFFQW9CLEtBQUFDLFlBQUFLLE1BQUFaLEVBQUFkLEtBUUFtQixFQUFBZCxVQUFBc0IsT0FBQSxTQUFBYixHQUNBLElBQUFjLEVBQUFSLEtBQUFDLFlBQ0FILEVBQUFOLEVBQUFnQixFQUFBZCxJQUVBSSxHQUNBVSxFQUFBQyxPQUFBWCxFQUFBLElBUUFDLEVBQUFkLFVBQUF5QixJQUFBLFNBQUFoQixHQUNBLFNBQUFGLEVBQUFRLEtBQUFDLFlBQUFQLElBTUFLLEVBQUFkLFVBQUEwQixNQUFBLFdBQ0FYLEtBQUFDLFlBQUFRLE9BQUEsSUFRQVYsRUFBQWQsVUFBQTJCLFFBQUEsU0FBQUMsRUFBQUMsUUFFQSxJQUFBQSxNQUFBLE1BRUEsUUFBQWxELEVBQUEsRUFBQW1ELEVBSEFmLEtBR0FDLFlBQXNEckMsRUFBQW1ELEVBQUFYLE9BQWlCeEMsR0FBQSxHQUN2RSxJQUFBaUMsRUFBQWtCLEVBQUFuRCxHQUVBaUQsRUFBQTlDLEtBQUErQyxFQUFBakIsRUFBQSxHQUFBQSxFQUFBLE1BSUF2QixPQUFBMEMsaUJBQUFqQixFQUFBZCxVQUFBaUIsR0FFQUgsRUF0RkEsR0E1QkEsR0F5SEFrQixFQUFBLG9CQUFBQyxRQUFBLG9CQUFBQyxVQUFBRCxPQUFBQyxvQkFHQUMsT0FDQSxJQUFBL0IsS0FBQWdDLFlBQ0FoQyxFQUdBLG9CQUFBaUMsV0FBQUQsWUFDQUMsS0FHQSxvQkFBQUosZUFBQUcsWUFDQUgsT0FJQUssU0FBQSxjQUFBQSxHQVNBQyxFQUNBLG1CQUFBQyxzQkFJQUEsc0JBQUFDLEtBQUFOLEdBR0EsU0FBQVAsR0FBZ0MsT0FBQWMsV0FBQSxXQUFnQyxPQUFBZCxFQUFBZSxLQUFBQyxRQUErQixTQUkvRkMsRUFBQSxFQWlGQUMsR0FBQSxnRUFHQUMsRUFBQSxvQkFBQUMsaUJBS0FDLEVBQUEsV0FDQWxDLEtBQUFtQyxZQUFBLEVBQ0FuQyxLQUFBb0Msc0JBQUEsRUFDQXBDLEtBQUFxQyxtQkFBQSxLQUNBckMsS0FBQXNDLGNBRUF0QyxLQUFBdUMsaUJBQUF2QyxLQUFBdUMsaUJBQUFiLEtBQUExQixNQUNBQSxLQUFBd0MsUUF0RkEsU0FBQTNCLEVBQUE0QixHQUNBLElBQUFDLEdBQUEsRUFDQUMsR0FBQSxFQUNBQyxFQUFBLEVBUUEsU0FBQUMsSUFDQUgsSUFDQUEsR0FBQSxFQUVBN0IsS0FHQThCLEdBQ0FHLElBV0EsU0FBQUMsSUFDQXZCLEVBQUFxQixHQVFBLFNBQUFDLElBQ0EsSUFBQUUsRUFBQXBCLEtBQUFDLE1BRUEsR0FBQWEsRUFBQSxDQUVBLEdBQUFNLEVBQUFKLEVBQUFkLEVBQ0EsT0FPQWEsR0FBQSxPQUVBRCxHQUFBLEVBQ0FDLEdBQUEsRUFFQWhCLFdBQUFvQixFQUFBTixHQUdBRyxFQUFBSSxFQUdBLE9BQUFGLEVBdUJBRyxDQUFBakQsS0FBQXdDLFFBQUFkLEtBQUExQixNQW5CQSxLQWdEQWtDLEVBQUFqRCxVQUFBaUUsWUFBQSxTQUFBQyxJQUNBbkQsS0FBQXNDLFdBQUFjLFFBQUFELElBQ0FuRCxLQUFBc0MsV0FBQWhDLEtBQUE2QyxHQUlBbkQsS0FBQW1DLFlBQ0FuQyxLQUFBcUQsWUFVQW5CLEVBQUFqRCxVQUFBcUUsZUFBQSxTQUFBSCxHQUNBLElBQUFJLEVBQUF2RCxLQUFBc0MsV0FDQXhDLEVBQUF5RCxFQUFBSCxRQUFBRCxJQUdBckQsR0FDQXlELEVBQUE5QyxPQUFBWCxFQUFBLElBSUF5RCxFQUFBbkQsUUFBQUosS0FBQW1DLFlBQ0FuQyxLQUFBd0QsZUFVQXRCLEVBQUFqRCxVQUFBdUQsUUFBQSxXQUNBeEMsS0FBQXlELG9CQUtBekQsS0FBQXdDLFdBWUFOLEVBQUFqRCxVQUFBd0UsaUJBQUEsV0FFQSxJQUFBQyxFQUFBMUQsS0FBQXNDLFdBQUFxQixPQUFBLFNBQUFSLEdBQ0EsT0FBQUEsRUFBQVMsZUFBQVQsRUFBQVUsY0FVQSxPQUZBSCxFQUFBOUMsUUFBQSxTQUFBdUMsR0FBaUQsT0FBQUEsRUFBQVcsb0JBRWpESixFQUFBdEQsT0FBQSxHQVNBOEIsRUFBQWpELFVBQUFvRSxTQUFBLFdBR0FwQyxJQUFBakIsS0FBQW1DLGFBT0FoQixTQUFBNEMsaUJBQUEsZ0JBQUEvRCxLQUFBdUMsa0JBRUFyQixPQUFBNkMsaUJBQUEsU0FBQS9ELEtBQUF3QyxTQUVBUixHQUNBaEMsS0FBQXFDLG1CQUFBLElBQUFKLGlCQUFBakMsS0FBQXdDLFNBRUF4QyxLQUFBcUMsbUJBQUEyQixRQUFBN0MsVUFDQThDLFlBQUEsRUFDQUMsV0FBQSxFQUNBQyxlQUFBLEVBQ0FDLFNBQUEsTUFHQWpELFNBQUE0QyxpQkFBQSxxQkFBQS9ELEtBQUF3QyxTQUVBeEMsS0FBQW9DLHNCQUFBLEdBR0FwQyxLQUFBbUMsWUFBQSxJQVNBRCxFQUFBakQsVUFBQXVFLFlBQUEsV0FHQXZDLEdBQUFqQixLQUFBbUMsYUFJQWhCLFNBQUFrRCxvQkFBQSxnQkFBQXJFLEtBQUF1QyxrQkFDQXJCLE9BQUFtRCxvQkFBQSxTQUFBckUsS0FBQXdDLFNBRUF4QyxLQUFBcUMsb0JBQ0FyQyxLQUFBcUMsbUJBQUFpQyxhQUdBdEUsS0FBQW9DLHNCQUNBakIsU0FBQWtELG9CQUFBLHFCQUFBckUsS0FBQXdDLFNBR0F4QyxLQUFBcUMsbUJBQUEsS0FDQXJDLEtBQUFvQyxzQkFBQSxFQUNBcEMsS0FBQW1DLFlBQUEsSUFVQUQsRUFBQWpELFVBQUFzRCxpQkFBQSxTQUFBZ0MsR0FDQSxJQUFBQyxFQUFBRCxFQUFBQyxrQkFBNEMsSUFBQUEsTUFBQSxJQUc1Q3pDLEVBQUFuQyxLQUFBLFNBQUFGLEdBQ0EsU0FBQThFLEVBQUFwQixRQUFBMUQsTUFJQU0sS0FBQXdDLFdBU0FOLEVBQUF1QyxZQUFBLFdBS0EsT0FKQXpFLEtBQUEwRSxZQUNBMUUsS0FBQTBFLFVBQUEsSUFBQXhDLEdBR0FsQyxLQUFBMEUsV0FHQXhDLEVBQUF3QyxVQUFBLEtBU0EsSUFBQUMsRUFBQSxTQUFBQyxFQUFBQyxHQUNBLFFBQUFqSCxFQUFBLEVBQUFtRCxFQUFBekMsT0FBQXdHLEtBQUFELEdBQThDakgsRUFBQW1ELEVBQUFYLE9BQWlCeEMsR0FBQSxHQUMvRCxJQUFBOEIsRUFBQXFCLEVBQUFuRCxHQUVBVSxPQUFBQyxlQUFBcUcsRUFBQWxGLEdBQ0FkLE1BQUFpRyxFQUFBbkYsR0FDQWpCLFlBQUEsRUFDQXNHLFVBQUEsRUFDQXZHLGNBQUEsSUFJQSxPQUFBb0csR0FTQUksRUFBQSxTQUFBSixHQVFBLE9BSkFBLEtBQUFLLGVBQUFMLEVBQUFLLGNBQUFDLGFBSUE5RCxHQUlBK0QsRUFBQUMsRUFBQSxTQVFBLFNBQUFDLEVBQUF6RyxHQUNBLE9BQUEwRyxXQUFBMUcsSUFBQSxFQVVBLFNBQUEyRyxFQUFBQyxHQUVBLElBREEsSUFBQUMsS0FBQUMsRUFBQUMsVUFBQXZGLE9BQUEsRUFDQXNGLEtBQUEsR0FBQUQsRUFBQUMsR0FBQUMsVUFBQUQsRUFBQSxHQUVBLE9BQUFELEVBQUFHLE9BQUEsU0FBQXpGLEVBQUEwRixHQUdBLE9BQUExRixFQUFBa0YsRUFGQUcsRUFBQSxVQUFBSyxFQUFBLFlBR0ssR0EyQ0wsU0FBQUMsRUFBQWxCLEdBR0EsSUFBQW1CLEVBQUFuQixFQUFBbUIsWUFDQUMsRUFBQXBCLEVBQUFvQixhQVVBLElBQUFELElBQUFDLEVBQ0EsT0FBQWIsRUFHQSxJQUFBSyxFQUFBUixFQUFBSixHQUFBcUIsaUJBQUFyQixHQUNBc0IsRUFyREEsU0FBQVYsR0FJQSxJQUhBLElBQ0FVLEtBRUF0SSxFQUFBLEVBQUFtRCxHQUhBLCtCQUdxQ25ELEVBQUFtRCxFQUFBWCxPQUFpQnhDLEdBQUEsR0FDdEQsSUFBQWlJLEVBQUE5RSxFQUFBbkQsR0FFQWdCLEVBQUE0RyxFQUFBLFdBQUFLLEdBRUFLLEVBQUFMLEdBQUFSLEVBQUF6RyxHQUdBLE9BQUFzSCxFQXlDQUMsQ0FBQVgsR0FDQVksRUFBQUYsRUFBQUcsS0FBQUgsRUFBQUksTUFDQUMsRUFBQUwsRUFBQU0sSUFBQU4sRUFBQU8sT0FNQUMsRUFBQXJCLEVBQUFHLEVBQUFrQixPQUNBQyxFQUFBdEIsRUFBQUcsRUFBQW1CLFFBd0JBLEdBcEJBLGVBQUFuQixFQUFBb0IsWUFPQXZGLEtBQUF3RixNQUFBSCxFQUFBTixLQUFBTCxJQUNBVyxHQUFBbkIsRUFBQUMsRUFBQSxnQkFBQVksR0FHQS9FLEtBQUF3RixNQUFBRixFQUFBSixLQUFBUCxJQUNBVyxHQUFBcEIsRUFBQUMsRUFBQSxnQkFBQWUsS0EwREEsU0FBQTNCLEdBQ0EsT0FBQUEsSUFBQUksRUFBQUosR0FBQXpELFNBQUEyRixnQkFuREFDLENBQUFuQyxHQUFBLENBS0EsSUFBQW9DLEVBQUEzRixLQUFBd0YsTUFBQUgsRUFBQU4sR0FBQUwsRUFDQWtCLEVBQUE1RixLQUFBd0YsTUFBQUYsRUFBQUosR0FBQVAsRUFPQSxJQUFBM0UsS0FBQTZGLElBQUFGLEtBQ0FOLEdBQUFNLEdBR0EsSUFBQTNGLEtBQUE2RixJQUFBRCxLQUNBTixHQUFBTSxHQUlBLE9BQUE3QixFQUFBYyxFQUFBRyxLQUFBSCxFQUFBTSxJQUFBRSxFQUFBQyxHQVNBLElBQUFRLEVBR0Esb0JBQUFDLG1CQUNBLFNBQUF4QyxHQUFrQyxPQUFBQSxhQUFBSSxFQUFBSixHQUFBd0Msb0JBTWxDLFNBQUF4QyxHQUE4QixPQUFBQSxhQUFBSSxFQUFBSixHQUFBeUMsWUFBQSxtQkFBQXpDLEVBQUEwQyxTQW1COUIsU0FBQUMsRUFBQTNDLEdBQ0EsT0FBQTNELEVBSUFrRyxFQUFBdkMsR0FqSUEsU0FBQUEsR0FDQSxJQUFBNEMsRUFBQTVDLEVBQUEwQyxVQUVBLE9BQUFsQyxFQUFBLElBQUFvQyxFQUFBZCxNQUFBYyxFQUFBYixRQStIQWMsQ0FBQTdDLEdBR0FrQixFQUFBbEIsR0FQQU8sRUFpREEsU0FBQUMsRUFBQXNDLEVBQUFDLEVBQUFqQixFQUFBQyxHQUNBLE9BQVllLElBQUFDLElBQUFqQixRQUFBQyxVQU9aLElBQUFpQixFQUFBLFNBQUFoRCxHQUNBNUUsS0FBQTZILGVBQUEsRUFDQTdILEtBQUE4SCxnQkFBQSxFQUNBOUgsS0FBQStILGFBQUEzQyxFQUFBLFNBRUFwRixLQUFBNEUsVUF1QkFnRCxFQUFBM0ksVUFBQStJLFNBQUEsV0FDQSxJQUFBQyxFQUFBVixFQUFBdkgsS0FBQTRFLFFBSUEsT0FGQTVFLEtBQUErSCxhQUFBRSxFQUVBQSxFQUFBdkIsUUFBQTFHLEtBQUE2SCxnQkFBQUksRUFBQXRCLFNBQUEzRyxLQUFBOEgsaUJBU0FGLEVBQUEzSSxVQUFBaUosY0FBQSxXQUNBLElBQUFELEVBQUFqSSxLQUFBK0gsYUFLQSxPQUhBL0gsS0FBQTZILGVBQUFJLEVBQUF2QixNQUNBMUcsS0FBQThILGdCQUFBRyxFQUFBdEIsT0FFQXNCLEdBR0EsSUFBQUUsRUFBQSxTQUFBdkQsRUFBQXdELEdBQ0EsSUE1RkE3RCxFQUNBbUQsRUFDQUMsRUFDQWpCLEVBQ0FDLEVBR0EwQixFQUNBSixFQW9GQUssR0EzRkFaLEdBREFuRCxFQTRGQTZELEdBM0ZBVixFQUNBQyxFQUFBcEQsRUFBQW9ELEVBQ0FqQixFQUFBbkMsRUFBQW1DLE1BQ0FDLEVBQUFwQyxFQUFBb0MsT0FHQTBCLEVBQUEsb0JBQUFFLGdDQUFBakssT0FDQTJKLEVBQUEzSixPQUFBa0ssT0FBQUgsRUFBQXBKLFdBR0EwRixFQUFBc0QsR0FDQVAsSUFBQUMsSUFBQWpCLFFBQUFDLFNBQ0FILElBQUFtQixFQUNBckIsTUFBQW9CLEVBQUFoQixFQUNBRCxPQUFBRSxFQUFBZ0IsRUFDQXRCLEtBQUFxQixJQUdBTyxHQWlGQXRELEVBQUEzRSxNQUE4QjRFLFNBQUEwRCxpQkFHOUJHLEVBQUEsU0FBQTVILEVBQUE2SCxFQUFBQyxHQUlBLEdBSEEzSSxLQUFBNEksdUJBQ0E1SSxLQUFBNkksY0FBQSxJQUFBdkosRUFFQSxtQkFBQXVCLEVBQ0EsVUFBQWlJLFVBQUEsMkRBR0E5SSxLQUFBK0ksVUFBQWxJLEVBQ0FiLEtBQUFnSixZQUFBTixFQUNBMUksS0FBQWlKLGFBQUFOLEdBK0JBRixFQUFBeEosVUFBQStFLFFBQUEsU0FBQVksR0FDQSxJQUFBZSxVQUFBdkYsT0FDQSxVQUFBMEksVUFBQSw0Q0FJQSx1QkFBQUksNEJBQUE1SyxPQUFBLENBSUEsS0FBQXNHLGFBQUFJLEVBQUFKLEdBQUFzRSxTQUNBLFVBQUFKLFVBQUEseUNBR0EsSUFBQUssRUFBQW5KLEtBQUE2SSxjQUdBTSxFQUFBekksSUFBQWtFLEtBSUF1RSxFQUFBOUksSUFBQXVFLEVBQUEsSUFBQWdELEVBQUFoRCxJQUVBNUUsS0FBQWdKLFlBQUE5RixZQUFBbEQsTUFHQUEsS0FBQWdKLFlBQUF4RyxhQVNBaUcsRUFBQXhKLFVBQUFtSyxVQUFBLFNBQUF4RSxHQUNBLElBQUFlLFVBQUF2RixPQUNBLFVBQUEwSSxVQUFBLDRDQUlBLHVCQUFBSSw0QkFBQTVLLE9BQUEsQ0FJQSxLQUFBc0csYUFBQUksRUFBQUosR0FBQXNFLFNBQ0EsVUFBQUosVUFBQSx5Q0FHQSxJQUFBSyxFQUFBbkosS0FBQTZJLGNBR0FNLEVBQUF6SSxJQUFBa0UsS0FJQXVFLEVBQUE1SSxPQUFBcUUsR0FFQXVFLEVBQUFoSixNQUNBSCxLQUFBZ0osWUFBQTFGLGVBQUF0RCxTQVNBeUksRUFBQXhKLFVBQUFxRixXQUFBLFdBQ0F0RSxLQUFBcUosY0FDQXJKLEtBQUE2SSxjQUFBbEksUUFDQVgsS0FBQWdKLFlBQUExRixlQUFBdEQsT0FTQXlJLEVBQUF4SixVQUFBMkUsYUFBQSxXQUNBLElBQUEwRixFQUFBdEosS0FFQUEsS0FBQXFKLGNBRUFySixLQUFBNkksY0FBQWpJLFFBQUEsU0FBQTJJLEdBQ0FBLEVBQUF2QixZQUNBc0IsRUFBQVYsb0JBQUF0SSxLQUFBaUosTUFXQWQsRUFBQXhKLFVBQUE2RSxnQkFBQSxXQUVBLEdBQUE5RCxLQUFBNkQsWUFBQSxDQUlBLElBQUEvQyxFQUFBZCxLQUFBaUosYUFHQXpJLEVBQUFSLEtBQUE0SSxvQkFBQVksSUFBQSxTQUFBRCxHQUNBLFdBQUFwQixFQUFBb0IsRUFBQTNFLE9BQUEyRSxFQUFBckIsbUJBR0FsSSxLQUFBK0ksVUFBQWhMLEtBQUErQyxFQUFBTixFQUFBTSxHQUNBZCxLQUFBcUosZ0JBUUFaLEVBQUF4SixVQUFBb0ssWUFBQSxXQUNBckosS0FBQTRJLG9CQUFBbkksT0FBQSxJQVFBZ0ksRUFBQXhKLFVBQUE0RSxVQUFBLFdBQ0EsT0FBQTdELEtBQUE0SSxvQkFBQXhJLE9BQUEsR0FNQSxJQUFBbUQsRUFBQSxvQkFBQWtHLFFBQUEsSUFBQUEsUUFBQSxJQUFBbkssRUFNQW9LLEVBQUEsU0FBQTdJLEdBQ0EsS0FBQWIsZ0JBQUEwSixHQUNBLFVBQUFaLFVBQUEsc0NBRUEsSUFBQW5ELFVBQUF2RixPQUNBLFVBQUEwSSxVQUFBLDRDQUdBLElBQUFKLEVBQUF4RyxFQUFBdUMsY0FDQXRCLEVBQUEsSUFBQXNGLEVBQUE1SCxFQUFBNkgsRUFBQTFJLE1BRUF1RCxFQUFBbEQsSUFBQUwsS0FBQW1ELEtBSUEsb0NBQUF2QyxRQUFBLFNBQUErSSxHQUNBRCxFQUFBekssVUFBQTBLLEdBQUEsV0FDQSxPQUFBcEYsRUFBQWhCLEVBQUE3RSxJQUFBc0IsT0FBQTJKLEdBQUFDLE1BQUFyRixFQUFBb0IsV0FDQSxJQUFBcEIsS0FJQSxJQUFBekUsT0FFQSxJQUFBc0IsRUFBQXNJLGVBQ0F0SSxFQUFBc0ksZUFHQUEsRUFHQUcsRUFBQSxxQ0MvL0JBLElBQUFDLEVBR0FBLEVBQUEsV0FDQSxPQUFBOUosS0FEQSxHQUlBLElBRUE4SixLQUFBdkksU0FBQSxjQUFBQSxLQUFBLEVBQUF3SSxNQUFBLFFBQ0MsTUFBQUMsR0FFRCxpQkFBQTlJLFNBQUE0SSxFQUFBNUksUUFPQXZELEVBQUFELFFBQUFvTSxrRENmQSxTQUFBRyxFQUFBQyxHQUVBLElBQUFBLEVBRUEsWUFEQUMsUUFBQUMsSUFBQSxpRkFJQXBLLEtBQUFxSyxVQUFBbEosU0FBQW1KLGVBQUFKLEdBRUFsSyxLQUFBdUssa0JBRUF2SyxLQUFBd0ssZUFBQSxFQUVBeEssS0FBQXlLLG1CQUVBekssS0FBQTBLLE9BQUExSyxLQUFBcUssVUFBQU0sdUJBQUEsMEJBRUEzSyxLQUFBNEssWUFBQSxFQUVBNUssS0FBQTZLLFlBQUEsRUFFQTdLLEtBQUE4SyxlQUFBLEVBRUE5SyxLQUFBK0ssYUFBQS9LLEtBQUFxSyxVQUFBTSx1QkFBQSx1QkFFQTNLLEtBQUFnTCxVQUFBaEwsS0FBQXFLLFVBQUFNLHVCQUFBLGlCQUVBM0ssS0FBQWlMLFdBQUFqTCxLQUFBcUssVUFBQU0sdUJBQUEsa0JBRUEzSyxLQUFBZ0wsVUFBQWpILGlCQUFBLFFBQUEvRCxLQUFBa0wsV0FBQXhKLEtBQUExQixLQUFBLE1BRUFBLEtBQUFpTCxXQUFBbEgsaUJBQUEsUUFBQS9ELEtBQUFtTCxZQUFBekosS0FBQTFCLEtBQUEsTUFFQSxJQUFBb0wsRUFBQSxFQUFBNUssSUFDQSxVQUFBWCxLQUFBVyxFQUFBLENBQ0FSLEtBQUFxTCxnQkFDQSxNQUFBaEYsS0FBVUEsRUFBQUcsTUFBQUUsUUFBQUMsVUFBeUI5RyxFQUFBeUksWUFDbkM2QixRQUFBQyxJQUFBLFdBQUF2SyxFQUFBK0UsUUFDQXVGLFFBQUFDLHVCQUFrQzFELFNBQWVDLE9BQ2pEd0QsUUFBQUMsMkJBQXNDNUQsU0FBYUgsVUFHbkRyQyxRQUFBaEUsS0FBQTBLLFFBNFhBLFNBQUFZLEVBQUFDLEdBR0F2TCxLQUFBd0ssZUFBQXhLLEtBQUF1SyxlQUFBbkssUUFDQUosS0FBQXVLLGVBQUF2SyxLQUFBd0ssZ0JBQUFnQixHQUFBQyxnQkFBQSxpQkFFQXpMLEtBQUF1SyxlQUFBZ0IsR0FBQUMsR0FBQUUsYUFBQSxxQkFJQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUVBQyxFQUFBL04sS0FBQWlDLEtBQUEsR0FBMkJxRyxLQUFBdUYsRUFBQWxGLE1BQUFtRixFQUFBLEtBRTNCLFFBQUFqTyxFQUFBLEVBQUFtTyxFQUFBL0wsS0FBQXVLLGVBQUFuSyxPQUFzRHhDLEVBQUFtTyxFQUFhbk8sSUFDbkVrTyxFQUFBL04sS0FBQWlDLEtBQUFwQyxHQUE0QnlJLEtBQUFyRyxLQUFBdUssZUFBQTNNLEVBQUEsR0FBQXFLLEtBQUE1QixLQUFBckcsS0FBQXVLLGVBQUEzTSxFQUFBLEdBQUFxSyxLQUFBdkIsWUFBQW1GLEVBQUFqTyxLQUs1QixTQUFBa08sRUFBQVAsRUFBQXRELEdBQ0FqSSxLQUFBdUssZUFBQTlKLE9BQUE4SyxFQUFBLEdBQ0FDLEdBQUF4TCxLQUFBdUssZUFBQWdCLEdBQUFDLEdBRUF2RCxTQTVZQWdDLEVBQUFoTCxVQUFBK00sYUFBQSxTQUFBQyxFQUFBQyxFQUFBLElBRUEsUUFBQUMsSUFBQUYsR0FBQSxJQUFBQSxFQUFBN0wsT0FBQSxDQU9BLFFBQUF4QyxFQUFBLEVBQWdCQSxFQUFBcU8sRUFBQTdMLE9BQW1CeEMsSUFDbkNvQyxLQUFBb00sWUFBQWpMLFNBQUFtSixlQUFBNEIsRUFBQUQsRUFBQXJPLEtBTUEwTixFQUFBdk4sS0FBQWlDLEtBQUEsR0FDQUEsS0FBQXFMLHFCQWRBbEIsUUFBQUMsSUFBQSx3REFvQkFILEVBQUFoTCxVQUFBb04sZ0JBQUEsV0FFQSxNQUFBQyxFQUFBdE0sS0FBQXFLLFVBQUFNLHVCQUFBLGVBRUEsT0FBQTJCLEVBQUFsTSxPQUFBLENBS0EsUUFBQXhDLEVBQUEsRUFBZ0JBLEVBQUEwTyxFQUFBbE0sT0FBaUJ4QyxJQUNqQ29DLEtBQUFvTSxZQUFBRSxFQUFBMU8sSUFJQTBOLEVBQUF2TixLQUFBaUMsS0FBQSxHQUNBQSxLQUFBcUwscUJBVkFsQixRQUFBQyxJQUFBLHlDQWVBSCxFQUFBaEwsVUFBQW1OLFlBQUEsU0FBQUcsRUFBQWxCLEdBQUEsR0FHQWtCLEVBQUFiLGFBQUEsZ0JBR0EsTUFBQWMsRUFBQXhNLEtBQUF1SyxlQUFBbkssT0FFQSxJQUFBcU0sRUFBQXpNLEtBR0F1TSxFQUFBRyxZQUFBLFNBQUExQyxHQUNBLGFBQUFBLEVBQUEyQyxLQUFBLENBQ0FGLEVBQUFHLGtCQUFBSixHQUNBLFFBQUE1TyxFQUFBLEVBQWtCQSxFQUFBNk8sRUFBQWhDLGdCQUFBckssT0FBbUN4QyxJQUNyRDZPLEVBQUFoQyxnQkFBQTdNLEdBQUE2TyxFQUFBakMsZUFBQWdDLEtBSUFELEVBQUF4SSxpQkFBQSxRQUFBd0ksR0FHQXZNLEtBQUF1SyxlQUFBakssTUFDQWtMLEdBQUFlLEVBQ0F0RSxNQUNBNUIsS0FBQSxFQUNBSyxNQUFBLEtBT0EyRSxHQUNBckwsS0FBQXFMLGlCQU9BcEIsRUFBQWhMLFVBQUE0TixrQkFBQSxXQUNBLFFBQUFqUCxFQUFBb0MsS0FBQXVLLGVBQUFuSyxPQUF5Q3hDLEVBQUEsRUFBT0EsSUFDaERvQyxLQUFBOE0sY0FBQSxHQUVBOU0sS0FBQXlLLG1CQUNBekssS0FBQXFMLGlCQUtBcEIsRUFBQWhMLFVBQUE2TixjQUFBLFNBQUF2QixFQUFBRixHQUFBLEdBSUFyTCxLQUFBdUssZUFBQWdCLEdBQUFDLEdBQUFuSCxvQkFBQSxRQUFBckUsS0FBQXVLLGVBQUFnQixHQUFBQyxJQUdBeEwsS0FBQXVLLGVBQUFnQixHQUFBQyxHQUFBQyxnQkFBQSxZQUdBekwsS0FBQXVLLGVBQUFnQixHQUFBQyxHQUFBQyxnQkFBQSxpQkFFQSxNQUFBc0IsRUFBQS9NLEtBQUF1SyxlQUFBZ0IsR0FBQUMsR0FBQXdCLE1BQUEsZUFDQSxRQUFBRCxHQUFBLEtBQUFBLElBQ0EvTSxLQUFBdUssZUFBQWdCLEdBQUFDLEdBQUF3QixNQUFBLHNCQUlBaE4sS0FBQXVLLGVBQUE5SixPQUFBOEssRUFBQSxHQUVBLElBQUF2TCxLQUFBdUssZUFBQW5LLFNBQ0FKLEtBQUErSyxhQUFBaUMsTUFBQXRHLE1BQUEsS0FNQTJFLEdBQ0FyTCxLQUFBcUwsaUJBTUFwQixFQUFBaEwsVUFBQTJOLGtCQUFBLFNBQUFLLEdBTUEsSUFBQWpOLEtBQUF1SyxlQUFBbkssT0FNQTZNLEdBQUFqTixLQUFBdUssZUFBQW5LLE9BQ0ErSixRQUFBQyxJQUFBLDJDQUlBcEssS0FBQXdLLGVBQUF5QyxFQUNBM0IsRUFBQXZOLEtBQUFpQyxLQUFBaU4sR0FDQWpOLEtBQUFrTixxQkFaQWxOLEtBQUF3SyxlQUFBLEdBbUJBUCxFQUFBaEwsVUFBQWtPLGtCQUFBLFNBQUF0TSxHQUNBYixLQUFBeUssZ0JBQUFuSyxLQUFBTyxJQUdBb0osRUFBQWhMLFVBQUFvTSxjQUFBLFdBRUEsT0FBQXJMLEtBQUF1SyxlQUFBbkssT0FDQSxPQUtBSixLQUFBNkssWUFBQTdLLEtBQUEwSyxPQUFBMEMsd0JBQUExRyxNQUVBMUcsS0FBQThLLGVBQUEsRUFDQSxJQUFBZSxFQUFBN0wsS0FBQXVLLGVBQUFmLElBQUErQyxJQUNBLE1BQUFjLEVBQUFkLEVBQUFmLEdBQUE0Qix3QkFBQTFHLE1BRUEsT0FEQTFHLEtBQUE4SyxnQkFBQXVDLEVBQ0FBLElBTUFyTixLQUFBOEssZUFBQTlLLEtBQUE2SyxhQUNBN0ssS0FBQTBLLE9BQUFzQyxNQUFBLHFCQUVBckIsRUFBQTVOLEtBQUFpQyxLQUFBLEVBQUE2TCxHQUNBN0wsS0FBQWtOLHNCQUVBbE4sS0FBQTBLLE9BQUFzQyxNQUFBLHVCQUNBaE4sS0FBQXNOLGNBQUEsR0FDQTNCLEVBQUE1TixLQUFBaUMsV0FBQTZLLFlBQUE3SyxLQUFBOEssZ0JBQUEsRUFBQWUsR0FDQTdMLEtBQUF1TixpQkFDQXZOLEtBQUF3TixjQUtBdkQsRUFBQWhMLFVBQUFpTyxrQkFBQSxXQUdBLEdBQUFsTixLQUFBOEssZ0JBQUE5SyxLQUFBNkssWUFFQSxZQURBN0ssS0FBQXVOLGlCQUlBLElBQUFFLEVBQUF6TixLQUFBdUssZUFBQXZLLEtBQUF3SyxnQkFHQSxNQUFBa0QsRUFBQUQsRUFBQXhGLEtBQUE1QixLQUFBckcsS0FBQTRLLFlBR0ErQyxFQUFBRixFQUFBeEYsS0FBQTVCLEtBQUFvSCxFQUFBeEYsS0FBQXZCLE1BQUExRyxLQUFBNEssWUFFQSxHQUFBOEMsRUFBQSxHQUtBLE1BQUFFLEVBQUF2TSxLQUFBNkYsSUFBQXdHLEdBQUExTixLQUFBNkssWUFNQTdLLEtBQUFrTCxXQUFBMEMsRUFBQSxJQUFBSCxFQUFBeEYsS0FBQXZCLE1BQUExRyxLQUFBNkssa0JBRUUsR0FBQThDLEVBQUEzTixLQUFBNkssWUFBQSxDQUtGLE1BQUErQyxFQUFBRCxFQUFBM04sS0FBQTZLLFlBTUE3SyxLQUFBbUwsWUFBQXlDLEVBQUEsSUFBQUgsRUFBQXhGLEtBQUF2QixNQUFBMUcsS0FBQTZLLGtCQUlBLElBQUE3SyxLQUFBd0ssZ0JBQ0F4SyxLQUFBd04sVUFBQSxRQUVBeE4sS0FBQXVOLGlCQUtBLE1BQUFNLEVBQUE3TixLQUFBdUssZUFBQXZLLEtBQUF1SyxlQUFBbkssT0FBQSxHQUFBNkgsS0FFQTRGLEVBQUF4SCxLQUFBd0gsRUFBQW5ILE1BQUExRyxLQUFBNEssWUFDQTVLLEtBQUE2SyxhQUNBN0ssS0FBQThOLFVBQUEsVUFLQTdELEVBQUFoTCxVQUFBc08sZUFBQSxXQUNBLElBQUFRLEVBQUEvTixLQUFBd0ssZUFFQXVELEdBQUEvTixLQUFBdUssZUFBQW5LLFNBRUEyTixFQUFBL04sS0FBQXVLLGVBQUFuSyxPQUFBLEdBT0FKLEtBQUErSyxhQUFBaUMsTUFBQTNHLEtBQUFyRyxLQUFBNEssWUFBQTVLLEtBQUF1SyxlQUFBd0QsR0FBQTlGLEtBQUE1QixLQUFBLEtBQ0FyRyxLQUFBK0ssYUFBQWlDLE1BQUF0RyxNQUFBMUcsS0FBQXVLLGVBQUF3RCxHQUFBOUYsS0FBQXZCLE1BQUEsTUFJQXVELEVBQUFoTCxVQUFBaU0sV0FBQSxTQUFBOEMsUUFFQTdCLElBQUE2QixJQUNBQSxFQUFBLEtBR0EsSUFBQUMsRUFBQUQsRUFBQWhPLEtBQUE2SyxZQUdBN0ssS0FBQTRLLGFBQUEsSUFJQXZKLEtBQUE2RixJQUFBbEgsS0FBQTRLLGFBQUFxRCxFQUdBak8sS0FBQXNOLGNBQUF0TixLQUFBNEssWUFBQXFELElBS0FqTyxLQUFBc04sY0FBQSxHQUNBdE4sS0FBQXdOLFVBQUEsU0FJQXhOLEtBQUF1TixpQkFFQXZOLEtBQUE4TixVQUFBLFdBS0E3RCxFQUFBaEwsVUFBQWtNLFlBQUEsU0FBQTZDLFFBRUE3QixJQUFBNkIsSUFDQUEsRUFBQSxLQUdBLElBQUFDLEVBQUFELEVBQUFoTyxLQUFBNkssWUFHQSxNQUFBcUQsRUFBQTdNLEtBQUE2RixJQUFBbEgsS0FBQThLLGVBQUE5SyxLQUFBNkssWUFBQTdLLEtBQUE0SyxhQUdBc0QsR0FBQSxJQUlBQSxFQUFBRCxFQUdBak8sS0FBQXNOLGNBQUF0TixLQUFBNEssWUFBQXFELElBS0FqTyxLQUFBc04sZ0JBQUF0TixLQUFBOEssZUFBQTlLLEtBQUE2SyxjQUNBN0ssS0FBQXdOLFVBQUEsVUFJQXhOLEtBQUF1TixpQkFFQXZOLEtBQUE4TixVQUFBLFVBSUE3RCxFQUFBaEwsVUFBQXFPLGNBQUEsU0FBQWEsR0FDQW5PLEtBQUE0SyxZQUFBdUQsRUFDQW5PLEtBQUF1SyxlQUFBLEdBQUFpQixHQUFBd0IsTUFBQSxlQUFBaE4sS0FBQTRLLFlBQUEsTUFJQVgsRUFBQWhMLFVBQUE2TyxVQUFBLFNBQUFNLEdBQ0EsU0FBQUEsRUFDQXBPLEtBQUFnTCxVQUFBZ0MsTUFBQXFCLFdBQUEsR0FDRSxVQUFBRCxFQUNGcE8sS0FBQWlMLFdBQUErQixNQUFBcUIsV0FBQSxJQUVBck8sS0FBQWdMLFVBQUFnQyxNQUFBcUIsV0FBQSxHQUNBck8sS0FBQWlMLFdBQUErQixNQUFBcUIsV0FBQSxLQUtBcEUsRUFBQWhMLFVBQUF1TyxVQUFBLFNBQUFZLEdBQ0EsU0FBQUEsRUFDQXBPLEtBQUFnTCxVQUFBZ0MsTUFBQXFCLFdBQUEsU0FDRSxVQUFBRCxFQUNGcE8sS0FBQWlMLFdBQUErQixNQUFBcUIsV0FBQSxVQUVBck8sS0FBQWdMLFVBQUFnQyxNQUFBcUIsV0FBQSxTQUNBck8sS0FBQWlMLFdBQUErQixNQUFBcUIsV0FBQSxXQW9DQXhFLEVBQUEiLCJmaWxlIjoiYXBwLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiLyoqXHJcbiAqIEEgY29sbGVjdGlvbiBvZiBzaGltcyB0aGF0IHByb3ZpZGUgbWluaW1hbCBmdW5jdGlvbmFsaXR5IG9mIHRoZSBFUzYgY29sbGVjdGlvbnMuXHJcbiAqXHJcbiAqIFRoZXNlIGltcGxlbWVudGF0aW9ucyBhcmUgbm90IG1lYW50IHRvIGJlIHVzZWQgb3V0c2lkZSBvZiB0aGUgUmVzaXplT2JzZXJ2ZXJcclxuICogbW9kdWxlcyBhcyB0aGV5IGNvdmVyIG9ubHkgYSBsaW1pdGVkIHJhbmdlIG9mIHVzZSBjYXNlcy5cclxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jLCB2YWxpZC1qc2RvYyAqL1xudmFyIE1hcFNoaW0gPSAoZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgTWFwICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gTWFwO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBpbmRleCBpbiBwcm92aWRlZCBhcnJheSB0aGF0IG1hdGNoZXMgdGhlIHNwZWNpZmllZCBrZXkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtBcnJheTxBcnJheT59IGFyclxyXG4gICAgICogQHBhcmFtIHsqfSBrZXlcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRJbmRleChhcnIsIGtleSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgICAgICAgYXJyLnNvbWUoZnVuY3Rpb24gKGVudHJ5LCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGVudHJ5WzBdID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBpbmRleDtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIGFub255bW91cygpIHtcbiAgICAgICAgICAgIHRoaXMuX19lbnRyaWVzX18gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwcm90b3R5cGVBY2Nlc3NvcnMgPSB7IHNpemU6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0gfTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdG90eXBlQWNjZXNzb3JzLnNpemUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19lbnRyaWVzX18ubGVuZ3RoO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0ga2V5XHJcbiAgICAgICAgICogQHJldHVybnMgeyp9XHJcbiAgICAgICAgICovXG4gICAgICAgIGFub255bW91cy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXgodGhpcy5fX2VudHJpZXNfXywga2V5KTtcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHRoaXMuX19lbnRyaWVzX19baW5kZXhdO1xuXG4gICAgICAgICAgICByZXR1cm4gZW50cnkgJiYgZW50cnlbMV07XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBrZXlcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXHJcbiAgICAgICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgICAgICovXG4gICAgICAgIGFub255bW91cy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGdldEluZGV4KHRoaXMuX19lbnRyaWVzX18sIGtleSk7XG5cbiAgICAgICAgICAgIGlmICh+aW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fZW50cmllc19fW2luZGV4XVsxXSA9IHZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fZW50cmllc19fLnB1c2goW2tleSwgdmFsdWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0geyp9IGtleVxyXG4gICAgICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICAgICAqL1xuICAgICAgICBhbm9ueW1vdXMucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHZhciBlbnRyaWVzID0gdGhpcy5fX2VudHJpZXNfXztcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGdldEluZGV4KGVudHJpZXMsIGtleSk7XG5cbiAgICAgICAgICAgIGlmICh+aW5kZXgpIHtcbiAgICAgICAgICAgICAgICBlbnRyaWVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBrZXlcclxuICAgICAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAgICAgKi9cbiAgICAgICAgYW5vbnltb3VzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gISF+Z2V0SW5kZXgodGhpcy5fX2VudHJpZXNfXywga2V5KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAgICAgKi9cbiAgICAgICAgYW5vbnltb3VzLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX19lbnRyaWVzX18uc3BsaWNlKDApO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbY3R4PW51bGxdXHJcbiAgICAgICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgICAgICovXG4gICAgICAgIGFub255bW91cy5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgY3R4KSB7XG4gICAgICAgICAgICB2YXIgdGhpcyQxID0gdGhpcztcbiAgICAgICAgICAgIGlmICggY3R4ID09PSB2b2lkIDAgKSBjdHggPSBudWxsO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IHRoaXMkMS5fX2VudHJpZXNfXzsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICB2YXIgZW50cnkgPSBsaXN0W2ldO1xuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjdHgsIGVudHJ5WzFdLCBlbnRyeVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIGFub255bW91cy5wcm90b3R5cGUsIHByb3RvdHlwZUFjY2Vzc29ycyApO1xuXG4gICAgICAgIHJldHVybiBhbm9ueW1vdXM7XG4gICAgfSgpKTtcbn0pKCk7XG5cbi8qKlxyXG4gKiBEZXRlY3RzIHdoZXRoZXIgd2luZG93IGFuZCBkb2N1bWVudCBvYmplY3RzIGFyZSBhdmFpbGFibGUgaW4gY3VycmVudCBlbnZpcm9ubWVudC5cclxuICovXG52YXIgaXNCcm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQgPT09IGRvY3VtZW50O1xuXG4vLyBSZXR1cm5zIGdsb2JhbCBvYmplY3Qgb2YgYSBjdXJyZW50IGVudmlyb25tZW50LlxudmFyIGdsb2JhbCQxID0gKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsLk1hdGggPT09IE1hdGgpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PT0gTWF0aCkge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT09IE1hdGgpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcbiAgICByZXR1cm4gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbn0pKCk7XG5cbi8qKlxyXG4gKiBBIHNoaW0gZm9yIHRoZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgd2hpY2ggZmFsbHMgYmFjayB0byB0aGUgc2V0VGltZW91dCBpZlxyXG4gKiBmaXJzdCBvbmUgaXMgbm90IHN1cHBvcnRlZC5cclxuICpcclxuICogQHJldHVybnMge251bWJlcn0gUmVxdWVzdHMnIGlkZW50aWZpZXIuXHJcbiAqL1xudmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSQxID0gKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBJdCdzIHJlcXVpcmVkIHRvIHVzZSBhIGJvdW5kZWQgZnVuY3Rpb24gYmVjYXVzZSBJRSBzb21ldGltZXMgdGhyb3dzXG4gICAgICAgIC8vIGFuIFwiSW52YWxpZCBjYWxsaW5nIG9iamVjdFwiIGVycm9yIGlmIHJBRiBpcyBpbnZva2VkIHdpdGhvdXQgdGhlIGdsb2JhbFxuICAgICAgICAvLyBvYmplY3Qgb24gdGhlIGxlZnQgaGFuZCBzaWRlLlxuICAgICAgICByZXR1cm4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQoZ2xvYmFsJDEpO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoY2FsbGJhY2spIHsgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY2FsbGJhY2soRGF0ZS5ub3coKSk7IH0sIDEwMDAgLyA2MCk7IH07XG59KSgpO1xuXG4vLyBEZWZpbmVzIG1pbmltdW0gdGltZW91dCBiZWZvcmUgYWRkaW5nIGEgdHJhaWxpbmcgY2FsbC5cbnZhciB0cmFpbGluZ1RpbWVvdXQgPSAyO1xuXG4vKipcclxuICogQ3JlYXRlcyBhIHdyYXBwZXIgZnVuY3Rpb24gd2hpY2ggZW5zdXJlcyB0aGF0IHByb3ZpZGVkIGNhbGxiYWNrIHdpbGwgYmVcclxuICogaW52b2tlZCBvbmx5IG9uY2UgZHVyaW5nIHRoZSBzcGVjaWZpZWQgZGVsYXkgcGVyaW9kLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIEZ1bmN0aW9uIHRvIGJlIGludm9rZWQgYWZ0ZXIgdGhlIGRlbGF5IHBlcmlvZC5cclxuICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5IC0gRGVsYXkgYWZ0ZXIgd2hpY2ggdG8gaW52b2tlIGNhbGxiYWNrLlxyXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XHJcbiAqL1xudmFyIHRocm90dGxlID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBkZWxheSkge1xuICAgIHZhciBsZWFkaW5nQ2FsbCA9IGZhbHNlLFxuICAgICAgICB0cmFpbGluZ0NhbGwgPSBmYWxzZSxcbiAgICAgICAgbGFzdENhbGxUaW1lID0gMDtcblxuICAgIC8qKlxyXG4gICAgICogSW52b2tlcyB0aGUgb3JpZ2luYWwgY2FsbGJhY2sgZnVuY3Rpb24gYW5kIHNjaGVkdWxlcyBuZXcgaW52b2NhdGlvbiBpZlxyXG4gICAgICogdGhlIFwicHJveHlcIiB3YXMgY2FsbGVkIGR1cmluZyBjdXJyZW50IHJlcXVlc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXNvbHZlUGVuZGluZygpIHtcbiAgICAgICAgaWYgKGxlYWRpbmdDYWxsKSB7XG4gICAgICAgICAgICBsZWFkaW5nQ2FsbCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRyYWlsaW5nQ2FsbCkge1xuICAgICAgICAgICAgcHJveHkoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogQ2FsbGJhY2sgaW52b2tlZCBhZnRlciB0aGUgc3BlY2lmaWVkIGRlbGF5LiBJdCB3aWxsIGZ1cnRoZXIgcG9zdHBvbmVcclxuICAgICAqIGludm9jYXRpb24gb2YgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIGRlbGVnYXRpbmcgaXQgdG8gdGhlXHJcbiAgICAgKiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0aW1lb3V0Q2FsbGJhY2soKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSQxKHJlc29sdmVQZW5kaW5nKTtcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIFNjaGVkdWxlcyBpbnZvY2F0aW9uIG9mIHRoZSBvcmlnaW5hbCBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByb3h5KCkge1xuICAgICAgICB2YXIgdGltZVN0YW1wID0gRGF0ZS5ub3coKTtcblxuICAgICAgICBpZiAobGVhZGluZ0NhbGwpIHtcbiAgICAgICAgICAgIC8vIFJlamVjdCBpbW1lZGlhdGVseSBmb2xsb3dpbmcgY2FsbHMuXG4gICAgICAgICAgICBpZiAodGltZVN0YW1wIC0gbGFzdENhbGxUaW1lIDwgdHJhaWxpbmdUaW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTY2hlZHVsZSBuZXcgY2FsbCB0byBiZSBpbiBpbnZva2VkIHdoZW4gdGhlIHBlbmRpbmcgb25lIGlzIHJlc29sdmVkLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBpbXBvcnRhbnQgZm9yIFwidHJhbnNpdGlvbnNcIiB3aGljaCBuZXZlciBhY3R1YWxseSBzdGFydFxuICAgICAgICAgICAgLy8gaW1tZWRpYXRlbHkgc28gdGhlcmUgaXMgYSBjaGFuY2UgdGhhdCB3ZSBtaWdodCBtaXNzIG9uZSBpZiBjaGFuZ2VcbiAgICAgICAgICAgIC8vIGhhcHBlbnMgYW1pZHMgdGhlIHBlbmRpbmcgaW52b2NhdGlvbi5cbiAgICAgICAgICAgIHRyYWlsaW5nQ2FsbCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZWFkaW5nQ2FsbCA9IHRydWU7XG4gICAgICAgICAgICB0cmFpbGluZ0NhbGwgPSBmYWxzZTtcblxuICAgICAgICAgICAgc2V0VGltZW91dCh0aW1lb3V0Q2FsbGJhY2ssIGRlbGF5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxhc3RDYWxsVGltZSA9IHRpbWVTdGFtcDtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJveHk7XG59O1xuXG4vLyBNaW5pbXVtIGRlbGF5IGJlZm9yZSBpbnZva2luZyB0aGUgdXBkYXRlIG9mIG9ic2VydmVycy5cbnZhciBSRUZSRVNIX0RFTEFZID0gMjA7XG5cbi8vIEEgbGlzdCBvZiBzdWJzdHJpbmdzIG9mIENTUyBwcm9wZXJ0aWVzIHVzZWQgdG8gZmluZCB0cmFuc2l0aW9uIGV2ZW50cyB0aGF0XG4vLyBtaWdodCBhZmZlY3QgZGltZW5zaW9ucyBvZiBvYnNlcnZlZCBlbGVtZW50cy5cbnZhciB0cmFuc2l0aW9uS2V5cyA9IFsndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbScsICdsZWZ0JywgJ3dpZHRoJywgJ2hlaWdodCcsICdzaXplJywgJ3dlaWdodCddO1xuXG4vLyBDaGVjayBpZiBNdXRhdGlvbk9ic2VydmVyIGlzIGF2YWlsYWJsZS5cbnZhciBtdXRhdGlvbk9ic2VydmVyU3VwcG9ydGVkID0gdHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnO1xuXG4vKipcclxuICogU2luZ2xldG9uIGNvbnRyb2xsZXIgY2xhc3Mgd2hpY2ggaGFuZGxlcyB1cGRhdGVzIG9mIFJlc2l6ZU9ic2VydmVyIGluc3RhbmNlcy5cclxuICovXG52YXIgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jb25uZWN0ZWRfID0gZmFsc2U7XG4gICAgdGhpcy5tdXRhdGlvbkV2ZW50c0FkZGVkXyA9IGZhbHNlO1xuICAgIHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfID0gbnVsbDtcbiAgICB0aGlzLm9ic2VydmVyc18gPSBbXTtcblxuICAgIHRoaXMub25UcmFuc2l0aW9uRW5kXyA9IHRoaXMub25UcmFuc2l0aW9uRW5kXy5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVmcmVzaCA9IHRocm90dGxlKHRoaXMucmVmcmVzaC5iaW5kKHRoaXMpLCBSRUZSRVNIX0RFTEFZKTtcbn07XG5cbi8qKlxyXG4gKiBBZGRzIG9ic2VydmVyIHRvIG9ic2VydmVycyBsaXN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge1Jlc2l6ZU9ic2VydmVyU1BJfSBvYnNlcnZlciAtIE9ic2VydmVyIHRvIGJlIGFkZGVkLlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXG5cblxuLyoqXHJcbiAqIEhvbGRzIHJlZmVyZW5jZSB0byB0aGUgY29udHJvbGxlcidzIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHJpdmF0ZSB7UmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyfVxyXG4gKi9cblxuXG4vKipcclxuICogS2VlcHMgcmVmZXJlbmNlIHRvIHRoZSBpbnN0YW5jZSBvZiBNdXRhdGlvbk9ic2VydmVyLlxyXG4gKlxyXG4gKiBAcHJpdmF0ZSB7TXV0YXRpb25PYnNlcnZlcn1cclxuICovXG5cbi8qKlxyXG4gKiBJbmRpY2F0ZXMgd2hldGhlciBET00gbGlzdGVuZXJzIGhhdmUgYmVlbiBhZGRlZC5cclxuICpcclxuICogQHByaXZhdGUge2Jvb2xlYW59XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5hZGRPYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgIGlmICghfnRoaXMub2JzZXJ2ZXJzXy5pbmRleE9mKG9ic2VydmVyKSkge1xuICAgICAgICB0aGlzLm9ic2VydmVyc18ucHVzaChvYnNlcnZlcik7XG4gICAgfVxuXG4gICAgLy8gQWRkIGxpc3RlbmVycyBpZiB0aGV5IGhhdmVuJ3QgYmVlbiBhZGRlZCB5ZXQuXG4gICAgaWYgKCF0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgICAgdGhpcy5jb25uZWN0XygpO1xuICAgIH1cbn07XG5cbi8qKlxyXG4gKiBSZW1vdmVzIG9ic2VydmVyIGZyb20gb2JzZXJ2ZXJzIGxpc3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7UmVzaXplT2JzZXJ2ZXJTUEl9IG9ic2VydmVyIC0gT2JzZXJ2ZXIgdG8gYmUgcmVtb3ZlZC5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5yZW1vdmVPYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVyc187XG4gICAgdmFyIGluZGV4ID0gb2JzZXJ2ZXJzLmluZGV4T2Yob2JzZXJ2ZXIpO1xuXG4gICAgLy8gUmVtb3ZlIG9ic2VydmVyIGlmIGl0J3MgcHJlc2VudCBpbiByZWdpc3RyeS5cbiAgICBpZiAofmluZGV4KSB7XG4gICAgICAgIG9ic2VydmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBsaXN0ZW5lcnMgaWYgY29udHJvbGxlciBoYXMgbm8gY29ubmVjdGVkIG9ic2VydmVycy5cbiAgICBpZiAoIW9ic2VydmVycy5sZW5ndGggJiYgdGhpcy5jb25uZWN0ZWRfKSB7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdF8oKTtcbiAgICB9XG59O1xuXG4vKipcclxuICogSW52b2tlcyB0aGUgdXBkYXRlIG9mIG9ic2VydmVycy4gSXQgd2lsbCBjb250aW51ZSBydW5uaW5nIHVwZGF0ZXMgaW5zb2ZhclxyXG4gKiBpdCBkZXRlY3RzIGNoYW5nZXMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cblJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2hhbmdlc0RldGVjdGVkID0gdGhpcy51cGRhdGVPYnNlcnZlcnNfKCk7XG5cbiAgICAvLyBDb250aW51ZSBydW5uaW5nIHVwZGF0ZXMgaWYgY2hhbmdlcyBoYXZlIGJlZW4gZGV0ZWN0ZWQgYXMgdGhlcmUgbWlnaHRcbiAgICAvLyBiZSBmdXR1cmUgb25lcyBjYXVzZWQgYnkgQ1NTIHRyYW5zaXRpb25zLlxuICAgIGlmIChjaGFuZ2VzRGV0ZWN0ZWQpIHtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxufTtcblxuLyoqXHJcbiAqIFVwZGF0ZXMgZXZlcnkgb2JzZXJ2ZXIgZnJvbSBvYnNlcnZlcnMgbGlzdCBhbmQgbm90aWZpZXMgdGhlbSBvZiBxdWV1ZWRcclxuICogZW50cmllcy5cclxuICpcclxuICogQHByaXZhdGVcclxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgXCJ0cnVlXCIgaWYgYW55IG9ic2VydmVyIGhhcyBkZXRlY3RlZCBjaGFuZ2VzIGluXHJcbiAqICBkaW1lbnNpb25zIG9mIGl0J3MgZWxlbWVudHMuXHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVPYnNlcnZlcnNfID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIENvbGxlY3Qgb2JzZXJ2ZXJzIHRoYXQgaGF2ZSBhY3RpdmUgb2JzZXJ2YXRpb25zLlxuICAgIHZhciBhY3RpdmVPYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVyc18uZmlsdGVyKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuZ2F0aGVyQWN0aXZlKCksIG9ic2VydmVyLmhhc0FjdGl2ZSgpO1xuICAgIH0pO1xuXG4gICAgLy8gRGVsaXZlciBub3RpZmljYXRpb25zIGluIGEgc2VwYXJhdGUgY3ljbGUgaW4gb3JkZXIgdG8gYXZvaWQgYW55XG4gICAgLy8gY29sbGlzaW9ucyBiZXR3ZWVuIG9ic2VydmVycywgZS5nLiB3aGVuIG11bHRpcGxlIGluc3RhbmNlcyBvZlxuICAgIC8vIFJlc2l6ZU9ic2VydmVyIGFyZSB0cmFja2luZyB0aGUgc2FtZSBlbGVtZW50IGFuZCB0aGUgY2FsbGJhY2sgb2Ygb25lXG4gICAgLy8gb2YgdGhlbSBjaGFuZ2VzIGNvbnRlbnQgZGltZW5zaW9ucyBvZiB0aGUgb2JzZXJ2ZWQgdGFyZ2V0LiBTb21ldGltZXNcbiAgICAvLyB0aGlzIG1heSByZXN1bHQgaW4gbm90aWZpY2F0aW9ucyBiZWluZyBibG9ja2VkIGZvciB0aGUgcmVzdCBvZiBvYnNlcnZlcnMuXG4gICAgYWN0aXZlT2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24gKG9ic2VydmVyKSB7IHJldHVybiBvYnNlcnZlci5icm9hZGNhc3RBY3RpdmUoKTsgfSk7XG5cbiAgICByZXR1cm4gYWN0aXZlT2JzZXJ2ZXJzLmxlbmd0aCA+IDA7XG59O1xuXG4vKipcclxuICogSW5pdGlhbGl6ZXMgRE9NIGxpc3RlbmVycy5cclxuICpcclxuICogQHByaXZhdGVcclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5jb25uZWN0XyA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBEbyBub3RoaW5nIGlmIHJ1bm5pbmcgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudCBvciBpZiBsaXN0ZW5lcnNcbiAgICAvLyBoYXZlIGJlZW4gYWxyZWFkeSBhZGRlZC5cbiAgICBpZiAoIWlzQnJvd3NlciB8fCB0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFN1YnNjcmlwdGlvbiB0byB0aGUgXCJUcmFuc2l0aW9uZW5kXCIgZXZlbnQgaXMgdXNlZCBhcyBhIHdvcmthcm91bmQgZm9yXG4gICAgLy8gZGVsYXllZCB0cmFuc2l0aW9ucy4gVGhpcyB3YXkgaXQncyBwb3NzaWJsZSB0byBjYXB0dXJlIGF0IGxlYXN0IHRoZVxuICAgIC8vIGZpbmFsIHN0YXRlIG9mIGFuIGVsZW1lbnQuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRoaXMub25UcmFuc2l0aW9uRW5kXyk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZWZyZXNoKTtcblxuICAgIGlmIChtdXRhdGlvbk9ic2VydmVyU3VwcG9ydGVkKSB7XG4gICAgICAgIHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5yZWZyZXNoKTtcblxuICAgICAgICB0aGlzLm11dGF0aW9uc09ic2VydmVyXy5vYnNlcnZlKGRvY3VtZW50LCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZSxcbiAgICAgICAgICAgIHN1YnRyZWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NU3VidHJlZU1vZGlmaWVkJywgdGhpcy5yZWZyZXNoKTtcblxuICAgICAgICB0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbm5lY3RlZF8gPSB0cnVlO1xufTtcblxuLyoqXHJcbiAqIFJlbW92ZXMgRE9NIGxpc3RlbmVycy5cclxuICpcclxuICogQHByaXZhdGVcclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5kaXNjb25uZWN0XyA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBEbyBub3RoaW5nIGlmIHJ1bm5pbmcgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudCBvciBpZiBsaXN0ZW5lcnNcbiAgICAvLyBoYXZlIGJlZW4gYWxyZWFkeSByZW1vdmVkLlxuICAgIGlmICghaXNCcm93c2VyIHx8ICF0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCB0aGlzLm9uVHJhbnNpdGlvbkVuZF8pO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlZnJlc2gpO1xuXG4gICAgaWYgKHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfKSB7XG4gICAgICAgIHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tdXRhdGlvbkV2ZW50c0FkZGVkXykge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdET01TdWJ0cmVlTW9kaWZpZWQnLCB0aGlzLnJlZnJlc2gpO1xuICAgIH1cblxuICAgIHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfID0gbnVsbDtcbiAgICB0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfID0gZmFsc2U7XG4gICAgdGhpcy5jb25uZWN0ZWRfID0gZmFsc2U7XG59O1xuXG4vKipcclxuICogXCJUcmFuc2l0aW9uZW5kXCIgZXZlbnQgaGFuZGxlci5cclxuICpcclxuICogQHByaXZhdGVcclxuICogQHBhcmFtIHtUcmFuc2l0aW9uRXZlbnR9IGV2ZW50XHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cblJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5wcm90b3R5cGUub25UcmFuc2l0aW9uRW5kXyA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgdmFyIHByb3BlcnR5TmFtZSA9IHJlZi5wcm9wZXJ0eU5hbWU7IGlmICggcHJvcGVydHlOYW1lID09PSB2b2lkIDAgKSBwcm9wZXJ0eU5hbWUgPSAnJztcblxuICAgIC8vIERldGVjdCB3aGV0aGVyIHRyYW5zaXRpb24gbWF5IGFmZmVjdCBkaW1lbnNpb25zIG9mIGFuIGVsZW1lbnQuXG4gICAgdmFyIGlzUmVmbG93UHJvcGVydHkgPSB0cmFuc2l0aW9uS2V5cy5zb21lKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuICEhfnByb3BlcnR5TmFtZS5pbmRleE9mKGtleSk7XG4gICAgfSk7XG5cbiAgICBpZiAoaXNSZWZsb3dQcm9wZXJ0eSkge1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG59O1xuXG4vKipcclxuICogUmV0dXJucyBpbnN0YW5jZSBvZiB0aGUgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7UmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyfVxyXG4gKi9cblJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaW5zdGFuY2VfKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VfID0gbmV3IFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlcigpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmluc3RhbmNlXztcbn07XG5cblJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5pbnN0YW5jZV8gPSBudWxsO1xuXG4vKipcclxuICogRGVmaW5lcyBub24td3JpdGFibGUvZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIHRoZSBwcm92aWRlZCB0YXJnZXQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0IC0gT2JqZWN0IGZvciB3aGljaCB0byBkZWZpbmUgcHJvcGVydGllcy5cclxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzIC0gUHJvcGVydGllcyB0byBiZSBkZWZpbmVkLlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUYXJnZXQgb2JqZWN0LlxyXG4gKi9cbnZhciBkZWZpbmVDb25maWd1cmFibGUgPSAoZnVuY3Rpb24gKHRhcmdldCwgcHJvcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IE9iamVjdC5rZXlzKHByb3BzKTsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgdmFyIGtleSA9IGxpc3RbaV07XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCB7XG4gICAgICAgICAgICB2YWx1ZTogcHJvcHNba2V5XSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG59KTtcblxuLyoqXHJcbiAqIFJldHVybnMgdGhlIGdsb2JhbCBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIHByb3ZpZGVkIGVsZW1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRcclxuICogQHJldHVybnMge09iamVjdH1cclxuICovXG52YXIgZ2V0V2luZG93T2YgPSAoZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIC8vIEFzc3VtZSB0aGF0IHRoZSBlbGVtZW50IGlzIGFuIGluc3RhbmNlIG9mIE5vZGUsIHdoaWNoIG1lYW5zIHRoYXQgaXRcbiAgICAvLyBoYXMgdGhlIFwib3duZXJEb2N1bWVudFwiIHByb3BlcnR5IGZyb20gd2hpY2ggd2UgY2FuIHJldHJpZXZlIGFcbiAgICAvLyBjb3JyZXNwb25kaW5nIGdsb2JhbCBvYmplY3QuXG4gICAgdmFyIG93bmVyR2xvYmFsID0gdGFyZ2V0ICYmIHRhcmdldC5vd25lckRvY3VtZW50ICYmIHRhcmdldC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXG4gICAgLy8gUmV0dXJuIHRoZSBsb2NhbCBnbG9iYWwgb2JqZWN0IGlmIGl0J3Mgbm90IHBvc3NpYmxlIGV4dHJhY3Qgb25lIGZyb21cbiAgICAvLyBwcm92aWRlZCBlbGVtZW50LlxuICAgIHJldHVybiBvd25lckdsb2JhbCB8fCBnbG9iYWwkMTtcbn0pO1xuXG4vLyBQbGFjZWhvbGRlciBvZiBhbiBlbXB0eSBjb250ZW50IHJlY3RhbmdsZS5cbnZhciBlbXB0eVJlY3QgPSBjcmVhdGVSZWN0SW5pdCgwLCAwLCAwLCAwKTtcblxuLyoqXHJcbiAqIENvbnZlcnRzIHByb3ZpZGVkIHN0cmluZyB0byBhIG51bWJlci5cclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZVxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gKi9cbmZ1bmN0aW9uIHRvRmxvYXQodmFsdWUpIHtcbiAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMDtcbn1cblxuLyoqXHJcbiAqIEV4dHJhY3RzIGJvcmRlcnMgc2l6ZSBmcm9tIHByb3ZpZGVkIHN0eWxlcy5cclxuICpcclxuICogQHBhcmFtIHtDU1NTdHlsZURlY2xhcmF0aW9ufSBzdHlsZXNcclxuICogQHBhcmFtIHsuLi5zdHJpbmd9IHBvc2l0aW9ucyAtIEJvcmRlcnMgcG9zaXRpb25zICh0b3AsIHJpZ2h0LCAuLi4pXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAqL1xuZnVuY3Rpb24gZ2V0Qm9yZGVyc1NpemUoc3R5bGVzKSB7XG4gICAgdmFyIHBvc2l0aW9ucyA9IFtdLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMTtcbiAgICB3aGlsZSAoIGxlbi0tID4gMCApIHBvc2l0aW9uc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiArIDEgXTtcblxuICAgIHJldHVybiBwb3NpdGlvbnMucmVkdWNlKGZ1bmN0aW9uIChzaXplLCBwb3NpdGlvbikge1xuICAgICAgICB2YXIgdmFsdWUgPSBzdHlsZXNbJ2JvcmRlci0nICsgcG9zaXRpb24gKyAnLXdpZHRoJ107XG5cbiAgICAgICAgcmV0dXJuIHNpemUgKyB0b0Zsb2F0KHZhbHVlKTtcbiAgICB9LCAwKTtcbn1cblxuLyoqXHJcbiAqIEV4dHJhY3RzIHBhZGRpbmdzIHNpemVzIGZyb20gcHJvdmlkZWQgc3R5bGVzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0NTU1N0eWxlRGVjbGFyYXRpb259IHN0eWxlc1xyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBQYWRkaW5ncyBib3guXHJcbiAqL1xuZnVuY3Rpb24gZ2V0UGFkZGluZ3Moc3R5bGVzKSB7XG4gICAgdmFyIHBvc2l0aW9ucyA9IFsndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbScsICdsZWZ0J107XG4gICAgdmFyIHBhZGRpbmdzID0ge307XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IHBvc2l0aW9uczsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gbGlzdFtpXTtcblxuICAgICAgICB2YXIgdmFsdWUgPSBzdHlsZXNbJ3BhZGRpbmctJyArIHBvc2l0aW9uXTtcblxuICAgICAgICBwYWRkaW5nc1twb3NpdGlvbl0gPSB0b0Zsb2F0KHZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFkZGluZ3M7XG59XG5cbi8qKlxyXG4gKiBDYWxjdWxhdGVzIGNvbnRlbnQgcmVjdGFuZ2xlIG9mIHByb3ZpZGVkIFNWRyBlbGVtZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge1NWR0dyYXBoaWNzRWxlbWVudH0gdGFyZ2V0IC0gRWxlbWVudCBjb250ZW50IHJlY3RhbmdsZSBvZiB3aGljaCBuZWVkc1xyXG4gKiAgICAgIHRvIGJlIGNhbGN1bGF0ZWQuXHJcbiAqIEByZXR1cm5zIHtET01SZWN0SW5pdH1cclxuICovXG5mdW5jdGlvbiBnZXRTVkdDb250ZW50UmVjdCh0YXJnZXQpIHtcbiAgICB2YXIgYmJveCA9IHRhcmdldC5nZXRCQm94KCk7XG5cbiAgICByZXR1cm4gY3JlYXRlUmVjdEluaXQoMCwgMCwgYmJveC53aWR0aCwgYmJveC5oZWlnaHQpO1xufVxuXG4vKipcclxuICogQ2FsY3VsYXRlcyBjb250ZW50IHJlY3RhbmdsZSBvZiBwcm92aWRlZCBIVE1MRWxlbWVudC5cclxuICpcclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IC0gRWxlbWVudCBmb3Igd2hpY2ggdG8gY2FsY3VsYXRlIHRoZSBjb250ZW50IHJlY3RhbmdsZS5cclxuICogQHJldHVybnMge0RPTVJlY3RJbml0fVxyXG4gKi9cbmZ1bmN0aW9uIGdldEhUTUxFbGVtZW50Q29udGVudFJlY3QodGFyZ2V0KSB7XG4gICAgLy8gQ2xpZW50IHdpZHRoICYgaGVpZ2h0IHByb3BlcnRpZXMgY2FuJ3QgYmVcbiAgICAvLyB1c2VkIGV4Y2x1c2l2ZWx5IGFzIHRoZXkgcHJvdmlkZSByb3VuZGVkIHZhbHVlcy5cbiAgICB2YXIgY2xpZW50V2lkdGggPSB0YXJnZXQuY2xpZW50V2lkdGg7XG4gICAgdmFyIGNsaWVudEhlaWdodCA9IHRhcmdldC5jbGllbnRIZWlnaHQ7XG5cbiAgICAvLyBCeSB0aGlzIGNvbmRpdGlvbiB3ZSBjYW4gY2F0Y2ggYWxsIG5vbi1yZXBsYWNlZCBpbmxpbmUsIGhpZGRlbiBhbmRcbiAgICAvLyBkZXRhY2hlZCBlbGVtZW50cy4gVGhvdWdoIGVsZW1lbnRzIHdpdGggd2lkdGggJiBoZWlnaHQgcHJvcGVydGllcyBsZXNzXG4gICAgLy8gdGhhbiAwLjUgd2lsbCBiZSBkaXNjYXJkZWQgYXMgd2VsbC5cbiAgICAvL1xuICAgIC8vIFdpdGhvdXQgaXQgd2Ugd291bGQgbmVlZCB0byBpbXBsZW1lbnQgc2VwYXJhdGUgbWV0aG9kcyBmb3IgZWFjaCBvZlxuICAgIC8vIHRob3NlIGNhc2VzIGFuZCBpdCdzIG5vdCBwb3NzaWJsZSB0byBwZXJmb3JtIGEgcHJlY2lzZSBhbmQgcGVyZm9ybWFuY2VcbiAgICAvLyBlZmZlY3RpdmUgdGVzdCBmb3IgaGlkZGVuIGVsZW1lbnRzLiBFLmcuIGV2ZW4galF1ZXJ5J3MgJzp2aXNpYmxlJyBmaWx0ZXJcbiAgICAvLyBnaXZlcyB3cm9uZyByZXN1bHRzIGZvciBlbGVtZW50cyB3aXRoIHdpZHRoICYgaGVpZ2h0IGxlc3MgdGhhbiAwLjUuXG4gICAgaWYgKCFjbGllbnRXaWR0aCAmJiAhY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiBlbXB0eVJlY3Q7XG4gICAgfVxuXG4gICAgdmFyIHN0eWxlcyA9IGdldFdpbmRvd09mKHRhcmdldCkuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpO1xuICAgIHZhciBwYWRkaW5ncyA9IGdldFBhZGRpbmdzKHN0eWxlcyk7XG4gICAgdmFyIGhvcml6UGFkID0gcGFkZGluZ3MubGVmdCArIHBhZGRpbmdzLnJpZ2h0O1xuICAgIHZhciB2ZXJ0UGFkID0gcGFkZGluZ3MudG9wICsgcGFkZGluZ3MuYm90dG9tO1xuXG4gICAgLy8gQ29tcHV0ZWQgc3R5bGVzIG9mIHdpZHRoICYgaGVpZ2h0IGFyZSBiZWluZyB1c2VkIGJlY2F1c2UgdGhleSBhcmUgdGhlXG4gICAgLy8gb25seSBkaW1lbnNpb25zIGF2YWlsYWJsZSB0byBKUyB0aGF0IGNvbnRhaW4gbm9uLXJvdW5kZWQgdmFsdWVzLiBJdCBjb3VsZFxuICAgIC8vIGJlIHBvc3NpYmxlIHRvIHV0aWxpemUgdGhlIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpZiBvbmx5IGl0J3MgZGF0YSB3YXNuJ3RcbiAgICAvLyBhZmZlY3RlZCBieSBDU1MgdHJhbnNmb3JtYXRpb25zIGxldCBhbG9uZSBwYWRkaW5ncywgYm9yZGVycyBhbmQgc2Nyb2xsIGJhcnMuXG4gICAgdmFyIHdpZHRoID0gdG9GbG9hdChzdHlsZXMud2lkdGgpLFxuICAgICAgICBoZWlnaHQgPSB0b0Zsb2F0KHN0eWxlcy5oZWlnaHQpO1xuXG4gICAgLy8gV2lkdGggJiBoZWlnaHQgaW5jbHVkZSBwYWRkaW5ncyBhbmQgYm9yZGVycyB3aGVuIHRoZSAnYm9yZGVyLWJveCcgYm94XG4gICAgLy8gbW9kZWwgaXMgYXBwbGllZCAoZXhjZXB0IGZvciBJRSkuXG4gICAgaWYgKHN0eWxlcy5ib3hTaXppbmcgPT09ICdib3JkZXItYm94Jykge1xuICAgICAgICAvLyBGb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgcmVxdWlyZWQgdG8gaGFuZGxlIEludGVybmV0IEV4cGxvcmVyIHdoaWNoXG4gICAgICAgIC8vIGRvZXNuJ3QgaW5jbHVkZSBwYWRkaW5ncyBhbmQgYm9yZGVycyB0byBjb21wdXRlZCBDU1MgZGltZW5zaW9ucy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gV2UgY2FuIHNheSB0aGF0IGlmIENTUyBkaW1lbnNpb25zICsgcGFkZGluZ3MgYXJlIGVxdWFsIHRvIHRoZSBcImNsaWVudFwiXG4gICAgICAgIC8vIHByb3BlcnRpZXMgdGhlbiBpdCdzIGVpdGhlciBJRSwgYW5kIHRodXMgd2UgZG9uJ3QgbmVlZCB0byBzdWJ0cmFjdFxuICAgICAgICAvLyBhbnl0aGluZywgb3IgYW4gZWxlbWVudCBtZXJlbHkgZG9lc24ndCBoYXZlIHBhZGRpbmdzL2JvcmRlcnMgc3R5bGVzLlxuICAgICAgICBpZiAoTWF0aC5yb3VuZCh3aWR0aCArIGhvcml6UGFkKSAhPT0gY2xpZW50V2lkdGgpIHtcbiAgICAgICAgICAgIHdpZHRoIC09IGdldEJvcmRlcnNTaXplKHN0eWxlcywgJ2xlZnQnLCAncmlnaHQnKSArIGhvcml6UGFkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKE1hdGgucm91bmQoaGVpZ2h0ICsgdmVydFBhZCkgIT09IGNsaWVudEhlaWdodCkge1xuICAgICAgICAgICAgaGVpZ2h0IC09IGdldEJvcmRlcnNTaXplKHN0eWxlcywgJ3RvcCcsICdib3R0b20nKSArIHZlcnRQYWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGb2xsb3dpbmcgc3RlcHMgY2FuJ3QgYmUgYXBwbGllZCB0byB0aGUgZG9jdW1lbnQncyByb290IGVsZW1lbnQgYXMgaXRzXG4gICAgLy8gY2xpZW50W1dpZHRoL0hlaWdodF0gcHJvcGVydGllcyByZXByZXNlbnQgdmlld3BvcnQgYXJlYSBvZiB0aGUgd2luZG93LlxuICAgIC8vIEJlc2lkZXMsIGl0J3MgYXMgd2VsbCBub3QgbmVjZXNzYXJ5IGFzIHRoZSA8aHRtbD4gaXRzZWxmIG5laXRoZXIgaGFzXG4gICAgLy8gcmVuZGVyZWQgc2Nyb2xsIGJhcnMgbm9yIGl0IGNhbiBiZSBjbGlwcGVkLlxuICAgIGlmICghaXNEb2N1bWVudEVsZW1lbnQodGFyZ2V0KSkge1xuICAgICAgICAvLyBJbiBzb21lIGJyb3dzZXJzIChvbmx5IGluIEZpcmVmb3gsIGFjdHVhbGx5KSBDU1Mgd2lkdGggJiBoZWlnaHRcbiAgICAgICAgLy8gaW5jbHVkZSBzY3JvbGwgYmFycyBzaXplIHdoaWNoIGNhbiBiZSByZW1vdmVkIGF0IHRoaXMgc3RlcCBhcyBzY3JvbGxcbiAgICAgICAgLy8gYmFycyBhcmUgdGhlIG9ubHkgZGlmZmVyZW5jZSBiZXR3ZWVuIHJvdW5kZWQgZGltZW5zaW9ucyArIHBhZGRpbmdzXG4gICAgICAgIC8vIGFuZCBcImNsaWVudFwiIHByb3BlcnRpZXMsIHRob3VnaCB0aGF0IGlzIG5vdCBhbHdheXMgdHJ1ZSBpbiBDaHJvbWUuXG4gICAgICAgIHZhciB2ZXJ0U2Nyb2xsYmFyID0gTWF0aC5yb3VuZCh3aWR0aCArIGhvcml6UGFkKSAtIGNsaWVudFdpZHRoO1xuICAgICAgICB2YXIgaG9yaXpTY3JvbGxiYXIgPSBNYXRoLnJvdW5kKGhlaWdodCArIHZlcnRQYWQpIC0gY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgIC8vIENocm9tZSBoYXMgYSByYXRoZXIgd2VpcmQgcm91bmRpbmcgb2YgXCJjbGllbnRcIiBwcm9wZXJ0aWVzLlxuICAgICAgICAvLyBFLmcuIGZvciBhbiBlbGVtZW50IHdpdGggY29udGVudCB3aWR0aCBvZiAzMTQuMnB4IGl0IHNvbWV0aW1lcyBnaXZlc1xuICAgICAgICAvLyB0aGUgY2xpZW50IHdpZHRoIG9mIDMxNXB4IGFuZCBmb3IgdGhlIHdpZHRoIG9mIDMxNC43cHggaXQgbWF5IGdpdmVcbiAgICAgICAgLy8gMzE0cHguIEFuZCBpdCBkb2Vzbid0IGhhcHBlbiBhbGwgdGhlIHRpbWUuIFNvIGp1c3QgaWdub3JlIHRoaXMgZGVsdGFcbiAgICAgICAgLy8gYXMgYSBub24tcmVsZXZhbnQuXG4gICAgICAgIGlmIChNYXRoLmFicyh2ZXJ0U2Nyb2xsYmFyKSAhPT0gMSkge1xuICAgICAgICAgICAgd2lkdGggLT0gdmVydFNjcm9sbGJhcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChNYXRoLmFicyhob3JpelNjcm9sbGJhcikgIT09IDEpIHtcbiAgICAgICAgICAgIGhlaWdodCAtPSBob3JpelNjcm9sbGJhcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVSZWN0SW5pdChwYWRkaW5ncy5sZWZ0LCBwYWRkaW5ncy50b3AsIHdpZHRoLCBoZWlnaHQpO1xufVxuXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgcHJvdmlkZWQgZWxlbWVudCBpcyBhbiBpbnN0YW5jZSBvZiB0aGUgU1ZHR3JhcGhpY3NFbGVtZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgdG8gYmUgY2hlY2tlZC5cclxuICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAqL1xudmFyIGlzU1ZHR3JhcGhpY3NFbGVtZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBTb21lIGJyb3dzZXJzLCBuYW1lbHkgSUUgYW5kIEVkZ2UsIGRvbid0IGhhdmUgdGhlIFNWR0dyYXBoaWNzRWxlbWVudFxuICAgIC8vIGludGVyZmFjZS5cbiAgICBpZiAodHlwZW9mIFNWR0dyYXBoaWNzRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQpIHsgcmV0dXJuIHRhcmdldCBpbnN0YW5jZW9mIGdldFdpbmRvd09mKHRhcmdldCkuU1ZHR3JhcGhpY3NFbGVtZW50OyB9O1xuICAgIH1cblxuICAgIC8vIElmIGl0J3Mgc28sIHRoZW4gY2hlY2sgdGhhdCBlbGVtZW50IGlzIGF0IGxlYXN0IGFuIGluc3RhbmNlIG9mIHRoZVxuICAgIC8vIFNWR0VsZW1lbnQgYW5kIHRoYXQgaXQgaGFzIHRoZSBcImdldEJCb3hcIiBtZXRob2QuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWV4dHJhLXBhcmVuc1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7IHJldHVybiB0YXJnZXQgaW5zdGFuY2VvZiBnZXRXaW5kb3dPZih0YXJnZXQpLlNWR0VsZW1lbnQgJiYgdHlwZW9mIHRhcmdldC5nZXRCQm94ID09PSAnZnVuY3Rpb24nOyB9O1xufSkoKTtcblxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIHByb3ZpZGVkIGVsZW1lbnQgaXMgYSBkb2N1bWVudCBlbGVtZW50ICg8aHRtbD4pLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgdG8gYmUgY2hlY2tlZC5cclxuICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAqL1xuZnVuY3Rpb24gaXNEb2N1bWVudEVsZW1lbnQodGFyZ2V0KSB7XG4gICAgcmV0dXJuIHRhcmdldCA9PT0gZ2V0V2luZG93T2YodGFyZ2V0KS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG59XG5cbi8qKlxyXG4gKiBDYWxjdWxhdGVzIGFuIGFwcHJvcHJpYXRlIGNvbnRlbnQgcmVjdGFuZ2xlIGZvciBwcm92aWRlZCBodG1sIG9yIHN2ZyBlbGVtZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgY29udGVudCByZWN0YW5nbGUgb2Ygd2hpY2ggbmVlZHMgdG8gYmUgY2FsY3VsYXRlZC5cclxuICogQHJldHVybnMge0RPTVJlY3RJbml0fVxyXG4gKi9cbmZ1bmN0aW9uIGdldENvbnRlbnRSZWN0KHRhcmdldCkge1xuICAgIGlmICghaXNCcm93c2VyKSB7XG4gICAgICAgIHJldHVybiBlbXB0eVJlY3Q7XG4gICAgfVxuXG4gICAgaWYgKGlzU1ZHR3JhcGhpY3NFbGVtZW50KHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIGdldFNWR0NvbnRlbnRSZWN0KHRhcmdldCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldEhUTUxFbGVtZW50Q29udGVudFJlY3QodGFyZ2V0KTtcbn1cblxuLyoqXHJcbiAqIENyZWF0ZXMgcmVjdGFuZ2xlIHdpdGggYW4gaW50ZXJmYWNlIG9mIHRoZSBET01SZWN0UmVhZE9ubHkuXHJcbiAqIFNwZWM6IGh0dHBzOi8vZHJhZnRzLmZ4dGYub3JnL2dlb21ldHJ5LyNkb21yZWN0cmVhZG9ubHlcclxuICpcclxuICogQHBhcmFtIHtET01SZWN0SW5pdH0gcmVjdEluaXQgLSBPYmplY3Qgd2l0aCByZWN0YW5nbGUncyB4L3kgY29vcmRpbmF0ZXMgYW5kIGRpbWVuc2lvbnMuXHJcbiAqIEByZXR1cm5zIHtET01SZWN0UmVhZE9ubHl9XHJcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUmVhZE9ubHlSZWN0KHJlZikge1xuICAgIHZhciB4ID0gcmVmLng7XG4gICAgdmFyIHkgPSByZWYueTtcbiAgICB2YXIgd2lkdGggPSByZWYud2lkdGg7XG4gICAgdmFyIGhlaWdodCA9IHJlZi5oZWlnaHQ7XG5cbiAgICAvLyBJZiBET01SZWN0UmVhZE9ubHkgaXMgYXZhaWxhYmxlIHVzZSBpdCBhcyBhIHByb3RvdHlwZSBmb3IgdGhlIHJlY3RhbmdsZS5cbiAgICB2YXIgQ29uc3RyID0gdHlwZW9mIERPTVJlY3RSZWFkT25seSAhPT0gJ3VuZGVmaW5lZCcgPyBET01SZWN0UmVhZE9ubHkgOiBPYmplY3Q7XG4gICAgdmFyIHJlY3QgPSBPYmplY3QuY3JlYXRlKENvbnN0ci5wcm90b3R5cGUpO1xuXG4gICAgLy8gUmVjdGFuZ2xlJ3MgcHJvcGVydGllcyBhcmUgbm90IHdyaXRhYmxlIGFuZCBub24tZW51bWVyYWJsZS5cbiAgICBkZWZpbmVDb25maWd1cmFibGUocmVjdCwge1xuICAgICAgICB4OiB4LCB5OiB5LCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICB0b3A6IHksXG4gICAgICAgIHJpZ2h0OiB4ICsgd2lkdGgsXG4gICAgICAgIGJvdHRvbTogaGVpZ2h0ICsgeSxcbiAgICAgICAgbGVmdDogeFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlY3Q7XG59XG5cbi8qKlxyXG4gKiBDcmVhdGVzIERPTVJlY3RJbml0IG9iamVjdCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZGltZW5zaW9ucyBhbmQgdGhlIHgveSBjb29yZGluYXRlcy5cclxuICogU3BlYzogaHR0cHM6Ly9kcmFmdHMuZnh0Zi5vcmcvZ2VvbWV0cnkvI2RpY3RkZWYtZG9tcmVjdGluaXRcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHggLSBYIGNvb3JkaW5hdGUuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gWSBjb29yZGluYXRlLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gd2lkdGggLSBSZWN0YW5nbGUncyB3aWR0aC5cclxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIFJlY3RhbmdsZSdzIGhlaWdodC5cclxuICogQHJldHVybnMge0RPTVJlY3RJbml0fVxyXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVJlY3RJbml0KHgsIHksIHdpZHRoLCBoZWlnaHQpIHtcbiAgICByZXR1cm4geyB4OiB4LCB5OiB5LCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH07XG59XG5cbi8qKlxyXG4gKiBDbGFzcyB0aGF0IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRhdGlvbnMgb2YgdGhlIGNvbnRlbnQgcmVjdGFuZ2xlIG9mXHJcbiAqIHByb3ZpZGVkIERPTSBlbGVtZW50IGFuZCBmb3Iga2VlcGluZyB0cmFjayBvZiBpdCdzIGNoYW5nZXMuXHJcbiAqL1xudmFyIFJlc2l6ZU9ic2VydmF0aW9uID0gZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgdGhpcy5icm9hZGNhc3RXaWR0aCA9IDA7XG4gICAgdGhpcy5icm9hZGNhc3RIZWlnaHQgPSAwO1xuICAgIHRoaXMuY29udGVudFJlY3RfID0gY3JlYXRlUmVjdEluaXQoMCwgMCwgMCwgMCk7XG5cbiAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbn07XG5cbi8qKlxyXG4gKiBVcGRhdGVzIGNvbnRlbnQgcmVjdGFuZ2xlIGFuZCB0ZWxscyB3aGV0aGVyIGl0J3Mgd2lkdGggb3IgaGVpZ2h0IHByb3BlcnRpZXNcclxuICogaGF2ZSBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IGJyb2FkY2FzdC5cclxuICpcclxuICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAqL1xuXG5cbi8qKlxyXG4gKiBSZWZlcmVuY2UgdG8gdGhlIGxhc3Qgb2JzZXJ2ZWQgY29udGVudCByZWN0YW5nbGUuXHJcbiAqXHJcbiAqIEBwcml2YXRlIHtET01SZWN0SW5pdH1cclxuICovXG5cblxuLyoqXHJcbiAqIEJyb2FkY2FzdGVkIHdpZHRoIG9mIGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG4gKlxyXG4gKiBAdHlwZSB7bnVtYmVyfVxyXG4gKi9cblJlc2l6ZU9ic2VydmF0aW9uLnByb3RvdHlwZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVjdCA9IGdldENvbnRlbnRSZWN0KHRoaXMudGFyZ2V0KTtcblxuICAgIHRoaXMuY29udGVudFJlY3RfID0gcmVjdDtcblxuICAgIHJldHVybiByZWN0LndpZHRoICE9PSB0aGlzLmJyb2FkY2FzdFdpZHRoIHx8IHJlY3QuaGVpZ2h0ICE9PSB0aGlzLmJyb2FkY2FzdEhlaWdodDtcbn07XG5cbi8qKlxyXG4gKiBVcGRhdGVzICdicm9hZGNhc3RXaWR0aCcgYW5kICdicm9hZGNhc3RIZWlnaHQnIHByb3BlcnRpZXMgd2l0aCBhIGRhdGFcclxuICogZnJvbSB0aGUgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzIG9mIHRoZSBsYXN0IG9ic2VydmVkIGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7RE9NUmVjdEluaXR9IExhc3Qgb2JzZXJ2ZWQgY29udGVudCByZWN0YW5nbGUuXHJcbiAqL1xuUmVzaXplT2JzZXJ2YXRpb24ucHJvdG90eXBlLmJyb2FkY2FzdFJlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlY3QgPSB0aGlzLmNvbnRlbnRSZWN0XztcblxuICAgIHRoaXMuYnJvYWRjYXN0V2lkdGggPSByZWN0LndpZHRoO1xuICAgIHRoaXMuYnJvYWRjYXN0SGVpZ2h0ID0gcmVjdC5oZWlnaHQ7XG5cbiAgICByZXR1cm4gcmVjdDtcbn07XG5cbnZhciBSZXNpemVPYnNlcnZlckVudHJ5ID0gZnVuY3Rpb24odGFyZ2V0LCByZWN0SW5pdCkge1xuICAgIHZhciBjb250ZW50UmVjdCA9IGNyZWF0ZVJlYWRPbmx5UmVjdChyZWN0SW5pdCk7XG5cbiAgICAvLyBBY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb24gZm9sbG93aW5nIHByb3BlcnRpZXMgYXJlIG5vdCB3cml0YWJsZVxuICAgIC8vIGFuZCBhcmUgYWxzbyBub3QgZW51bWVyYWJsZSBpbiB0aGUgbmF0aXZlIGltcGxlbWVudGF0aW9uLlxuICAgIC8vXG4gICAgLy8gUHJvcGVydHkgYWNjZXNzb3JzIGFyZSBub3QgYmVpbmcgdXNlZCBhcyB0aGV5J2QgcmVxdWlyZSB0byBkZWZpbmUgYVxuICAgIC8vIHByaXZhdGUgV2Vha01hcCBzdG9yYWdlIHdoaWNoIG1heSBjYXVzZSBtZW1vcnkgbGVha3MgaW4gYnJvd3NlcnMgdGhhdFxuICAgIC8vIGRvbid0IHN1cHBvcnQgdGhpcyB0eXBlIG9mIGNvbGxlY3Rpb25zLlxuICAgIGRlZmluZUNvbmZpZ3VyYWJsZSh0aGlzLCB7IHRhcmdldDogdGFyZ2V0LCBjb250ZW50UmVjdDogY29udGVudFJlY3QgfSk7XG59O1xuXG52YXIgUmVzaXplT2JzZXJ2ZXJTUEkgPSBmdW5jdGlvbihjYWxsYmFjaywgY29udHJvbGxlciwgY2FsbGJhY2tDdHgpIHtcbiAgICB0aGlzLmFjdGl2ZU9ic2VydmF0aW9uc18gPSBbXTtcbiAgICB0aGlzLm9ic2VydmF0aW9uc18gPSBuZXcgTWFwU2hpbSgpO1xuXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgY2FsbGJhY2sgcHJvdmlkZWQgYXMgcGFyYW1ldGVyIDEgaXMgbm90IGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgdGhpcy5jYWxsYmFja18gPSBjYWxsYmFjaztcbiAgICB0aGlzLmNvbnRyb2xsZXJfID0gY29udHJvbGxlcjtcbiAgICB0aGlzLmNhbGxiYWNrQ3R4XyA9IGNhbGxiYWNrQ3R4O1xufTtcblxuLyoqXHJcbiAqIFN0YXJ0cyBvYnNlcnZpbmcgcHJvdmlkZWQgZWxlbWVudC5cclxuICpcclxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXQgLSBFbGVtZW50IHRvIGJlIG9ic2VydmVkLlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXG5cblxuLyoqXHJcbiAqIFJlZ2lzdHJ5IG9mIHRoZSBSZXNpemVPYnNlcnZhdGlvbiBpbnN0YW5jZXMuXHJcbiAqXHJcbiAqIEBwcml2YXRlIHtNYXA8RWxlbWVudCwgUmVzaXplT2JzZXJ2YXRpb24+fVxyXG4gKi9cblxuXG4vKipcclxuICogUHVibGljIFJlc2l6ZU9ic2VydmVyIGluc3RhbmNlIHdoaWNoIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBjYWxsYmFja1xyXG4gKiBmdW5jdGlvbiBhbmQgdXNlZCBhcyBhIHZhbHVlIG9mIGl0J3MgXCJ0aGlzXCIgYmluZGluZy5cclxuICpcclxuICogQHByaXZhdGUge1Jlc2l6ZU9ic2VydmVyfVxyXG4gKi9cblxuLyoqXHJcbiAqIENvbGxlY3Rpb24gb2YgcmVzaXplIG9ic2VydmF0aW9ucyB0aGF0IGhhdmUgZGV0ZWN0ZWQgY2hhbmdlcyBpbiBkaW1lbnNpb25zXHJcbiAqIG9mIGVsZW1lbnRzLlxyXG4gKlxyXG4gKiBAcHJpdmF0ZSB7QXJyYXk8UmVzaXplT2JzZXJ2YXRpb24+fVxyXG4gKi9cblJlc2l6ZU9ic2VydmVyU1BJLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAwIHByZXNlbnQuJyk7XG4gICAgfVxuXG4gICAgLy8gRG8gbm90aGluZyBpZiBjdXJyZW50IGVudmlyb25tZW50IGRvZXNuJ3QgaGF2ZSB0aGUgRWxlbWVudCBpbnRlcmZhY2UuXG4gICAgaWYgKHR5cGVvZiBFbGVtZW50ID09PSAndW5kZWZpbmVkJyB8fCAhKEVsZW1lbnQgaW5zdGFuY2VvZiBPYmplY3QpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBnZXRXaW5kb3dPZih0YXJnZXQpLkVsZW1lbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3BhcmFtZXRlciAxIGlzIG5vdCBvZiB0eXBlIFwiRWxlbWVudFwiLicpO1xuICAgIH1cblxuICAgIHZhciBvYnNlcnZhdGlvbnMgPSB0aGlzLm9ic2VydmF0aW9uc187XG5cbiAgICAvLyBEbyBub3RoaW5nIGlmIGVsZW1lbnQgaXMgYWxyZWFkeSBiZWluZyBvYnNlcnZlZC5cbiAgICBpZiAob2JzZXJ2YXRpb25zLmhhcyh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBvYnNlcnZhdGlvbnMuc2V0KHRhcmdldCwgbmV3IFJlc2l6ZU9ic2VydmF0aW9uKHRhcmdldCkpO1xuXG4gICAgdGhpcy5jb250cm9sbGVyXy5hZGRPYnNlcnZlcih0aGlzKTtcblxuICAgIC8vIEZvcmNlIHRoZSB1cGRhdGUgb2Ygb2JzZXJ2YXRpb25zLlxuICAgIHRoaXMuY29udHJvbGxlcl8ucmVmcmVzaCgpO1xufTtcblxuLyoqXHJcbiAqIFN0b3BzIG9ic2VydmluZyBwcm92aWRlZCBlbGVtZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgdG8gc3RvcCBvYnNlcnZpbmcuXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cblJlc2l6ZU9ic2VydmVyU1BJLnByb3RvdHlwZS51bm9ic2VydmUgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJzEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC4nKTtcbiAgICB9XG5cbiAgICAvLyBEbyBub3RoaW5nIGlmIGN1cnJlbnQgZW52aXJvbm1lbnQgZG9lc24ndCBoYXZlIHRoZSBFbGVtZW50IGludGVyZmFjZS5cbiAgICBpZiAodHlwZW9mIEVsZW1lbnQgPT09ICd1bmRlZmluZWQnIHx8ICEoRWxlbWVudCBpbnN0YW5jZW9mIE9iamVjdCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIGdldFdpbmRvd09mKHRhcmdldCkuRWxlbWVudCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgXCJFbGVtZW50XCIuJyk7XG4gICAgfVxuXG4gICAgdmFyIG9ic2VydmF0aW9ucyA9IHRoaXMub2JzZXJ2YXRpb25zXztcblxuICAgIC8vIERvIG5vdGhpbmcgaWYgZWxlbWVudCBpcyBub3QgYmVpbmcgb2JzZXJ2ZWQuXG4gICAgaWYgKCFvYnNlcnZhdGlvbnMuaGFzKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG9ic2VydmF0aW9ucy5kZWxldGUodGFyZ2V0KTtcblxuICAgIGlmICghb2JzZXJ2YXRpb25zLnNpemUpIHtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyXy5yZW1vdmVPYnNlcnZlcih0aGlzKTtcbiAgICB9XG59O1xuXG4vKipcclxuICogU3RvcHMgb2JzZXJ2aW5nIGFsbCBlbGVtZW50cy5cclxuICpcclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jbGVhckFjdGl2ZSgpO1xuICAgIHRoaXMub2JzZXJ2YXRpb25zXy5jbGVhcigpO1xuICAgIHRoaXMuY29udHJvbGxlcl8ucmVtb3ZlT2JzZXJ2ZXIodGhpcyk7XG59O1xuXG4vKipcclxuICogQ29sbGVjdHMgb2JzZXJ2YXRpb24gaW5zdGFuY2VzIHRoZSBhc3NvY2lhdGVkIGVsZW1lbnQgb2Ygd2hpY2ggaGFzIGNoYW5nZWRcclxuICogaXQncyBjb250ZW50IHJlY3RhbmdsZS5cclxuICpcclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLmdhdGhlckFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB0aGlzLmNsZWFyQWN0aXZlKCk7XG5cbiAgICB0aGlzLm9ic2VydmF0aW9uc18uZm9yRWFjaChmdW5jdGlvbiAob2JzZXJ2YXRpb24pIHtcbiAgICAgICAgaWYgKG9ic2VydmF0aW9uLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgICAgIHRoaXMkMS5hY3RpdmVPYnNlcnZhdGlvbnNfLnB1c2gob2JzZXJ2YXRpb24pO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG4vKipcclxuICogSW52b2tlcyBpbml0aWFsIGNhbGxiYWNrIGZ1bmN0aW9uIHdpdGggYSBsaXN0IG9mIFJlc2l6ZU9ic2VydmVyRW50cnlcclxuICogaW5zdGFuY2VzIGNvbGxlY3RlZCBmcm9tIGFjdGl2ZSByZXNpemUgb2JzZXJ2YXRpb25zLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXG5SZXNpemVPYnNlcnZlclNQSS5wcm90b3R5cGUuYnJvYWRjYXN0QWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIERvIG5vdGhpbmcgaWYgb2JzZXJ2ZXIgZG9lc24ndCBoYXZlIGFjdGl2ZSBvYnNlcnZhdGlvbnMuXG4gICAgaWYgKCF0aGlzLmhhc0FjdGl2ZSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgY3R4ID0gdGhpcy5jYWxsYmFja0N0eF87XG5cbiAgICAvLyBDcmVhdGUgUmVzaXplT2JzZXJ2ZXJFbnRyeSBpbnN0YW5jZSBmb3IgZXZlcnkgYWN0aXZlIG9ic2VydmF0aW9uLlxuICAgIHZhciBlbnRyaWVzID0gdGhpcy5hY3RpdmVPYnNlcnZhdGlvbnNfLm1hcChmdW5jdGlvbiAob2JzZXJ2YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNpemVPYnNlcnZlckVudHJ5KG9ic2VydmF0aW9uLnRhcmdldCwgb2JzZXJ2YXRpb24uYnJvYWRjYXN0UmVjdCgpKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY2FsbGJhY2tfLmNhbGwoY3R4LCBlbnRyaWVzLCBjdHgpO1xuICAgIHRoaXMuY2xlYXJBY3RpdmUoKTtcbn07XG5cbi8qKlxyXG4gKiBDbGVhcnMgdGhlIGNvbGxlY3Rpb24gb2YgYWN0aXZlIG9ic2VydmF0aW9ucy5cclxuICpcclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLmNsZWFyQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuYWN0aXZlT2JzZXJ2YXRpb25zXy5zcGxpY2UoMCk7XG59O1xuXG4vKipcclxuICogVGVsbHMgd2hldGhlciBvYnNlcnZlciBoYXMgYWN0aXZlIG9ic2VydmF0aW9ucy5cclxuICpcclxuICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLmhhc0FjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVPYnNlcnZhdGlvbnNfLmxlbmd0aCA+IDA7XG59O1xuXG4vLyBSZWdpc3RyeSBvZiBpbnRlcm5hbCBvYnNlcnZlcnMuIElmIFdlYWtNYXAgaXMgbm90IGF2YWlsYWJsZSB1c2UgY3VycmVudCBzaGltXG4vLyBmb3IgdGhlIE1hcCBjb2xsZWN0aW9uIGFzIGl0IGhhcyBhbGwgcmVxdWlyZWQgbWV0aG9kcyBhbmQgYmVjYXVzZSBXZWFrTWFwXG4vLyBjYW4ndCBiZSBmdWxseSBwb2x5ZmlsbGVkIGFueXdheS5cbnZhciBvYnNlcnZlcnMgPSB0eXBlb2YgV2Vha01hcCAhPT0gJ3VuZGVmaW5lZCcgPyBuZXcgV2Vha01hcCgpIDogbmV3IE1hcFNoaW0oKTtcblxuLyoqXHJcbiAqIFJlc2l6ZU9ic2VydmVyIEFQSS4gRW5jYXBzdWxhdGVzIHRoZSBSZXNpemVPYnNlcnZlciBTUEkgaW1wbGVtZW50YXRpb25cclxuICogZXhwb3Npbmcgb25seSB0aG9zZSBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIHRoYXQgYXJlIGRlZmluZWQgaW4gdGhlIHNwZWMuXHJcbiAqL1xudmFyIFJlc2l6ZU9ic2VydmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVzaXplT2JzZXJ2ZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJzEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC4nKTtcbiAgICB9XG5cbiAgICB2YXIgY29udHJvbGxlciA9IFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpO1xuICAgIHZhciBvYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlclNQSShjYWxsYmFjaywgY29udHJvbGxlciwgdGhpcyk7XG5cbiAgICBvYnNlcnZlcnMuc2V0KHRoaXMsIG9ic2VydmVyKTtcbn07XG5cbi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcyBvZiBSZXNpemVPYnNlcnZlci5cblsnb2JzZXJ2ZScsICd1bm9ic2VydmUnLCAnZGlzY29ubmVjdCddLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgIFJlc2l6ZU9ic2VydmVyLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHJlZiA9IG9ic2VydmVycy5nZXQodGhpcykpW21ldGhvZF0uYXBwbHkocmVmLCBhcmd1bWVudHMpO1xuICAgICAgICB2YXIgcmVmO1xuICAgIH07XG59KTtcblxudmFyIGluZGV4ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBFeHBvcnQgZXhpc3RpbmcgaW1wbGVtZW50YXRpb24gaWYgYXZhaWxhYmxlLlxuICAgIGlmICh0eXBlb2YgZ2xvYmFsJDEuUmVzaXplT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWwkMS5SZXNpemVPYnNlcnZlcjtcbiAgICB9XG5cbiAgICByZXR1cm4gUmVzaXplT2JzZXJ2ZXI7XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBpbmRleDtcbiIsInZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLCBldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2ggKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tIFwicmVzaXplLW9ic2VydmVyLXBvbHlmaWxsXCI7XG5cbmZ1bmN0aW9uIER5bmFtaWNUYWJzKGNvbnRhaW5lcklEKSB7XG5cblx0aWYgKCFjb250YWluZXJJRCkge1xuXHRcdGNvbnNvbGUubG9nKFwiRVJST1I6IFRvIHJlZ2lzdGVyIGR5bmFtaWMgdGFicywgcGFzcyBpbiB0aGUgSUQgb2YgYSBub2RlIGNvbnRhaW5pbmcgdGhlIHRhYnNcIik7XG5cdFx0cmV0dXJuXG5cdH1cblxuXHR0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklEKTtcblxuXHR0aGlzLnJlZ2lzdGVyZWRUYWJzID0gW107XG5cblx0dGhpcy5hY3RpdmVUYWJJbmRleCA9IDA7XG5cblx0dGhpcy5zd2l0Y2hDYWxsYmFja3MgPSBbXTtcblxuXHR0aGlzLmZyYW1lciA9IHRoaXMuY29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkeW5hbWljLXRhYnMtZnJhbWVyXCIpWzBdO1xuXG5cdHRoaXMuZnJhbWVyU2hpZnQgPSAwOyAvLyB0aGUgYW1vdW50IGluIHBpeGVscyB0aGF0IHRoZSB0YWJzIGhhdmUgYmVlbiBzY3JvbGxlZFxuXG5cdHRoaXMuZnJhbWVyV2lkdGggPSAwO1xuXG5cdHRoaXMudG90YWxUYWJzV2lkdGggPSAwO1xuXG5cdHRoaXMuaW5kaWNhdG9yQmFyID0gdGhpcy5jb250YWluZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImR0LWluZGljYXRvci1iYXJcIilbMF07XG5cblx0dGhpcy5hcnJvd0xlZnQgPSB0aGlzLmNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYXJyb3ctbGVmdFwiKVswXTtcblxuXHR0aGlzLmFycm93UmlnaHQgPSB0aGlzLmNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYXJyb3ctcmlnaHRcIilbMF07XG5cblx0dGhpcy5hcnJvd0xlZnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuc2Nyb2xsTGVmdC5iaW5kKHRoaXMsIDAuODUpKTtcblxuXHR0aGlzLmFycm93UmlnaHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuc2Nyb2xsUmlnaHQuYmluZCh0aGlzLCAwLjg1KSk7XG5cblx0Y29uc3Qgcm8gPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcblx0XHRmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcblx0XHRcdHRoaXMucmVmcmVzaExheW91dCgpO1xuXHRcdFx0Y29uc3Qge2xlZnQsIHRvcCwgd2lkdGgsIGhlaWdodH0gPSBlbnRyeS5jb250ZW50UmVjdDtcblx0XHRcdGNvbnNvbGUubG9nKCdFbGVtZW50OicsIGVudHJ5LnRhcmdldCk7XG5cdFx0XHRjb25zb2xlLmxvZyhgRWxlbWVudCdzIHNpemU6ICR7IHdpZHRoIH1weCB4ICR7IGhlaWdodCB9cHhgKTtcblx0XHRcdGNvbnNvbGUubG9nKGBFbGVtZW50J3MgcGFkZGluZ3M6ICR7IHRvcCB9cHggOyAkeyBsZWZ0IH1weGApO1xuXHRcdH1cblx0fSk7XG5cdHJvLm9ic2VydmUodGhpcy5mcmFtZXIpO1xuXHQvLyB0aGlzLmZyYW1lci5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVmcmVzaExheW91dC5iaW5kKHRoaXMpKVxuXHQvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLnJlZnJlc2hMYXlvdXQuYmluZCh0aGlzKSk7XG5cbn1cblxuLy8gcmVnaXN0ZXJUYWJzIHJlZ2lzdGVycyB0aGUgdGFicyB3aXRoIHRoZSBJRHMgaW4gdGhlIHRhYnNJRHMgYXJyYXkuIFRoZSBvcHRpb25hbCBpZFByZWZpeCBwYXJhbWV0ZXIgY2FuIGJlIHNldFxuLy8gdG8gcHJlZml4IGVhY2ggdGFyZ2V0ZWQgdGFiIGVsZW1lbnQgYnkgSUQgd2l0aCB0aGUgc3RyaW5nLlxuRHluYW1pY1RhYnMucHJvdG90eXBlLnJlZ2lzdGVyVGFicyA9IGZ1bmN0aW9uKHRhYklEcywgaWRQcmVmaXggPSBcIlwiKSB7XG5cblx0aWYgKHRhYklEcyA9PT0gdW5kZWZpbmVkIHx8IHRhYklEcy5sZW5ndGggPT09IDApIHtcblx0XHRjb25zb2xlLmxvZyhcIkVSUk9SOiBNdXN0IHBhc3MgaW4gYW4gYXJyYXkgb2YgdGFiIElEcyB0byByZWdpc3RlclwiKVxuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIGNvbnNvbGUubG9nKFwiUkVHSVNURVJJTkcgVEFCUy4gQ3VycmVudCB0YWJzOlwiLCBKU09OLnN0cmluZ2lmeSh0aGlzLnJlZ2lzdGVyZWRUYWJzKSlcblxuXHRmb3IgKGxldCBpID0gMDsgaSA8IHRhYklEcy5sZW5ndGg7IGkrKykge1xuXHRcdHRoaXMucmVnaXN0ZXJUYWIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWRQcmVmaXgrdGFiSURzW2ldKSlcblx0fVxuXG5cdC8vIGNvbnNvbGUubG9nKFwidGFicyByZWdpc3RlcmVkOyB0aGUgb2JqZWN0OlwiLCB0aGlzKVxuXHQvLyBjb25zb2xlLmxvZyhcInRhYnMgcmVnaXN0ZXJlZDsgdGhlIHRhYnM6XCIsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5yZWdpc3RlcmVkVGFicykpKTtcblxuXHRzZXRBY3RpdmVIaWdobGlnaHQuY2FsbCh0aGlzLCAwKTsgLy8gYWx3YXlzIHJlc2V0IHdoZW4gcmVnaXN0ZXJpbmcgbmV3IHRhYnM7IGF2b2lkIHJlc2V0dGluZyBpbmRpY2F0b3Igbm93XG5cdHRoaXMucmVmcmVzaExheW91dCgpO1xuXG59XG5cbi8vIHJlZ2lzdGVyQWxsVGFicyByZWdpc3RlcnMgYWxsIHRhYnMgKGVsZW1lbnRzIGluc2lkZSBvZiB0aGUgY29udGFpbmVyIHRoYXQgaGF2ZSB0aGUgY2xhc3MgXCJkeW5hbWljLXRhYlwiKSBhbmRcbi8vIHJlZnJlc2hlcyB0aGUgbGF5b3V0LlxuRHluYW1pY1RhYnMucHJvdG90eXBlLnJlZ2lzdGVyQWxsVGFicyA9IGZ1bmN0aW9uKCkge1xuXG5cdGNvbnN0IHRhYnMgPSB0aGlzLmNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZHluYW1pYy10YWJcIilcblxuXHRpZiAodGFicy5sZW5ndGggPT09IDApIHtcblx0XHRjb25zb2xlLmxvZyhcIkVSUk9SOiBUaGVyZSBhcmUgbm8gdGFicyB0byByZWdpc3RlclwiKVxuXHRcdHJldHVybjtcblx0fVxuXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgdGFicy5sZW5ndGg7IGkrKykge1xuXHRcdHRoaXMucmVnaXN0ZXJUYWIodGFic1tpXSk7XG5cdH1cblxuXHQvLyBSZXNldCB0aGUgYWN0aXZlIHRhYiBhbmQgcmVmcmVzaCB0aGUgbGF5b3V0IGJlY2F1c2Ugd2UgYXJlIHJlZ2lzdGVyaW5nIGFsbCB0YWJzLlxuXHRzZXRBY3RpdmVIaWdobGlnaHQuY2FsbCh0aGlzLCAwKTtcblx0dGhpcy5yZWZyZXNoTGF5b3V0KCk7XG5cbn1cblxuLy8gcmVnaXN0ZXJUYWIgcmVnaXN0ZXJzIHRoZSBwYXNzZWQgaW4gdGhlIEhUTUwgdGFiIGVsZW1lbnQuXG5EeW5hbWljVGFicy5wcm90b3R5cGUucmVnaXN0ZXJUYWIgPSBmdW5jdGlvbih0YWIsIHJlZnJlc2hMYXlvdXQgPSBmYWxzZSkge1xuXG5cdC8vIFJlbW92ZSB0aGUgZGlzcGxheTpub25lIHN0eWxlIHByb3BlcnR5IHRoYXQgaXMgYnkgZGVmYXVsdCBvbiB1bnJlZ2lzdGVyZWQgdGFicy5cblx0dGFiLnNldEF0dHJpYnV0ZShcImRhdGEtZHRyXCIsIFwieVwiKTtcblxuXHQvLyBUaGUgbGVuZ3RoIG9mIHRoZSByZWdpc3RlcmVkVGFicyBhcnJheSB3aWxsIGJlIHRoZSBpbmRleCBvZiB0aGUgbmV3IHRhYi5cblx0Y29uc3QgbmV3VGFiSW5kZXggPSB0aGlzLnJlZ2lzdGVyZWRUYWJzLmxlbmd0aDtcblxuXHRsZXQgcGFyZW50ID0gdGhpcztcblxuXHQvLyBBZGQgY2xpY2sgbGlzdGVuZXIgdG8gc2V0IGFjdGl2ZSB0YWIgYW5kIGZpcmUgb2ZmIGNhbGxiYWNrcyB1cG9uIHN3aXRjaGluZyB0YWJzLlxuXHR0YWIuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbihlKSB7XG5cdFx0aWYgKGUudHlwZSA9PT0gXCJjbGlja1wiKSB7XG5cdFx0XHRwYXJlbnQuc2V0QWN0aXZlVGFiSW5kZXgobmV3VGFiSW5kZXgpO1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwYXJlbnQuc3dpdGNoQ2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHBhcmVudC5zd2l0Y2hDYWxsYmFja3NbaV0ocGFyZW50LmFjdGl2ZVRhYkluZGV4LCBuZXdUYWJJbmRleCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHRhYi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGFiKTtcblxuXHQvLyBBZGQgdGhlIGluaXRpYWxpemVkIHRhYi5cblx0dGhpcy5yZWdpc3RlcmVkVGFicy5wdXNoKHtcblx0XHRlbDogdGFiLFxuXHRcdHJlY3Q6IHtcblx0XHRcdGxlZnQ6IDAsXG5cdFx0XHR3aWR0aDogMFxuXHRcdH1cblx0fSk7XG5cblx0Ly8gV2hlbiByZWdpc3RlcmluZyBhIHNpbmdsZSB0YWIgcHJvZ3JhbW1hdGljYWxseSwgcmVmcmVzaExheW91dCBzaG91bGQgYmUgc2V0IHRvIHRydWUuXG5cdC8vIE90aGVyd2lzZSwgd2hlbiB1c2luZyBtZXRob2QgcmVnaXN0ZXJUYWJzIG9yIHJlZ2lzdGVyQWxsVGFicywgcmVmcmVzaExheW91dCBpcyBjYWxsZWQgYWZ0ZXJcblx0Ly8gYWxsIG9mIHRoZSBkZXNpcmVkIHRhYnMgYXJlIHJlZ2lzdGVyZWQuXG5cdGlmIChyZWZyZXNoTGF5b3V0KSB7XG5cdFx0dGhpcy5yZWZyZXNoTGF5b3V0KCk7XG5cdH1cblxufVxuXG4vLyBkZXJlZ2lzdGVyQWxsVGFicyBkZS1yZWdpc3RlcnMgYWxsIHRhYnMuIExvb2sgYXQgZnVuY3Rpb24gZGVyZWdpc3RlclRhYiB0byB1bmRlcnN0YW5kIHdoYXQgaXQgbWVhbnNcbi8vIHRvIGRlLXJlZ2lzdGVyIGEgdGFiLlxuRHluYW1pY1RhYnMucHJvdG90eXBlLmRlcmVnaXN0ZXJBbGxUYWJzID0gZnVuY3Rpb24oKSB7XG5cdGZvciAobGV0IGkgPSB0aGlzLnJlZ2lzdGVyZWRUYWJzLmxlbmd0aDsgaSA+IDA7IGktLSkge1xuXHRcdHRoaXMuZGVyZWdpc3RlclRhYigwKTtcblx0fVxuXHR0aGlzLnN3aXRjaENhbGxiYWNrcyA9IFtdO1xuXHR0aGlzLnJlZnJlc2hMYXlvdXQoKTtcbn1cblxuLy8gZGVyZWdpc3RlclRhYiBkZS1yZWdpc3RlcnMgdGhlIHRhYiB3aXRoIHRoZSBnaXZlbiBpbmRleDogdGhlIGVsZW1lbnQncyBjbGljayBldmVudCBsaXN0ZW5lciAoYW5kIHRoZSBhZGRlZCBjYWxsYmFja3MpXG4vLyBpcyByZW1vdmVkLCB0aGUgZWxlbWVudCBpcyBoaWRkZW4gZnJvbSB2aWV3LCBhbmQgaXQgaXMgcmVtb3ZlZCBmcm9tIHRoZSByZWdpc3RlcmVkVGFicyBhcnJheSxcbkR5bmFtaWNUYWJzLnByb3RvdHlwZS5kZXJlZ2lzdGVyVGFiID0gZnVuY3Rpb24odGFiSW5kZXgsIHJlZnJlc2hMYXlvdXQgPSBmYWxzZSkge1xuXG5cdC8vIFJlbW92ZSB0aGUgZXZlbnQgbGlzdGVuZXIuXG5cdC8vIHRoaXMucmVnaXN0ZXJlZFRhYnNbdGFiSW5kZXhdLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnJlZ2lzdGVyZWRUYWJzW3RhYkluZGV4XS5vYylcblx0dGhpcy5yZWdpc3RlcmVkVGFic1t0YWJJbmRleF0uZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMucmVnaXN0ZXJlZFRhYnNbdGFiSW5kZXhdLmVsKTtcblxuXHQvLyBSZW1vdmUgdGhlIFwiZGF0YS1kdHJcIiBhdHRyaWJ1dGUgdG8gaGlkZSB0aGUgdGFiIGZyb20gdmlldy5cblx0dGhpcy5yZWdpc3RlcmVkVGFic1t0YWJJbmRleF0uZWwucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1kdHJcIik7XG5cblx0Ly8gUmVtb3ZlIHRoZSBhY3RpdmUgYXR0cmlidXRlIChpbiBjYXNlIGl0IGlzIGFjdGl2ZSkuXG5cdHRoaXMucmVnaXN0ZXJlZFRhYnNbdGFiSW5kZXhdLmVsLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtZHRhY3RpdmVcIik7XG5cblx0Y29uc3QgbWwgPSB0aGlzLnJlZ2lzdGVyZWRUYWJzW3RhYkluZGV4XS5lbC5zdHlsZVtcIm1hcmdpbi1sZWZ0XCJdO1xuXHRpZiAobWwgIT09IFwiMHB4XCIgJiYgbWwgIT09IFwiXCIpIHtcblx0XHR0aGlzLnJlZ2lzdGVyZWRUYWJzW3RhYkluZGV4XS5lbC5zdHlsZVtcIm1hcmdpbi1sZWZ0XCJdID0gXCIwcHhcIjtcblx0fVxuXG5cdC8vIFNwbGljZSB0aGUgZWxlbWVudCBvdXQgb2YgdGhlIGFycmF5LlxuXHR0aGlzLnJlZ2lzdGVyZWRUYWJzLnNwbGljZSh0YWJJbmRleCwgMSk7XG5cblx0aWYgKHRoaXMucmVnaXN0ZXJlZFRhYnMubGVuZ3RoID09PSAwKSB7XG5cdFx0dGhpcy5pbmRpY2F0b3JCYXIuc3R5bGUud2lkdGggPSBcIjBcIjtcblx0fVxuXG5cdC8vIFdoZW4gZGUtcmVnaXN0ZXJpbmcgYSBzaW5nbGUgdGFiIHByb2dyYW1tYXRpY2FsbHksIHJlZnJlc2hMYXlvdXQgc2hvdWxkIGJlIHNldCB0byB0cnVlLlxuXHQvLyBPdGhlcndpc2UsIHdoZW4gdXNpbmcgbWV0aG9kIGRlcmVnaXN0ZXJUYWJzIG9yIGRlcmVnaXN0ZXJBbGxUYWJzLCByZWZyZXNoTGF5b3V0IGlzIGNhbGxlZCBhZnRlclxuXHQvLyBhbGwgb2YgdGhlIGFwcHJvcHJpYXRlIHRhYnMgYXJlIGRlLXJlZ2lzdGVyZWQuXG5cdGlmIChyZWZyZXNoTGF5b3V0KSB7XG5cdFx0dGhpcy5yZWZyZXNoTGF5b3V0KCk7XG5cdH1cblxufVxuXG4vLyBzZXRBY3RpdmVUYWJJbmRleCBzZXRzIHRoZSBhY3RpdmUgdGFiIGJ5IGl0cyBpbmRleCBpbiB0aGUgYXJyYXkgb2YgcmVnaXN0ZXJlZCB0YWJzIGFuZCB0aGVuIHNjcm9sbHMgdG8gaXQgaWYgbmVjZXNzYXJ5LlxuRHluYW1pY1RhYnMucHJvdG90eXBlLnNldEFjdGl2ZVRhYkluZGV4ID0gZnVuY3Rpb24obmV3SW5kZXgpIHtcblxuXHQvLyBjb25zb2xlLmxvZyhcInRoaXMucmVnaXN0ZXJlZFRhYnMubGVuZ3RoIGJlZm9yZSBzZXRBY3RpdmVUYWJJbmRleFwiLCB0aGlzLnJlZ2lzdGVyZWRUYWJzLmxlbmd0aClcblx0Ly8gY29uc29sZS5sb2coXCJ0aGlzLmFjdGl2ZVRhYkluZGV4IGJlZm9yZSBzZXRBY3RpdmVUYWJJbmRleFwiLCB0aGlzLmFjdGl2ZVRhYkluZGV4KVxuXG5cdC8vIFJlc2V0IGlmIHRoZXJlIGFyZSBubyByZWdpc3RlcmVkIHRhYnMuXG5cdGlmICh0aGlzLnJlZ2lzdGVyZWRUYWJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdHRoaXMuYWN0aXZlVGFiSW5kZXggPSAwO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIElmIHNvbWV0aGluZyB3ZWlyZCBpcyBoYXBwZW5pbmcsIHdlIGRvbid0IHdhbnQgYW4gaW52YWxpZCBpbmRleCBvZiBhbiBhcnJheSBhY2Nlc3NlZC5cblx0aWYgKG5ld0luZGV4ID49IHRoaXMucmVnaXN0ZXJlZFRhYnMubGVuZ3RoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJFUlJPUjogSW52YWxpZCB0YWIgaW5kZXggZmFpbGVkIHRvIHNldFwiKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHR0aGlzLmFjdGl2ZVRhYkluZGV4ID0gbmV3SW5kZXg7XG5cdHNldEFjdGl2ZUhpZ2hsaWdodC5jYWxsKHRoaXMsIG5ld0luZGV4KTtcblx0dGhpcy5zY3JvbGxUb0FjdGl2ZVRhYigpOyAvLyBSZS1wb3NpdGlvbiB0aGUgaW5kaWNhdG9yXG5cblx0Ly8gY29uc29sZS5sb2coXCJ0aGlzLnJlZ2lzdGVyZWRUYWJzLmxlbmd0aCBhZnRlciBzZXRBY3RpdmVUYWJJbmRleFwiLCB0aGlzLnJlZ2lzdGVyZWRUYWJzLmxlbmd0aClcblx0Ly8gY29uc29sZS5sb2coXCJ0aGlzLmFjdGl2ZVRhYkluZGV4IGFmdGVyIHNldEFjdGl2ZVRhYkluZGV4XCIsIHRoaXMuYWN0aXZlVGFiSW5kZXgpXG5cbn1cblxuRHluYW1pY1RhYnMucHJvdG90eXBlLmFkZFN3aXRjaENhbGxiYWNrID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcblx0dGhpcy5zd2l0Y2hDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG59XG5cbkR5bmFtaWNUYWJzLnByb3RvdHlwZS5yZWZyZXNoTGF5b3V0ID0gZnVuY3Rpb24oKSB7XG5cblx0aWYgKHRoaXMucmVnaXN0ZXJlZFRhYnMubGVuZ3RoID09PSAwKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gY29uc29sZS5sb2coXCJSRUZSRVNISU5HIGxheW91dDsgdGhpcy5hY3RpdmVUYWJJbmRleDpcIiwgdGhpcy5hY3RpdmVUYWJJbmRleClcblxuXHR0aGlzLmZyYW1lcldpZHRoID0gdGhpcy5mcmFtZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG5cblx0dGhpcy50b3RhbFRhYnNXaWR0aCA9IDA7XG5cdGxldCB3aWR0aHMgPSB0aGlzLnJlZ2lzdGVyZWRUYWJzLm1hcCh0YWIgPT4ge1xuXHRcdGNvbnN0IHcgPSB0YWIuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG5cdFx0dGhpcy50b3RhbFRhYnNXaWR0aCArPSB3XG5cdFx0cmV0dXJuIHdcblx0fSlcblx0Ly8gY29uc29sZS5sb2coXCJBbGwgd2lkdGhzXCIsIHdpZHRocylcblxuXHQvLyBjb25zb2xlLmxvZyhcIlRPVEFMIFRBQlMgV0lEVEg6XCIsIHRoaXMudG90YWxUYWJzV2lkdGgpXG5cblx0aWYgKHRoaXMudG90YWxUYWJzV2lkdGggPiB0aGlzLmZyYW1lcldpZHRoKSB7XG5cdFx0dGhpcy5mcmFtZXIuc3R5bGVbXCJ0ZXh0LWFsaWduXCJdID0gXCJsZWZ0XCI7XG5cdFx0Ly8gY29uc29sZS5sb2coXCJmcmFtZXIgc2hpZnRcIiwgdGhpcy5mcmFtZXJTaGlmdClcblx0XHRyZXNldFJlY3RzLmNhbGwodGhpcywgMCwgd2lkdGhzKTtcblx0XHR0aGlzLnNjcm9sbFRvQWN0aXZlVGFiKCk7IC8vIGluZGljYXRvciB3aWxsIGJlIHJlc2V0XG5cdH0gZWxzZSB7XG5cdFx0dGhpcy5mcmFtZXIuc3R5bGVbXCJ0ZXh0LWFsaWduXCJdID0gXCJjZW50ZXJcIjtcblx0XHR0aGlzLnNldFRhYnNPZmZzZXQoMCk7IC8vIHJlc2V0IHRoZSBzY3JvbGwgYW1vdW50IChtYXJnaW4tbGVmdCBvZiB0aGUgZmlyc3QgdGFiKSB0byAwXG5cdFx0cmVzZXRSZWN0cy5jYWxsKHRoaXMsICh0aGlzLmZyYW1lcldpZHRoIC0gdGhpcy50b3RhbFRhYnNXaWR0aCkgLyAyLCB3aWR0aHMpO1xuXHRcdHRoaXMucmVzZXRJbmRpY2F0b3IoKTsgLy8gcmVzZXQgd2l0aCBuZXcgdGFiIGRpbWVuc2lvbnMgKFZ1ZSB3aWxsIHJ1biBzZXRBY3RpdmVUYWJJbmRleCBhbnl3YXksIGJ1dCB0aGF0J3Mgb2theSlcblx0XHR0aGlzLmhpZGVBcnJvdygpO1xuXHR9XG5cbn1cblxuRHluYW1pY1RhYnMucHJvdG90eXBlLnNjcm9sbFRvQWN0aXZlVGFiID0gZnVuY3Rpb24oKSB7XG5cblx0Ly8gUmV0dXJuIGlmIHRoZXJlJ3Mgbm8gbmVlZCB0byBzY3JvbGwgYW55d2hlcmUuXG5cdGlmICh0aGlzLnRvdGFsVGFic1dpZHRoIDw9IHRoaXMuZnJhbWVyV2lkdGgpIHsgLy8gdGhlIHRvdGFsIG51bWJlciBvZiBmcmFtZXIgd2lkdGhzIHRoYXQgZXF1YWwgdGhlIGxlbmd0aCBvZiB0b3RhbFRhYnNXaWR0aFxuXHRcdHRoaXMucmVzZXRJbmRpY2F0b3IoKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRsZXQgYWN0aXZlVGFiID0gdGhpcy5yZWdpc3RlcmVkVGFic1t0aGlzLmFjdGl2ZVRhYkluZGV4XTtcblxuXHQvLyBwaXhlbHMgdG8gdGhlIGxlZnQgZWRnZSwgcmVsYXRpdmUgdG8gdGhlIGxlZnQgZWRnZSBvZiBmcmFtZXJcblx0Y29uc3QgbGVmdEVkZ2UgPSBhY3RpdmVUYWIucmVjdC5sZWZ0ICsgdGhpcy5mcmFtZXJTaGlmdDtcblxuXHQvLyBwaXhlbHMgdG8gdGhlIHJpZ2h0IGVkZ2UsIHJlbGF0aXZlIHRvIHRoZSBsZWZ0IGVkZ2Ugb2YgZnJhbWVyXG5cdGNvbnN0IHJpZ2h0RWRnZSA9IGFjdGl2ZVRhYi5yZWN0LmxlZnQgKyBhY3RpdmVUYWIucmVjdC53aWR0aCArIHRoaXMuZnJhbWVyU2hpZnQ7XG5cblx0aWYgKGxlZnRFZGdlIDwgMCkgeyAvLyBzY3JvbGwgdG8gdGhlIGxlZnRcblxuXHRcdC8vIGNvbnNvbGUubG9nKFwibGVmdEVkZ2VcIiwgbGVmdEVkZ2UpO1xuXG5cdFx0Ly8gdGhlIGxlZnQgZWRnZSBvZiBhY3RpdmVUYWIgaXMgaW4gdGhlIG5lZ2F0aXZlIG5UaEZyYW1lXG5cdFx0Y29uc3QgblRoRnJhbWUgPSBNYXRoLmFicyhsZWZ0RWRnZSkgLyB0aGlzLmZyYW1lcldpZHRoO1xuXG5cdFx0Ly8gY29uc29sZS5sb2coXCJuVGhGcmFtZVwiLCBuVGhGcmFtZSk7XG5cblx0XHQvLyBjb25zb2xlLmxvZyhcIi0oblRoRnJhbWUgLSAoKGFjdGl2ZVRhYi5yZWN0LndpZHRoICogMS4xKSAvIHRoaXMuZnJhbWVyV2lkdGgpKVwiLCBuVGhGcmFtZSArICgoYWN0aXZlVGFiLnJlY3Qud2lkdGggKiAxLjEpIC8gdGhpcy5mcmFtZXJXaWR0aCkpXG5cblx0XHR0aGlzLnNjcm9sbExlZnQoblRoRnJhbWUgKyAoKGFjdGl2ZVRhYi5yZWN0LndpZHRoICogMS4xKSAvIHRoaXMuZnJhbWVyV2lkdGgpKTtcblxuXHR9IGVsc2UgaWYgKHJpZ2h0RWRnZSA+IHRoaXMuZnJhbWVyV2lkdGgpIHsgLy8gc2Nyb2xsIHRvIHRoZSByaWdodFxuXG5cdFx0Ly8gY29uc29sZS5sb2coXCJyaWdodEVkZ2VcIiwgcmlnaHRFZGdlKTtcblxuXHRcdC8vIHRoZSByaWdodCBlZGdlIG9mIGFjdGl2ZVRhYiBpcyBpbiB0aGUgblRoRnJhbWVcblx0XHRjb25zdCBuVGhGcmFtZSA9IHJpZ2h0RWRnZSAvIHRoaXMuZnJhbWVyV2lkdGg7XG5cblx0XHQvLyBjb25zb2xlLmxvZyhcIm5UaEZyYW1lXCIsIG5UaEZyYW1lKTtcblxuXHRcdC8vIGNvbnNvbGUubG9nKFwiblRoRnJhbWUgLSAoKGFjdGl2ZVRhYi5yZWN0LndpZHRoICogMS4xKSAvIHRoaXMuZnJhbWVyV2lkdGgpXCIsIG5UaEZyYW1lICsgKChhY3RpdmVUYWIucmVjdC53aWR0aCAqIDEuMSkgLyB0aGlzLmZyYW1lcldpZHRoKSlcblxuXHRcdHRoaXMuc2Nyb2xsUmlnaHQoblRoRnJhbWUgLSAoKGFjdGl2ZVRhYi5yZWN0LndpZHRoICogMS4xKSAvIHRoaXMuZnJhbWVyV2lkdGgpKTtcblxuXHR9IGVsc2UgeyAvLyB0aGVyZSBpcyBubyBzY3JvbGxpbmcgbmVlZGVkXG5cblx0XHRpZiAodGhpcy5hY3RpdmVUYWJJbmRleCA9PT0gMCkgeyAvLyBpZiBhY3RpdmUgdGFiIGlzIHRoZSBmaXJzdCBvbmVcblx0XHRcdHRoaXMuaGlkZUFycm93KFwibGVmdFwiKTtcblx0XHR9XG5cdFx0dGhpcy5yZXNldEluZGljYXRvcigpOyAvLyByZXNldCBiZWNhdXNlIG5vdCBzY3JvbGxpbmcgYW5kIG5vdCByZXNldHRpbmcgaW4gc2V0QWN0aXZlVGFiSW5kZXhcblxuXHR9XG5cblx0Ly8gY2hlY2sgaWYgeW91IHNob3VsZCBiZSBhYmxlIHRvIHNjcm9sbCByaWdodFxuXHRjb25zdCBsYXN0VGFiID0gdGhpcy5yZWdpc3RlcmVkVGFic1t0aGlzLnJlZ2lzdGVyZWRUYWJzLmxlbmd0aCAtIDFdLnJlY3Q7XG5cdC8vIGNvbnNvbGUubG9nKFwibGFzdFRhYlwiLCBsYXN0VGFiKVxuXHRjb25zdCByaWdodEVkZ2VMYXN0ID0gbGFzdFRhYi5sZWZ0ICsgbGFzdFRhYi53aWR0aCArIHRoaXMuZnJhbWVyU2hpZnQ7XG5cdGlmIChyaWdodEVkZ2VMYXN0ID4gdGhpcy5mcmFtZXJXaWR0aCkge1xuXHRcdHRoaXMuc2hvd0Fycm93KFwicmlnaHRcIik7XG5cdH1cblxufVxuXG5EeW5hbWljVGFicy5wcm90b3R5cGUucmVzZXRJbmRpY2F0b3IgPSBmdW5jdGlvbigpIHtcblx0bGV0IGluZHggPSB0aGlzLmFjdGl2ZVRhYkluZGV4O1xuXHQvLyBDaGVjayBpZiB0aGUgaW5kZXggb2YgdGhlIGFjdGl2ZSB0YWIgaXMgcG9zc2libGUgZ2l2ZW4gdGhlIGN1cnJlbnQgbnVtYmVyIG9mIHJlZ2lzdGVyZWQgdGFicy5cblx0aWYgKGluZHggPj0gdGhpcy5yZWdpc3RlcmVkVGFicy5sZW5ndGgpIHtcblx0XHQvLyBBY3QgYXMgaWYgd2Ugd2VyZSBvbiB0aGUgdGFiIGluZGV4IG9mIHRoZSBuZXcgbGFzdCB0YWIsIGJ1dCBkb24ndCBzZXQgdGhpcyB0YWIgYXMgYWN0aXZlOyB0aGUgYXBwIHNob3VsZCBzZXQgdGhlIHRhYiBpbmRleCBtYW51YWxseS5cblx0XHRpbmR4ID0gdGhpcy5yZWdpc3RlcmVkVGFicy5sZW5ndGggLSAxO1xuXHR9XG5cdC8vIGNvbnNvbGUubG9nKFwifHx8fCBSRVNFVFRJTkcgSU5ESUNBVE9SIFRPIGluZGV4XCIsIGluZHgsIFwiIGxlZnQ6XCIsIHRoaXMuZnJhbWVyU2hpZnQgKyB0aGlzLnJlZ2lzdGVyZWRUYWJzW2luZHhdLnJlY3QubGVmdClcblx0Ly8gY29uc29sZS5sb2coXCJ0aGlzLnJlZ2lzdGVyZWRUYWJzW2luZHhdLnJlY3QubGVmdFwiLCB0aGlzLnJlZ2lzdGVyZWRUYWJzW2luZHhdLnJlY3QubGVmdClcblx0Ly8gY29uc29sZS5sb2coXCJ0aGlzLmZyYW1lclNoaWZ0XCIsIHRoaXMuZnJhbWVyU2hpZnQpXG5cdC8vIGNvbnNvbGUubG9nKFwiSU5ESUNBVE9SIE5FVyBMRUZUXCIsIHRoaXMuZnJhbWVyU2hpZnQgKyB0aGlzLnJlZ2lzdGVyZWRUYWJzW2luZHhdLnJlY3QubGVmdClcblx0Ly8gY29uc29sZS5sb2coXCJJTkRJQ0FUT1IgTkVXIFdJRFRIXCIsIHRoaXMucmVnaXN0ZXJlZFRhYnNbaW5keF0ucmVjdC53aWR0aClcblx0dGhpcy5pbmRpY2F0b3JCYXIuc3R5bGUubGVmdCA9ICh0aGlzLmZyYW1lclNoaWZ0ICsgdGhpcy5yZWdpc3RlcmVkVGFic1tpbmR4XS5yZWN0LmxlZnQpICsgXCJweFwiO1xuXHR0aGlzLmluZGljYXRvckJhci5zdHlsZS53aWR0aCA9IHRoaXMucmVnaXN0ZXJlZFRhYnNbaW5keF0ucmVjdC53aWR0aCArIFwicHhcIjtcbn1cblxuLy8gc2Nyb2xsIGxlZnQgbiBmcmFtZVdpZHRoczsgZnJhbWVXaWR0aHMgZGVmYXVsdHMgdG8gMC44NSBpZiB1bmRlZmluZWRcbkR5bmFtaWNUYWJzLnByb3RvdHlwZS5zY3JvbGxMZWZ0ID0gZnVuY3Rpb24oZnJhbWVyV2lkdGhzKSB7XG5cblx0aWYgKGZyYW1lcldpZHRocyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0ZnJhbWVyV2lkdGhzID0gMC44NTtcblx0fVxuXG5cdGxldCBwaXhlbHNUb1NoaWZ0ID0gZnJhbWVyV2lkdGhzICogdGhpcy5mcmFtZXJXaWR0aDtcblxuXHQvLyBpZiBhdCBsZWZ0IGVkZ2UsIGRvbid0IHNjcm9sbFxuXHRpZiAodGhpcy5mcmFtZXJTaGlmdCA+PSAwKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0aWYgKE1hdGguYWJzKHRoaXMuZnJhbWVyU2hpZnQpID4gcGl4ZWxzVG9TaGlmdCkge1xuXG5cdFx0Ly8gc2Nyb2xsIGxlZnQgcGl4ZWxzVG9TaGlmdFxuXHRcdHRoaXMuc2V0VGFic09mZnNldCh0aGlzLmZyYW1lclNoaWZ0ICsgcGl4ZWxzVG9TaGlmdClcblxuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gc2Nyb2xsIHRvIHRoZSBsZWZ0IGVkZ2Vcblx0XHR0aGlzLnNldFRhYnNPZmZzZXQoMClcblx0XHR0aGlzLmhpZGVBcnJvdyhcImxlZnRcIilcblxuXHR9XG5cblx0dGhpcy5yZXNldEluZGljYXRvcigpO1xuXG5cdHRoaXMuc2hvd0Fycm93KFwicmlnaHRcIik7XG5cbn1cblxuLy8gc2Nyb2xsIHRoZSB0aGUgcmlnaHQgbiBmcmFtZVdpZHRoczsgZnJhbWVXaWR0aHMgZGVmYXVsdHMgdG8gMC44NSBpZiB1bmRlZmluZWRcbkR5bmFtaWNUYWJzLnByb3RvdHlwZS5zY3JvbGxSaWdodCA9IGZ1bmN0aW9uKGZyYW1lcldpZHRocykge1xuXG5cdGlmIChmcmFtZXJXaWR0aHMgPT09IHVuZGVmaW5lZCkge1xuXHRcdGZyYW1lcldpZHRocyA9IDAuODU7XG5cdH1cblxuXHRsZXQgcGl4ZWxzVG9TaGlmdCA9IGZyYW1lcldpZHRocyAqIHRoaXMuZnJhbWVyV2lkdGg7XG5cblx0Ly8gdGhlIG51bWJlciBvZiBwaXhlbHMgdGhhdCB5b3UgY2FuIHN0aWxsIHNjcm9sbCB0byB0aGUgcmlnaHRcblx0Y29uc3QgY2FuU2hpZnQgPSBNYXRoLmFicyh0aGlzLnRvdGFsVGFic1dpZHRoIC0gdGhpcy5mcmFtZXJXaWR0aCArIHRoaXMuZnJhbWVyU2hpZnQpO1xuXG5cdC8vIGlmIGF0IHJpZ2h0IGVkZ2UsIGRvbid0IHNjcm9sbFxuXHRpZiAoY2FuU2hpZnQgPD0gMCkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmIChjYW5TaGlmdCA+IHBpeGVsc1RvU2hpZnQpIHtcblxuXHRcdC8vIHNjcm9sbCByaWdodCBwaXhlbHNUb1NoaWZ0XG5cdFx0dGhpcy5zZXRUYWJzT2Zmc2V0KHRoaXMuZnJhbWVyU2hpZnQgLSBwaXhlbHNUb1NoaWZ0KVxuXG5cdH0gZWxzZSB7XG5cblx0XHQvLyBzY3JvbGwgdG8gdGhlIHJpZ2h0IGVkZ2Vcblx0XHR0aGlzLnNldFRhYnNPZmZzZXQoLSh0aGlzLnRvdGFsVGFic1dpZHRoIC0gdGhpcy5mcmFtZXJXaWR0aCkpXG5cdFx0dGhpcy5oaWRlQXJyb3coXCJyaWdodFwiKVxuXG5cdH1cblxuXHR0aGlzLnJlc2V0SW5kaWNhdG9yKCk7XG5cblx0dGhpcy5zaG93QXJyb3coXCJsZWZ0XCIpO1xuXG59XG5cbkR5bmFtaWNUYWJzLnByb3RvdHlwZS5zZXRUYWJzT2Zmc2V0ID0gZnVuY3Rpb24ob2Zmc2V0KSB7XG5cdHRoaXMuZnJhbWVyU2hpZnQgPSBvZmZzZXQ7XG5cdHRoaXMucmVnaXN0ZXJlZFRhYnNbMF0uZWwuc3R5bGVbXCJtYXJnaW4tbGVmdFwiXSA9IHRoaXMuZnJhbWVyU2hpZnQrXCJweFwiO1xufVxuXG4vLyBzcGVjaWZ5IHdoZXRoZXIgdG8gc2hvdyB0aGUgXCJsZWZ0XCIgYXJyb3csIHRoZSBcInJpZ2h0XCIgYXJyb3csIG9yIGJvdGggKG5vIGFyZ3VtZW50KVxuRHluYW1pY1RhYnMucHJvdG90eXBlLnNob3dBcnJvdyA9IGZ1bmN0aW9uKGxlZnRSaWdodEFsbCkge1xuXHRpZiAobGVmdFJpZ2h0QWxsID09PSBcImxlZnRcIikge1xuXHRcdHRoaXMuYXJyb3dMZWZ0LnN0eWxlLnZpc2liaWxpdHkgPSBcIlwiO1xuXHR9IGVsc2UgaWYgKGxlZnRSaWdodEFsbCA9PT0gXCJyaWdodFwiKSB7XG5cdFx0dGhpcy5hcnJvd1JpZ2h0LnN0eWxlLnZpc2liaWxpdHkgPSBcIlwiO1xuXHR9IGVsc2Uge1xuXHRcdHRoaXMuYXJyb3dMZWZ0LnN0eWxlLnZpc2liaWxpdHkgPSBcIlwiO1xuXHRcdHRoaXMuYXJyb3dSaWdodC5zdHlsZS52aXNpYmlsaXR5ID0gXCJcIjtcblx0fVxufVxuXG4vLyBzcGVjaWZ5IHdoZXRoZXIgdG8gaGlkZSB0aGUgXCJsZWZ0XCIgYXJyb3csIHRoZSBcInJpZ2h0XCIgYXJyb3csIG9yIGJvdGggKG5vIGFyZ3VtZW50KVxuRHluYW1pY1RhYnMucHJvdG90eXBlLmhpZGVBcnJvdyA9IGZ1bmN0aW9uKGxlZnRSaWdodEFsbCkge1xuXHRpZiAobGVmdFJpZ2h0QWxsID09PSBcImxlZnRcIikge1xuXHRcdHRoaXMuYXJyb3dMZWZ0LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuXHR9IGVsc2UgaWYgKGxlZnRSaWdodEFsbCA9PT0gXCJyaWdodFwiKSB7XG5cdFx0dGhpcy5hcnJvd1JpZ2h0LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuXHR9IGVsc2Uge1xuXHRcdHRoaXMuYXJyb3dMZWZ0LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuXHRcdHRoaXMuYXJyb3dSaWdodC5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblx0fVxufVxuXG4vLyBQcml2YXRlIHV0aWxpdHkgZnVuY3Rpb25zOlxuXG4vLyBzZXRBY3RpdmVIaWdobGlnaHQgbWFya3MgYSByZWdpc3RlcmVkIHRhYiBpbiB0aGUgRE9NIGFzIHRoZSBhY3RpdmUgb25lIGFmdGVyIHVuLW1hcmtpbmcgdGhlIGN1cnJlbnQgYWN0aXZlXG4vLyB0YWIgYXMgYWN0aXZlLlxuZnVuY3Rpb24gc2V0QWN0aXZlSGlnaGxpZ2h0KHRhYkluZGV4KSB7XG5cdC8vIElmIHRoZSBhcnJheSBvZiByZWdpc3RlcmVkIHRhYnMgZWl0aGVyIGhhcyBub3QgY2hhbmdlZCBvciBnb3QgY2hhbmdlZCBidXQgaGFzIHRoZSBzYW1lIG51bWJlciBvZiB0YWJzLFxuXHQvLyBtdXN0IGNoZWNrIHRvIG5vdCB0cnkgdG8gc2V0IG91dCBvZiByYW5nZSB0YWIgaW5kZXggYXMgbm90IGFjdGl2ZS5cblx0aWYgKHRoaXMuYWN0aXZlVGFiSW5kZXggPCB0aGlzLnJlZ2lzdGVyZWRUYWJzLmxlbmd0aCkge1xuXHRcdHRoaXMucmVnaXN0ZXJlZFRhYnNbdGhpcy5hY3RpdmVUYWJJbmRleF0uZWwucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1kdGFjdGl2ZVwiKTtcblx0fVxuXHR0aGlzLnJlZ2lzdGVyZWRUYWJzW3RhYkluZGV4XS5lbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWR0YWN0aXZlXCIsIFwieVwiKTtcbn1cblxuLy8gcmVzZXRSZWN0cyByZXNldHMgdGhlIGJvdW5kaW5nQ2xpZW50UmVjdCBpbmZvIG9mIGFsbCByZWdpc3RlcmVkIHRhYnMuXG5mdW5jdGlvbiByZXNldFJlY3RzKGZpcnN0TGVmdCwgd2lkdGhzKSB7XG5cdC8vIGZpcnN0LCBzZXQgdGhlIGZpcnN0IHRhYiBtYW51YWxseSBiZWNhdXNlIGl0cyBsZWZ0IG11c3QgYmUgMFxuXHRzZXROZXdSZWN0LmNhbGwodGhpcywgMCwge2xlZnQ6IGZpcnN0TGVmdCwgd2lkdGg6IHdpZHRoc1swXX0pO1xuXHQvLyBhZGp1c3QgYWxsIHRoZSBvdGhlciB0YWJzXG5cdGZvciAobGV0IGkgPSAxLCB0YWJzTGVuID0gdGhpcy5yZWdpc3RlcmVkVGFicy5sZW5ndGg7IGkgPCB0YWJzTGVuOyBpKyspIHtcblx0XHRzZXROZXdSZWN0LmNhbGwodGhpcywgaSwge2xlZnQ6IHRoaXMucmVnaXN0ZXJlZFRhYnNbaS0xXS5yZWN0LmxlZnQgKyB0aGlzLnJlZ2lzdGVyZWRUYWJzW2ktMV0ucmVjdC53aWR0aCwgd2lkdGg6IHdpZHRoc1tpXX0pXG5cdH1cbn1cblxuLy8gc2V0TmV3UmVjdCByZXBsYWNlcyBhIHJlZ2lzdGVyZWQgdGFiIGJ5IHRoZSBhcnJheSBzcGxpY2UgbWV0aG9kICh0byBtYWtlIHRoZSBtdXRhdGlvbiB3YXRjaGFibGUgZnJvbSBvdXRzaWRlKS5cbmZ1bmN0aW9uIHNldE5ld1JlY3QodGFiSW5kZXgsIHJlY3QpIHtcblx0dGhpcy5yZWdpc3RlcmVkVGFicy5zcGxpY2UodGFiSW5kZXgsIDEsIHtcblx0XHRlbDogdGhpcy5yZWdpc3RlcmVkVGFic1t0YWJJbmRleF0uZWwsXG5cdFx0Ly8gb2M6IHRoaXMucmVnaXN0ZXJlZFRhYnNbdGFiSW5kZXhdLm9jLFxuXHRcdHJlY3Q6IHJlY3Rcblx0fSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgRHluYW1pY1RhYnM7XG4iXSwic291cmNlUm9vdCI6IiJ9