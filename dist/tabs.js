!function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";(function(t){var i=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some(function(t,r){return t[0]===e&&(i=r,!0)}),i}return function(){function e(){this.__entries__=[]}var i={size:{configurable:!0}};return i.size.get=function(){return this.__entries__.length},e.prototype.get=function(e){var i=t(this.__entries__,e),r=this.__entries__[i];return r&&r[1]},e.prototype.set=function(e,i){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,r=t(i,e);~r&&i.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,r=this.__entries__;i<r.length;i+=1){var s=r[i];t.call(e,s[1],s[0])}},Object.defineProperties(e.prototype,i),e}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,s=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),n="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(s):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},o=2,a=["top","right","bottom","left","width","height","size","weight"],h="undefined"!=typeof MutationObserver,c=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,r=!1,s=0;function a(){i&&(i=!1,t()),r&&c()}function h(){n(a)}function c(){var t=Date.now();if(i){if(t-s<o)return;r=!0}else i=!0,r=!1,setTimeout(h,e);s=t}return c}(this.refresh.bind(this),20)};c.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},c.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},c.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},c.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},c.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),h?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},c.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},c.prototype.onTransitionEnd_=function(t){var e=t.propertyName;void 0===e&&(e=""),a.some(function(t){return!!~e.indexOf(t)})&&this.refresh()},c.getInstance=function(){return this.instance_||(this.instance_=new c),this.instance_},c.instance_=null;var f=function(t,e){for(var i=0,r=Object.keys(e);i<r.length;i+=1){var s=r[i];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},d=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||s},l=y(0,0,0,0);function u(t){return parseFloat(t)||0}function b(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return e.reduce(function(e,i){return e+u(t["border-"+i+"-width"])},0)}function p(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return l;var r=d(t).getComputedStyle(t),s=function(t){for(var e={},i=0,r=["top","right","bottom","left"];i<r.length;i+=1){var s=r[i],n=t["padding-"+s];e[s]=u(n)}return e}(r),n=s.left+s.right,o=s.top+s.bottom,a=u(r.width),h=u(r.height);if("border-box"===r.boxSizing&&(Math.round(a+n)!==e&&(a-=b(r,"left","right")+n),Math.round(h+o)!==i&&(h-=b(r,"top","bottom")+o)),!function(t){return t===d(t).document.documentElement}(t)){var c=Math.round(a+n)-e,f=Math.round(h+o)-i;1!==Math.abs(c)&&(a-=c),1!==Math.abs(f)&&(h-=f)}return y(s.left,s.top,a,h)}var v="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof d(t).SVGGraphicsElement}:function(t){return t instanceof d(t).SVGElement&&"function"==typeof t.getBBox};function g(t){return r?v(t)?function(t){var e=t.getBBox();return y(0,0,e.width,e.height)}(t):p(t):l}function y(t,e,i,r){return{x:t,y:e,width:i,height:r}}var m=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=t};m.prototype.isActive=function(){var t=g(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},m.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var _=function(t,e){var i,r,s,n,o,a,h,c=(r=(i=e).x,s=i.y,n=i.width,o=i.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,h=Object.create(a.prototype),f(h,{x:r,y:s,width:n,height:o,top:s,right:r+n,bottom:o+s,left:r}),h);f(this,{target:t,contentRect:c})},w=function(t,e,r){if(this.activeObservations_=[],this.observations_=new i,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=r};w.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new m(t)),this.controller_.addObserver(this),this.controller_.refresh())}},w.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},w.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},w.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},w.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new _(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},w.prototype.clearActive=function(){this.activeObservations_.splice(0)},w.prototype.hasActive=function(){return this.activeObservations_.length>0};var T="undefined"!=typeof WeakMap?new WeakMap:new i,E=function(t){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=c.getInstance(),i=new w(t,e,this);T.set(this,i)};["observe","unobserve","disconnect"].forEach(function(t){E.prototype[t]=function(){return(e=T.get(this))[t].apply(e,arguments);var e}});var O=void 0!==s.ResizeObserver?s.ResizeObserver:E;e.a=O}).call(this,i(1))},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";i.r(e);var r=i(0);function s(t){if(!t)return void console.log("ERROR: To register dynamic tabs, pass in the ID of a node containing the tabs");this.container=document.getElementById(t),this.registeredTabs=[],this.activeTabIndex=0,this.switchCallbacks=[],this.framer=this.container.getElementsByClassName("dynamic-tabs-framer")[0],this.framerShift=0,this.framerWidth=0,this.totalTabsWidth=0,this.indicatorBar=this.container.getElementsByClassName("dt-indicator-bar")[0],this.arrowLeft=this.container.getElementsByClassName("arrow-left")[0],this.arrowRight=this.container.getElementsByClassName("arrow-right")[0],this.arrowLeft.addEventListener("click",this.scrollLeft.bind(this,.85)),this.arrowRight.addEventListener("click",this.scrollRight.bind(this,.85)),new r.a(t=>{for(const e of t){this.refreshLayout();const{left:t,top:i,width:r,height:s}=e.contentRect;console.log("Element:",e.target),console.log(`Element's size: ${r}px x ${s}px`),console.log(`Element's paddings: ${i}px ; ${t}px`)}}).observe(this.framer)}function n(t){this.activeTabIndex<this.registeredTabs.length&&this.registeredTabs[this.activeTabIndex].el.removeAttribute("data-dtactive"),this.registeredTabs[t].el.setAttribute("data-dtactive","y")}function o(t,e){a.call(this,0,{left:t,width:e[0]});for(let t=1,i=this.registeredTabs.length;t<i;t++)a.call(this,t,{left:this.registeredTabs[t-1].rect.left+this.registeredTabs[t-1].rect.width,width:e[t]})}function a(t,e){this.registeredTabs.splice(t,1,{el:this.registeredTabs[t].el,rect:e})}s.prototype.registerTabs=function(t,e=""){if(void 0!==t&&0!==t.length){for(let i=0;i<t.length;i++)this.registerTab(document.getElementById(e+t[i]));n.call(this,0),this.refreshLayout()}else console.log("ERROR: Must pass in an array of tab IDs to register")},s.prototype.registerAllTabs=function(){const t=this.container.getElementsByClassName("dynamic-tab");if(0!==t.length){for(let e=0;e<t.length;e++)this.registerTab(t[e]);n.call(this,0),this.refreshLayout()}else console.log("ERROR: There are no tabs to register")},s.prototype.registerTab=function(t,e=!1){t.setAttribute("data-dtr","y");const i=this.registeredTabs.length;let r=this;t.handleEvent=function(t){if("click"===t.type){r.setActiveTabIndex(i);for(let t=0;t<r.switchCallbacks.length;t++)r.switchCallbacks[t](r.activeTabIndex,i)}},t.addEventListener("click",t),this.registeredTabs.push({el:t,rect:{left:0,width:0}}),e&&this.refreshLayout()},s.prototype.deregisterAllTabs=function(){for(let t=this.registeredTabs.length;t>0;t--)this.deregisterTab(0);this.switchCallbacks=[],this.refreshLayout()},s.prototype.deregisterTab=function(t,e=!1){this.registeredTabs[t].el.removeEventListener("click",this.registeredTabs[t].el),this.registeredTabs[t].el.removeAttribute("data-dtr"),this.registeredTabs[t].el.removeAttribute("data-dtactive");const i=this.registeredTabs[t].el.style["margin-left"];"0px"!==i&&""!==i&&(this.registeredTabs[t].el.style["margin-left"]="0px"),this.registeredTabs.splice(t,1),0===this.registeredTabs.length&&(this.indicatorBar.style.width="0"),e&&this.refreshLayout()},s.prototype.setActiveTabIndex=function(t){0!==this.registeredTabs.length?t>=this.registeredTabs.length?console.log("ERROR: Invalid tab index failed to set"):(this.activeTabIndex=t,n.call(this,t),this.scrollToActiveTab()):this.activeTabIndex=0},s.prototype.addSwitchCallback=function(t){this.switchCallbacks.push(t)},s.prototype.refreshLayout=function(){if(0===this.registeredTabs.length)return;this.framerWidth=this.framer.getBoundingClientRect().width,this.totalTabsWidth=0;let t=this.registeredTabs.map(t=>{const e=t.el.getBoundingClientRect().width;return this.totalTabsWidth+=e,e});this.totalTabsWidth>this.framerWidth?(this.framer.style["text-align"]="left",o.call(this,0,t),this.scrollToActiveTab()):(this.framer.style["text-align"]="center",this.setTabsOffset(0),o.call(this,(this.framerWidth-this.totalTabsWidth)/2,t),this.resetIndicator(),this.hideArrow())},s.prototype.scrollToActiveTab=function(){if(this.totalTabsWidth<=this.framerWidth)return void this.resetIndicator();let t=this.registeredTabs[this.activeTabIndex];const e=t.rect.left+this.framerShift,i=t.rect.left+t.rect.width+this.framerShift;if(e<0){const i=Math.abs(e)/this.framerWidth;this.scrollLeft(i+1.1*t.rect.width/this.framerWidth)}else if(i>this.framerWidth){const e=i/this.framerWidth;this.scrollRight(e-1.1*t.rect.width/this.framerWidth)}else 0===this.activeTabIndex&&this.hideArrow("left"),this.resetIndicator();const r=this.registeredTabs[this.registeredTabs.length-1].rect;r.left+r.width+this.framerShift>this.framerWidth&&this.showArrow("right")},s.prototype.resetIndicator=function(){let t=this.activeTabIndex;t>=this.registeredTabs.length&&(t=this.registeredTabs.length-1),this.indicatorBar.style.left=this.framerShift+this.registeredTabs[t].rect.left+"px",this.indicatorBar.style.width=this.registeredTabs[t].rect.width+"px"},s.prototype.scrollLeft=function(t){void 0===t&&(t=.85);let e=t*this.framerWidth;this.framerShift>=0||(Math.abs(this.framerShift)>e?this.setTabsOffset(this.framerShift+e):(this.setTabsOffset(0),this.hideArrow("left")),this.resetIndicator(),this.showArrow("right"))},s.prototype.scrollRight=function(t){void 0===t&&(t=.85);let e=t*this.framerWidth;const i=Math.abs(this.totalTabsWidth-this.framerWidth+this.framerShift);i<=0||(i>e?this.setTabsOffset(this.framerShift-e):(this.setTabsOffset(-(this.totalTabsWidth-this.framerWidth)),this.hideArrow("right")),this.resetIndicator(),this.showArrow("left"))},s.prototype.setTabsOffset=function(t){this.framerShift=t,this.registeredTabs[0].el.style["margin-left"]=this.framerShift+"px"},s.prototype.showArrow=function(t){"left"===t?this.arrowLeft.style.visibility="":"right"===t?this.arrowRight.style.visibility="":(this.arrowLeft.style.visibility="",this.arrowRight.style.visibility="")},s.prototype.hideArrow=function(t){"left"===t?this.arrowLeft.style.visibility="hidden":"right"===t?this.arrowRight.style.visibility="hidden":(this.arrowLeft.style.visibility="hidden",this.arrowRight.style.visibility="hidden")},e.default=s}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Jlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbC9kaXN0L1Jlc2l6ZU9ic2VydmVyLmVzLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImdsb2JhbCIsIk1hcFNoaW0iLCJNYXAiLCJnZXRJbmRleCIsImFyciIsImtleSIsInJlc3VsdCIsInNvbWUiLCJlbnRyeSIsImluZGV4IiwiYW5vbnltb3VzIiwidGhpcyIsIl9fZW50cmllc19fIiwicHJvdG90eXBlQWNjZXNzb3JzIiwic2l6ZSIsImxlbmd0aCIsInNldCIsInB1c2giLCJkZWxldGUiLCJlbnRyaWVzIiwic3BsaWNlIiwiaGFzIiwiY2xlYXIiLCJmb3JFYWNoIiwiY2FsbGJhY2siLCJjdHgiLCJsaXN0IiwiZGVmaW5lUHJvcGVydGllcyIsImlzQnJvd3NlciIsIndpbmRvdyIsImRvY3VtZW50IiwiZ2xvYmFsJDEiLCJNYXRoIiwic2VsZiIsIkZ1bmN0aW9uIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lJDEiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiaW5kIiwic2V0VGltZW91dCIsIkRhdGUiLCJub3ciLCJ0cmFpbGluZ1RpbWVvdXQiLCJ0cmFuc2l0aW9uS2V5cyIsIm11dGF0aW9uT2JzZXJ2ZXJTdXBwb3J0ZWQiLCJNdXRhdGlvbk9ic2VydmVyIiwiUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyIiwiY29ubmVjdGVkXyIsIm11dGF0aW9uRXZlbnRzQWRkZWRfIiwibXV0YXRpb25zT2JzZXJ2ZXJfIiwib2JzZXJ2ZXJzXyIsIm9uVHJhbnNpdGlvbkVuZF8iLCJyZWZyZXNoIiwiZGVsYXkiLCJsZWFkaW5nQ2FsbCIsInRyYWlsaW5nQ2FsbCIsImxhc3RDYWxsVGltZSIsInJlc29sdmVQZW5kaW5nIiwicHJveHkiLCJ0aW1lb3V0Q2FsbGJhY2siLCJ0aW1lU3RhbXAiLCJ0aHJvdHRsZSIsImFkZE9ic2VydmVyIiwib2JzZXJ2ZXIiLCJpbmRleE9mIiwiY29ubmVjdF8iLCJyZW1vdmVPYnNlcnZlciIsIm9ic2VydmVycyIsImRpc2Nvbm5lY3RfIiwidXBkYXRlT2JzZXJ2ZXJzXyIsImFjdGl2ZU9ic2VydmVycyIsImZpbHRlciIsImdhdGhlckFjdGl2ZSIsImhhc0FjdGl2ZSIsImJyb2FkY2FzdEFjdGl2ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvYnNlcnZlIiwiYXR0cmlidXRlcyIsImNoaWxkTGlzdCIsImNoYXJhY3RlckRhdGEiLCJzdWJ0cmVlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc2Nvbm5lY3QiLCJyZWYiLCJwcm9wZXJ0eU5hbWUiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlXyIsImRlZmluZUNvbmZpZ3VyYWJsZSIsInRhcmdldCIsInByb3BzIiwia2V5cyIsIndyaXRhYmxlIiwiZ2V0V2luZG93T2YiLCJvd25lckRvY3VtZW50IiwiZGVmYXVsdFZpZXciLCJlbXB0eVJlY3QiLCJjcmVhdGVSZWN0SW5pdCIsInRvRmxvYXQiLCJwYXJzZUZsb2F0IiwiZ2V0Qm9yZGVyc1NpemUiLCJzdHlsZXMiLCJwb3NpdGlvbnMiLCJsZW4iLCJhcmd1bWVudHMiLCJyZWR1Y2UiLCJwb3NpdGlvbiIsImdldEhUTUxFbGVtZW50Q29udGVudFJlY3QiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImdldENvbXB1dGVkU3R5bGUiLCJwYWRkaW5ncyIsImdldFBhZGRpbmdzIiwiaG9yaXpQYWQiLCJsZWZ0IiwicmlnaHQiLCJ2ZXJ0UGFkIiwidG9wIiwiYm90dG9tIiwid2lkdGgiLCJoZWlnaHQiLCJib3hTaXppbmciLCJyb3VuZCIsImRvY3VtZW50RWxlbWVudCIsImlzRG9jdW1lbnRFbGVtZW50IiwidmVydFNjcm9sbGJhciIsImhvcml6U2Nyb2xsYmFyIiwiYWJzIiwiaXNTVkdHcmFwaGljc0VsZW1lbnQiLCJTVkdHcmFwaGljc0VsZW1lbnQiLCJTVkdFbGVtZW50IiwiZ2V0QkJveCIsImdldENvbnRlbnRSZWN0IiwiYmJveCIsImdldFNWR0NvbnRlbnRSZWN0IiwieCIsInkiLCJSZXNpemVPYnNlcnZhdGlvbiIsImJyb2FkY2FzdFdpZHRoIiwiYnJvYWRjYXN0SGVpZ2h0IiwiY29udGVudFJlY3RfIiwiaXNBY3RpdmUiLCJyZWN0IiwiYnJvYWRjYXN0UmVjdCIsIlJlc2l6ZU9ic2VydmVyRW50cnkiLCJyZWN0SW5pdCIsIkNvbnN0ciIsImNvbnRlbnRSZWN0IiwiRE9NUmVjdFJlYWRPbmx5IiwiY3JlYXRlIiwiUmVzaXplT2JzZXJ2ZXJTUEkiLCJjb250cm9sbGVyIiwiY2FsbGJhY2tDdHgiLCJhY3RpdmVPYnNlcnZhdGlvbnNfIiwib2JzZXJ2YXRpb25zXyIsIlR5cGVFcnJvciIsImNhbGxiYWNrXyIsImNvbnRyb2xsZXJfIiwiY2FsbGJhY2tDdHhfIiwiRWxlbWVudCIsIm9ic2VydmF0aW9ucyIsInVub2JzZXJ2ZSIsImNsZWFyQWN0aXZlIiwidGhpcyQxIiwib2JzZXJ2YXRpb24iLCJtYXAiLCJXZWFrTWFwIiwiUmVzaXplT2JzZXJ2ZXIiLCJtZXRob2QiLCJhcHBseSIsIl9fd2VicGFja19leHBvcnRzX18iLCJnIiwiZXZhbCIsImUiLCJEeW5hbWljVGFicyIsImNvbnRhaW5lcklEIiwiY29uc29sZSIsImxvZyIsImNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwicmVnaXN0ZXJlZFRhYnMiLCJhY3RpdmVUYWJJbmRleCIsInN3aXRjaENhbGxiYWNrcyIsImZyYW1lciIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJmcmFtZXJTaGlmdCIsImZyYW1lcldpZHRoIiwidG90YWxUYWJzV2lkdGgiLCJpbmRpY2F0b3JCYXIiLCJhcnJvd0xlZnQiLCJhcnJvd1JpZ2h0Iiwic2Nyb2xsTGVmdCIsInNjcm9sbFJpZ2h0IiwicmVzaXplX29ic2VydmVyX3BvbHlmaWxsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJyZWZyZXNoTGF5b3V0Iiwic2V0QWN0aXZlSGlnaGxpZ2h0IiwidGFiSW5kZXgiLCJlbCIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInJlc2V0UmVjdHMiLCJmaXJzdExlZnQiLCJ3aWR0aHMiLCJzZXROZXdSZWN0IiwidGFic0xlbiIsInJlZ2lzdGVyVGFicyIsInRhYklEcyIsImlkUHJlZml4IiwidW5kZWZpbmVkIiwicmVnaXN0ZXJUYWIiLCJyZWdpc3RlckFsbFRhYnMiLCJ0YWJzIiwidGFiIiwibmV3VGFiSW5kZXgiLCJwYXJlbnQiLCJoYW5kbGVFdmVudCIsInR5cGUiLCJzZXRBY3RpdmVUYWJJbmRleCIsImRlcmVnaXN0ZXJBbGxUYWJzIiwiZGVyZWdpc3RlclRhYiIsIm1sIiwic3R5bGUiLCJuZXdJbmRleCIsInNjcm9sbFRvQWN0aXZlVGFiIiwiYWRkU3dpdGNoQ2FsbGJhY2siLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3Iiwic2V0VGFic09mZnNldCIsInJlc2V0SW5kaWNhdG9yIiwiaGlkZUFycm93IiwiYWN0aXZlVGFiIiwibGVmdEVkZ2UiLCJyaWdodEVkZ2UiLCJuVGhGcmFtZSIsImxhc3RUYWIiLCJzaG93QXJyb3ciLCJpbmR4IiwiZnJhbWVyV2lkdGhzIiwicGl4ZWxzVG9TaGlmdCIsImNhblNoaWZ0Iiwib2Zmc2V0IiwibGVmdFJpZ2h0QWxsIiwi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WUFHQSxNQUFBcUQsRUFBQTdNLEtBQUE2RixJQUFBbEgsS0FBQThLLGVBQUE5SyxLQUFBNkssWUFBQTdLLEtBQUE0SyxhQUdBc0QsR0FBQSxJQUlBQSxFQUFBRCxFQUdBak8sS0FBQXNOLGNBQUF0TixLQUFBNEssWUFBQXFELElBS0FqTyxLQUFBc04sZ0JBQUF0TixLQUFBOEssZUFBQTlLLEtBQUE2SyxjQUNBN0ssS0FBQXdOLFVBQUEsVUFJQXhOLEtBQUF1TixpQkFFQXZOLEtBQUE4TixVQUFBLFVBSUE3RCxFQUFBaEwsVUFBQXFPLGNBQUEsU0FBQWEsR0FDQW5PLEtBQUE0SyxZQUFBdUQsRUFDQW5PLEtBQUF1SyxlQUFBLEdBQUFpQixHQUFBd0IsTUFBQSxlQUFBaE4sS0FBQTRLLFlBQUEsTUFJQVgsRUFBQWhMLFVBQUE2TyxVQUFBLFNBQUFNLEdBQ0EsU0FBQUEsRUFDQXBPLEtBQUFnTCxVQUFBZ0MsTUFBQXFCLFdBQUEsR0FDRSxVQUFBRCxFQUNGcE8sS0FBQWlMLFdBQUErQixNQUFBcUIsV0FBQSxJQUVBck8sS0FBQWdMLFVBQUFnQyxNQUFBcUIsV0FBQSxHQUNBck8sS0FBQWlMLFdBQUErQixNQUFBcUIsV0FBQSxLQUtBcEUsRUFBQWhMLFVBQUF1TyxVQUFBLFNBQUFZLEdBQ0EsU0FBQUEsRUFDQXBPLEtBQUFnTCxVQUFBZ0MsTUFBQXFCLFdBQUEsU0FDRSxVQUFBRCxFQUNGcE8sS0FBQWlMLFdBQUErQixNQUFBcUIsV0FBQSxVQUVBck8sS0FBQWdMLFVBQUFnQyxNQUFBcUIsV0FBQSxTQUNBck8sS0FBQWlMLFdBQUErQixNQUFBcUIsV0FBQSxXQW9DQXhFLEVBQUEiLCJmaWxlIjoidGFicy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCIvKipcclxuICogQSBjb2xsZWN0aW9uIG9mIHNoaW1zIHRoYXQgcHJvdmlkZSBtaW5pbWFsIGZ1bmN0aW9uYWxpdHkgb2YgdGhlIEVTNiBjb2xsZWN0aW9ucy5cclxuICpcclxuICogVGhlc2UgaW1wbGVtZW50YXRpb25zIGFyZSBub3QgbWVhbnQgdG8gYmUgdXNlZCBvdXRzaWRlIG9mIHRoZSBSZXNpemVPYnNlcnZlclxyXG4gKiBtb2R1bGVzIGFzIHRoZXkgY292ZXIgb25seSBhIGxpbWl0ZWQgcmFuZ2Ugb2YgdXNlIGNhc2VzLlxyXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIHJlcXVpcmUtanNkb2MsIHZhbGlkLWpzZG9jICovXG52YXIgTWFwU2hpbSA9IChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHR5cGVvZiBNYXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBNYXA7XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGluZGV4IGluIHByb3ZpZGVkIGFycmF5IHRoYXQgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkIGtleS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PEFycmF5Pn0gYXJyXHJcbiAgICAgKiBAcGFyYW0geyp9IGtleVxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEluZGV4KGFyciwga2V5KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSAtMTtcblxuICAgICAgICBhcnIuc29tZShmdW5jdGlvbiAoZW50cnksIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoZW50cnlbMF0gPT09IGtleSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGluZGV4O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZXR1cm4gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gYW5vbnltb3VzKCkge1xuICAgICAgICAgICAgdGhpcy5fX2VudHJpZXNfXyA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHByb3RvdHlwZUFjY2Vzc29ycyA9IHsgc2l6ZTogeyBjb25maWd1cmFibGU6IHRydWUgfSB9O1xuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xuICAgICAgICBwcm90b3R5cGVBY2Nlc3NvcnMuc2l6ZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fX2VudHJpZXNfXy5sZW5ndGg7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBrZXlcclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn1cclxuICAgICAgICAgKi9cbiAgICAgICAgYW5vbnltb3VzLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBnZXRJbmRleCh0aGlzLl9fZW50cmllc19fLCBrZXkpO1xuICAgICAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5fX2VudHJpZXNfX1tpbmRleF07XG5cbiAgICAgICAgICAgIHJldHVybiBlbnRyeSAmJiBlbnRyeVsxXTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0geyp9IGtleVxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcclxuICAgICAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAgICAgKi9cbiAgICAgICAgYW5vbnltb3VzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXgodGhpcy5fX2VudHJpZXNfXywga2V5KTtcblxuICAgICAgICAgICAgaWYgKH5pbmRleCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX19lbnRyaWVzX19baW5kZXhdWzFdID0gdmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX19lbnRyaWVzX18ucHVzaChba2V5LCB2YWx1ZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0ga2V5XHJcbiAgICAgICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgICAgICovXG4gICAgICAgIGFub255bW91cy5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIGVudHJpZXMgPSB0aGlzLl9fZW50cmllc19fO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXgoZW50cmllcywga2V5KTtcblxuICAgICAgICAgICAgaWYgKH5pbmRleCkge1xuICAgICAgICAgICAgICAgIGVudHJpZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0geyp9IGtleVxyXG4gICAgICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICAgICAqL1xuICAgICAgICBhbm9ueW1vdXMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiAhIX5nZXRJbmRleCh0aGlzLl9fZW50cmllc19fLCBrZXkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICAgICAqL1xuICAgICAgICBhbm9ueW1vdXMucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fX2VudHJpZXNfXy5zcGxpY2UoMCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcclxuICAgICAgICAgKiBAcGFyYW0geyp9IFtjdHg9bnVsbF1cclxuICAgICAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAgICAgKi9cbiAgICAgICAgYW5vbnltb3VzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBjdHgpIHtcbiAgICAgICAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCBjdHggPT09IHZvaWQgMCApIGN0eCA9IG51bGw7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsaXN0ID0gdGhpcyQxLl9fZW50cmllc19fOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IGxpc3RbaV07XG5cbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKGN0eCwgZW50cnlbMV0sIGVudHJ5WzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyggYW5vbnltb3VzLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7XG5cbiAgICAgICAgcmV0dXJuIGFub255bW91cztcbiAgICB9KCkpO1xufSkoKTtcblxuLyoqXHJcbiAqIERldGVjdHMgd2hldGhlciB3aW5kb3cgYW5kIGRvY3VtZW50IG9iamVjdHMgYXJlIGF2YWlsYWJsZSBpbiBjdXJyZW50IGVudmlyb25tZW50LlxyXG4gKi9cbnZhciBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5kb2N1bWVudCA9PT0gZG9jdW1lbnQ7XG5cbi8vIFJldHVybnMgZ2xvYmFsIG9iamVjdCBvZiBhIGN1cnJlbnQgZW52aXJvbm1lbnQuXG52YXIgZ2xvYmFsJDEgPSAoZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWwuTWF0aCA9PT0gTWF0aCkge1xuICAgICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09PSBNYXRoKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PT0gTWF0aCkge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuY1xuICAgIHJldHVybiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xufSkoKTtcblxuLyoqXHJcbiAqIEEgc2hpbSBmb3IgdGhlIHJlcXVlc3RBbmltYXRpb25GcmFtZSB3aGljaCBmYWxscyBiYWNrIHRvIHRoZSBzZXRUaW1lb3V0IGlmXHJcbiAqIGZpcnN0IG9uZSBpcyBub3Qgc3VwcG9ydGVkLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXF1ZXN0cycgaWRlbnRpZmllci5cclxuICovXG52YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lJDEgPSAoZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIEl0J3MgcmVxdWlyZWQgdG8gdXNlIGEgYm91bmRlZCBmdW5jdGlvbiBiZWNhdXNlIElFIHNvbWV0aW1lcyB0aHJvd3NcbiAgICAgICAgLy8gYW4gXCJJbnZhbGlkIGNhbGxpbmcgb2JqZWN0XCIgZXJyb3IgaWYgckFGIGlzIGludm9rZWQgd2l0aG91dCB0aGUgZ2xvYmFsXG4gICAgICAgIC8vIG9iamVjdCBvbiB0aGUgbGVmdCBoYW5kIHNpZGUuXG4gICAgICAgIHJldHVybiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZChnbG9iYWwkMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjYWxsYmFjaykgeyByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBjYWxsYmFjayhEYXRlLm5vdygpKTsgfSwgMTAwMCAvIDYwKTsgfTtcbn0pKCk7XG5cbi8vIERlZmluZXMgbWluaW11bSB0aW1lb3V0IGJlZm9yZSBhZGRpbmcgYSB0cmFpbGluZyBjYWxsLlxudmFyIHRyYWlsaW5nVGltZW91dCA9IDI7XG5cbi8qKlxyXG4gKiBDcmVhdGVzIGEgd3JhcHBlciBmdW5jdGlvbiB3aGljaCBlbnN1cmVzIHRoYXQgcHJvdmlkZWQgY2FsbGJhY2sgd2lsbCBiZVxyXG4gKiBpbnZva2VkIG9ubHkgb25jZSBkdXJpbmcgdGhlIHNwZWNpZmllZCBkZWxheSBwZXJpb2QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gRnVuY3Rpb24gdG8gYmUgaW52b2tlZCBhZnRlciB0aGUgZGVsYXkgcGVyaW9kLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsYXkgLSBEZWxheSBhZnRlciB3aGljaCB0byBpbnZva2UgY2FsbGJhY2suXHJcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cclxuICovXG52YXIgdGhyb3R0bGUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGRlbGF5KSB7XG4gICAgdmFyIGxlYWRpbmdDYWxsID0gZmFsc2UsXG4gICAgICAgIHRyYWlsaW5nQ2FsbCA9IGZhbHNlLFxuICAgICAgICBsYXN0Q2FsbFRpbWUgPSAwO1xuXG4gICAgLyoqXHJcbiAgICAgKiBJbnZva2VzIHRoZSBvcmlnaW5hbCBjYWxsYmFjayBmdW5jdGlvbiBhbmQgc2NoZWR1bGVzIG5ldyBpbnZvY2F0aW9uIGlmXHJcbiAgICAgKiB0aGUgXCJwcm94eVwiIHdhcyBjYWxsZWQgZHVyaW5nIGN1cnJlbnQgcmVxdWVzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlc29sdmVQZW5kaW5nKCkge1xuICAgICAgICBpZiAobGVhZGluZ0NhbGwpIHtcbiAgICAgICAgICAgIGxlYWRpbmdDYWxsID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhaWxpbmdDYWxsKSB7XG4gICAgICAgICAgICBwcm94eSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsYmFjayBpbnZva2VkIGFmdGVyIHRoZSBzcGVjaWZpZWQgZGVsYXkuIEl0IHdpbGwgZnVydGhlciBwb3N0cG9uZVxyXG4gICAgICogaW52b2NhdGlvbiBvZiB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gZGVsZWdhdGluZyBpdCB0byB0aGVcclxuICAgICAqIHJlcXVlc3RBbmltYXRpb25GcmFtZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRpbWVvdXRDYWxsYmFjaygpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lJDEocmVzb2x2ZVBlbmRpbmcpO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogU2NoZWR1bGVzIGludm9jYXRpb24gb2YgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXG4gICAgZnVuY3Rpb24gcHJveHkoKSB7XG4gICAgICAgIHZhciB0aW1lU3RhbXAgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgIGlmIChsZWFkaW5nQ2FsbCkge1xuICAgICAgICAgICAgLy8gUmVqZWN0IGltbWVkaWF0ZWx5IGZvbGxvd2luZyBjYWxscy5cbiAgICAgICAgICAgIGlmICh0aW1lU3RhbXAgLSBsYXN0Q2FsbFRpbWUgPCB0cmFpbGluZ1RpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNjaGVkdWxlIG5ldyBjYWxsIHRvIGJlIGluIGludm9rZWQgd2hlbiB0aGUgcGVuZGluZyBvbmUgaXMgcmVzb2x2ZWQuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGltcG9ydGFudCBmb3IgXCJ0cmFuc2l0aW9uc1wiIHdoaWNoIG5ldmVyIGFjdHVhbGx5IHN0YXJ0XG4gICAgICAgICAgICAvLyBpbW1lZGlhdGVseSBzbyB0aGVyZSBpcyBhIGNoYW5jZSB0aGF0IHdlIG1pZ2h0IG1pc3Mgb25lIGlmIGNoYW5nZVxuICAgICAgICAgICAgLy8gaGFwcGVucyBhbWlkcyB0aGUgcGVuZGluZyBpbnZvY2F0aW9uLlxuICAgICAgICAgICAgdHJhaWxpbmdDYWxsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxlYWRpbmdDYWxsID0gdHJ1ZTtcbiAgICAgICAgICAgIHRyYWlsaW5nQ2FsbCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRpbWVvdXRDYWxsYmFjaywgZGVsYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFzdENhbGxUaW1lID0gdGltZVN0YW1wO1xuICAgIH1cblxuICAgIHJldHVybiBwcm94eTtcbn07XG5cbi8vIE1pbmltdW0gZGVsYXkgYmVmb3JlIGludm9raW5nIHRoZSB1cGRhdGUgb2Ygb2JzZXJ2ZXJzLlxudmFyIFJFRlJFU0hfREVMQVkgPSAyMDtcblxuLy8gQSBsaXN0IG9mIHN1YnN0cmluZ3Mgb2YgQ1NTIHByb3BlcnRpZXMgdXNlZCB0byBmaW5kIHRyYW5zaXRpb24gZXZlbnRzIHRoYXRcbi8vIG1pZ2h0IGFmZmVjdCBkaW1lbnNpb25zIG9mIG9ic2VydmVkIGVsZW1lbnRzLlxudmFyIHRyYW5zaXRpb25LZXlzID0gWyd0b3AnLCAncmlnaHQnLCAnYm90dG9tJywgJ2xlZnQnLCAnd2lkdGgnLCAnaGVpZ2h0JywgJ3NpemUnLCAnd2VpZ2h0J107XG5cbi8vIENoZWNrIGlmIE11dGF0aW9uT2JzZXJ2ZXIgaXMgYXZhaWxhYmxlLlxudmFyIG11dGF0aW9uT2JzZXJ2ZXJTdXBwb3J0ZWQgPSB0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCc7XG5cbi8qKlxyXG4gKiBTaW5nbGV0b24gY29udHJvbGxlciBjbGFzcyB3aGljaCBoYW5kbGVzIHVwZGF0ZXMgb2YgUmVzaXplT2JzZXJ2ZXIgaW5zdGFuY2VzLlxyXG4gKi9cbnZhciBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNvbm5lY3RlZF8gPSBmYWxzZTtcbiAgICB0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfID0gZmFsc2U7XG4gICAgdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8gPSBudWxsO1xuICAgIHRoaXMub2JzZXJ2ZXJzXyA9IFtdO1xuXG4gICAgdGhpcy5vblRyYW5zaXRpb25FbmRfID0gdGhpcy5vblRyYW5zaXRpb25FbmRfLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZWZyZXNoID0gdGhyb3R0bGUodGhpcy5yZWZyZXNoLmJpbmQodGhpcyksIFJFRlJFU0hfREVMQVkpO1xufTtcblxuLyoqXHJcbiAqIEFkZHMgb2JzZXJ2ZXIgdG8gb2JzZXJ2ZXJzIGxpc3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7UmVzaXplT2JzZXJ2ZXJTUEl9IG9ic2VydmVyIC0gT2JzZXJ2ZXIgdG8gYmUgYWRkZWQuXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cblxuXG4vKipcclxuICogSG9sZHMgcmVmZXJlbmNlIHRvIHRoZSBjb250cm9sbGVyJ3MgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwcml2YXRlIHtSZXNpemVPYnNlcnZlckNvbnRyb2xsZXJ9XHJcbiAqL1xuXG5cbi8qKlxyXG4gKiBLZWVwcyByZWZlcmVuY2UgdG8gdGhlIGluc3RhbmNlIG9mIE11dGF0aW9uT2JzZXJ2ZXIuXHJcbiAqXHJcbiAqIEBwcml2YXRlIHtNdXRhdGlvbk9ic2VydmVyfVxyXG4gKi9cblxuLyoqXHJcbiAqIEluZGljYXRlcyB3aGV0aGVyIERPTSBsaXN0ZW5lcnMgaGF2ZSBiZWVuIGFkZGVkLlxyXG4gKlxyXG4gKiBAcHJpdmF0ZSB7Ym9vbGVhbn1cclxuICovXG5SZXNpemVPYnNlcnZlckNvbnRyb2xsZXIucHJvdG90eXBlLmFkZE9ic2VydmVyID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgaWYgKCF+dGhpcy5vYnNlcnZlcnNfLmluZGV4T2Yob2JzZXJ2ZXIpKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzXy5wdXNoKG9ic2VydmVyKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgbGlzdGVuZXJzIGlmIHRoZXkgaGF2ZW4ndCBiZWVuIGFkZGVkIHlldC5cbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkXykge1xuICAgICAgICB0aGlzLmNvbm5lY3RfKCk7XG4gICAgfVxufTtcblxuLyoqXHJcbiAqIFJlbW92ZXMgb2JzZXJ2ZXIgZnJvbSBvYnNlcnZlcnMgbGlzdC5cclxuICpcclxuICogQHBhcmFtIHtSZXNpemVPYnNlcnZlclNQSX0gb2JzZXJ2ZXIgLSBPYnNlcnZlciB0byBiZSByZW1vdmVkLlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXG5SZXNpemVPYnNlcnZlckNvbnRyb2xsZXIucHJvdG90eXBlLnJlbW92ZU9ic2VydmVyID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzXztcbiAgICB2YXIgaW5kZXggPSBvYnNlcnZlcnMuaW5kZXhPZihvYnNlcnZlcik7XG5cbiAgICAvLyBSZW1vdmUgb2JzZXJ2ZXIgaWYgaXQncyBwcmVzZW50IGluIHJlZ2lzdHJ5LlxuICAgIGlmICh+aW5kZXgpIHtcbiAgICAgICAgb2JzZXJ2ZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGxpc3RlbmVycyBpZiBjb250cm9sbGVyIGhhcyBubyBjb25uZWN0ZWQgb2JzZXJ2ZXJzLlxuICAgIGlmICghb2JzZXJ2ZXJzLmxlbmd0aCAmJiB0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0XygpO1xuICAgIH1cbn07XG5cbi8qKlxyXG4gKiBJbnZva2VzIHRoZSB1cGRhdGUgb2Ygb2JzZXJ2ZXJzLiBJdCB3aWxsIGNvbnRpbnVlIHJ1bm5pbmcgdXBkYXRlcyBpbnNvZmFyXHJcbiAqIGl0IGRldGVjdHMgY2hhbmdlcy5cclxuICpcclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjaGFuZ2VzRGV0ZWN0ZWQgPSB0aGlzLnVwZGF0ZU9ic2VydmVyc18oKTtcblxuICAgIC8vIENvbnRpbnVlIHJ1bm5pbmcgdXBkYXRlcyBpZiBjaGFuZ2VzIGhhdmUgYmVlbiBkZXRlY3RlZCBhcyB0aGVyZSBtaWdodFxuICAgIC8vIGJlIGZ1dHVyZSBvbmVzIGNhdXNlZCBieSBDU1MgdHJhbnNpdGlvbnMuXG4gICAgaWYgKGNoYW5nZXNEZXRlY3RlZCkge1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG59O1xuXG4vKipcclxuICogVXBkYXRlcyBldmVyeSBvYnNlcnZlciBmcm9tIG9ic2VydmVycyBsaXN0IGFuZCBub3RpZmllcyB0aGVtIG9mIHF1ZXVlZFxyXG4gKiBlbnRyaWVzLlxyXG4gKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBcInRydWVcIiBpZiBhbnkgb2JzZXJ2ZXIgaGFzIGRldGVjdGVkIGNoYW5nZXMgaW5cclxuICogIGRpbWVuc2lvbnMgb2YgaXQncyBlbGVtZW50cy5cclxuICovXG5SZXNpemVPYnNlcnZlckNvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZU9ic2VydmVyc18gPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gQ29sbGVjdCBvYnNlcnZlcnMgdGhhdCBoYXZlIGFjdGl2ZSBvYnNlcnZhdGlvbnMuXG4gICAgdmFyIGFjdGl2ZU9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzXy5maWx0ZXIoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIHJldHVybiBvYnNlcnZlci5nYXRoZXJBY3RpdmUoKSwgb2JzZXJ2ZXIuaGFzQWN0aXZlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBEZWxpdmVyIG5vdGlmaWNhdGlvbnMgaW4gYSBzZXBhcmF0ZSBjeWNsZSBpbiBvcmRlciB0byBhdm9pZCBhbnlcbiAgICAvLyBjb2xsaXNpb25zIGJldHdlZW4gb2JzZXJ2ZXJzLCBlLmcuIHdoZW4gbXVsdGlwbGUgaW5zdGFuY2VzIG9mXG4gICAgLy8gUmVzaXplT2JzZXJ2ZXIgYXJlIHRyYWNraW5nIHRoZSBzYW1lIGVsZW1lbnQgYW5kIHRoZSBjYWxsYmFjayBvZiBvbmVcbiAgICAvLyBvZiB0aGVtIGNoYW5nZXMgY29udGVudCBkaW1lbnNpb25zIG9mIHRoZSBvYnNlcnZlZCB0YXJnZXQuIFNvbWV0aW1lc1xuICAgIC8vIHRoaXMgbWF5IHJlc3VsdCBpbiBub3RpZmljYXRpb25zIGJlaW5nIGJsb2NrZWQgZm9yIHRoZSByZXN0IG9mIG9ic2VydmVycy5cbiAgICBhY3RpdmVPYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIG9ic2VydmVyLmJyb2FkY2FzdEFjdGl2ZSgpOyB9KTtcblxuICAgIHJldHVybiBhY3RpdmVPYnNlcnZlcnMubGVuZ3RoID4gMDtcbn07XG5cbi8qKlxyXG4gKiBJbml0aWFsaXplcyBET00gbGlzdGVuZXJzLlxyXG4gKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXG5SZXNpemVPYnNlcnZlckNvbnRyb2xsZXIucHJvdG90eXBlLmNvbm5lY3RfID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIERvIG5vdGhpbmcgaWYgcnVubmluZyBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50IG9yIGlmIGxpc3RlbmVyc1xuICAgIC8vIGhhdmUgYmVlbiBhbHJlYWR5IGFkZGVkLlxuICAgIGlmICghaXNCcm93c2VyIHx8IHRoaXMuY29ubmVjdGVkXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU3Vic2NyaXB0aW9uIHRvIHRoZSBcIlRyYW5zaXRpb25lbmRcIiBldmVudCBpcyB1c2VkIGFzIGEgd29ya2Fyb3VuZCBmb3JcbiAgICAvLyBkZWxheWVkIHRyYW5zaXRpb25zLiBUaGlzIHdheSBpdCdzIHBvc3NpYmxlIHRvIGNhcHR1cmUgYXQgbGVhc3QgdGhlXG4gICAgLy8gZmluYWwgc3RhdGUgb2YgYW4gZWxlbWVudC5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgdGhpcy5vblRyYW5zaXRpb25FbmRfKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlZnJlc2gpO1xuXG4gICAgaWYgKG11dGF0aW9uT2JzZXJ2ZXJTdXBwb3J0ZWQpIHtcbiAgICAgICAgdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLnJlZnJlc2gpO1xuXG4gICAgICAgIHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfLm9ic2VydmUoZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxuICAgICAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01TdWJ0cmVlTW9kaWZpZWQnLCB0aGlzLnJlZnJlc2gpO1xuXG4gICAgICAgIHRoaXMubXV0YXRpb25FdmVudHNBZGRlZF8gPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuY29ubmVjdGVkXyA9IHRydWU7XG59O1xuXG4vKipcclxuICogUmVtb3ZlcyBET00gbGlzdGVuZXJzLlxyXG4gKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXG5SZXNpemVPYnNlcnZlckNvbnRyb2xsZXIucHJvdG90eXBlLmRpc2Nvbm5lY3RfID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIERvIG5vdGhpbmcgaWYgcnVubmluZyBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50IG9yIGlmIGxpc3RlbmVyc1xuICAgIC8vIGhhdmUgYmVlbiBhbHJlYWR5IHJlbW92ZWQuXG4gICAgaWYgKCFpc0Jyb3dzZXIgfHwgIXRoaXMuY29ubmVjdGVkXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRoaXMub25UcmFuc2l0aW9uRW5kXyk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVmcmVzaCk7XG5cbiAgICBpZiAodGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8pIHtcbiAgICAgICAgdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8uZGlzY29ubmVjdCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTVN1YnRyZWVNb2RpZmllZCcsIHRoaXMucmVmcmVzaCk7XG4gICAgfVxuXG4gICAgdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8gPSBudWxsO1xuICAgIHRoaXMubXV0YXRpb25FdmVudHNBZGRlZF8gPSBmYWxzZTtcbiAgICB0aGlzLmNvbm5lY3RlZF8gPSBmYWxzZTtcbn07XG5cbi8qKlxyXG4gKiBcIlRyYW5zaXRpb25lbmRcIiBldmVudCBoYW5kbGVyLlxyXG4gKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0ge1RyYW5zaXRpb25FdmVudH0gZXZlbnRcclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5vblRyYW5zaXRpb25FbmRfID0gZnVuY3Rpb24gKHJlZikge1xuICAgICAgICB2YXIgcHJvcGVydHlOYW1lID0gcmVmLnByb3BlcnR5TmFtZTsgaWYgKCBwcm9wZXJ0eU5hbWUgPT09IHZvaWQgMCApIHByb3BlcnR5TmFtZSA9ICcnO1xuXG4gICAgLy8gRGV0ZWN0IHdoZXRoZXIgdHJhbnNpdGlvbiBtYXkgYWZmZWN0IGRpbWVuc2lvbnMgb2YgYW4gZWxlbWVudC5cbiAgICB2YXIgaXNSZWZsb3dQcm9wZXJ0eSA9IHRyYW5zaXRpb25LZXlzLnNvbWUoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gISF+cHJvcGVydHlOYW1lLmluZGV4T2Yoa2V5KTtcbiAgICB9KTtcblxuICAgIGlmIChpc1JlZmxvd1Byb3BlcnR5KSB7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH1cbn07XG5cbi8qKlxyXG4gKiBSZXR1cm5zIGluc3RhbmNlIG9mIHRoZSBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtSZXNpemVPYnNlcnZlckNvbnRyb2xsZXJ9XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLmdldEluc3RhbmNlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pbnN0YW5jZV8pIHtcbiAgICAgICAgdGhpcy5pbnN0YW5jZV8gPSBuZXcgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VfO1xufTtcblxuUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLmluc3RhbmNlXyA9IG51bGw7XG5cbi8qKlxyXG4gKiBEZWZpbmVzIG5vbi13cml0YWJsZS9lbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgdGhlIHByb3ZpZGVkIHRhcmdldCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgLSBPYmplY3QgZm9yIHdoaWNoIHRvIGRlZmluZSBwcm9wZXJ0aWVzLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgLSBQcm9wZXJ0aWVzIHRvIGJlIGRlZmluZWQuXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFRhcmdldCBvYmplY3QuXHJcbiAqL1xudmFyIGRlZmluZUNvbmZpZ3VyYWJsZSA9IChmdW5jdGlvbiAodGFyZ2V0LCBwcm9wcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBsaXN0ID0gT2JqZWN0LmtleXMocHJvcHMpOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICB2YXIga2V5ID0gbGlzdFtpXTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHtcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wc1trZXldLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbn0pO1xuXG4vKipcclxuICogUmV0dXJucyB0aGUgZ2xvYmFsIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggcHJvdmlkZWQgZWxlbWVudC5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gKi9cbnZhciBnZXRXaW5kb3dPZiA9IChmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgLy8gQXNzdW1lIHRoYXQgdGhlIGVsZW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgTm9kZSwgd2hpY2ggbWVhbnMgdGhhdCBpdFxuICAgIC8vIGhhcyB0aGUgXCJvd25lckRvY3VtZW50XCIgcHJvcGVydHkgZnJvbSB3aGljaCB3ZSBjYW4gcmV0cmlldmUgYVxuICAgIC8vIGNvcnJlc3BvbmRpbmcgZ2xvYmFsIG9iamVjdC5cbiAgICB2YXIgb3duZXJHbG9iYWwgPSB0YXJnZXQgJiYgdGFyZ2V0Lm93bmVyRG9jdW1lbnQgJiYgdGFyZ2V0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG5cbiAgICAvLyBSZXR1cm4gdGhlIGxvY2FsIGdsb2JhbCBvYmplY3QgaWYgaXQncyBub3QgcG9zc2libGUgZXh0cmFjdCBvbmUgZnJvbVxuICAgIC8vIHByb3ZpZGVkIGVsZW1lbnQuXG4gICAgcmV0dXJuIG93bmVyR2xvYmFsIHx8IGdsb2JhbCQxO1xufSk7XG5cbi8vIFBsYWNlaG9sZGVyIG9mIGFuIGVtcHR5IGNvbnRlbnQgcmVjdGFuZ2xlLlxudmFyIGVtcHR5UmVjdCA9IGNyZWF0ZVJlY3RJbml0KDAsIDAsIDAsIDApO1xuXG4vKipcclxuICogQ29udmVydHMgcHJvdmlkZWQgc3RyaW5nIHRvIGEgbnVtYmVyLlxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHZhbHVlXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAqL1xuZnVuY3Rpb24gdG9GbG9hdCh2YWx1ZSkge1xuICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKSB8fCAwO1xufVxuXG4vKipcclxuICogRXh0cmFjdHMgYm9yZGVycyBzaXplIGZyb20gcHJvdmlkZWQgc3R5bGVzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0NTU1N0eWxlRGVjbGFyYXRpb259IHN0eWxlc1xyXG4gKiBAcGFyYW0gey4uLnN0cmluZ30gcG9zaXRpb25zIC0gQm9yZGVycyBwb3NpdGlvbnMgKHRvcCwgcmlnaHQsIC4uLilcclxuICogQHJldHVybnMge251bWJlcn1cclxuICovXG5mdW5jdGlvbiBnZXRCb3JkZXJzU2l6ZShzdHlsZXMpIHtcbiAgICB2YXIgcG9zaXRpb25zID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAxO1xuICAgIHdoaWxlICggbGVuLS0gPiAwICkgcG9zaXRpb25zWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuICsgMSBdO1xuXG4gICAgcmV0dXJuIHBvc2l0aW9ucy5yZWR1Y2UoZnVuY3Rpb24gKHNpemUsIHBvc2l0aW9uKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHN0eWxlc1snYm9yZGVyLScgKyBwb3NpdGlvbiArICctd2lkdGgnXTtcblxuICAgICAgICByZXR1cm4gc2l6ZSArIHRvRmxvYXQodmFsdWUpO1xuICAgIH0sIDApO1xufVxuXG4vKipcclxuICogRXh0cmFjdHMgcGFkZGluZ3Mgc2l6ZXMgZnJvbSBwcm92aWRlZCBzdHlsZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Q1NTU3R5bGVEZWNsYXJhdGlvbn0gc3R5bGVzXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFBhZGRpbmdzIGJveC5cclxuICovXG5mdW5jdGlvbiBnZXRQYWRkaW5ncyhzdHlsZXMpIHtcbiAgICB2YXIgcG9zaXRpb25zID0gWyd0b3AnLCAncmlnaHQnLCAnYm90dG9tJywgJ2xlZnQnXTtcbiAgICB2YXIgcGFkZGluZ3MgPSB7fTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsaXN0ID0gcG9zaXRpb25zOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICB2YXIgcG9zaXRpb24gPSBsaXN0W2ldO1xuXG4gICAgICAgIHZhciB2YWx1ZSA9IHN0eWxlc1sncGFkZGluZy0nICsgcG9zaXRpb25dO1xuXG4gICAgICAgIHBhZGRpbmdzW3Bvc2l0aW9uXSA9IHRvRmxvYXQodmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBwYWRkaW5ncztcbn1cblxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgY29udGVudCByZWN0YW5nbGUgb2YgcHJvdmlkZWQgU1ZHIGVsZW1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U1ZHR3JhcGhpY3NFbGVtZW50fSB0YXJnZXQgLSBFbGVtZW50IGNvbnRlbnQgcmVjdGFuZ2xlIG9mIHdoaWNoIG5lZWRzXHJcbiAqICAgICAgdG8gYmUgY2FsY3VsYXRlZC5cclxuICogQHJldHVybnMge0RPTVJlY3RJbml0fVxyXG4gKi9cbmZ1bmN0aW9uIGdldFNWR0NvbnRlbnRSZWN0KHRhcmdldCkge1xuICAgIHZhciBiYm94ID0gdGFyZ2V0LmdldEJCb3goKTtcblxuICAgIHJldHVybiBjcmVhdGVSZWN0SW5pdCgwLCAwLCBiYm94LndpZHRoLCBiYm94LmhlaWdodCk7XG59XG5cbi8qKlxyXG4gKiBDYWxjdWxhdGVzIGNvbnRlbnQgcmVjdGFuZ2xlIG9mIHByb3ZpZGVkIEhUTUxFbGVtZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgLSBFbGVtZW50IGZvciB3aGljaCB0byBjYWxjdWxhdGUgdGhlIGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG4gKiBAcmV0dXJucyB7RE9NUmVjdEluaXR9XHJcbiAqL1xuZnVuY3Rpb24gZ2V0SFRNTEVsZW1lbnRDb250ZW50UmVjdCh0YXJnZXQpIHtcbiAgICAvLyBDbGllbnQgd2lkdGggJiBoZWlnaHQgcHJvcGVydGllcyBjYW4ndCBiZVxuICAgIC8vIHVzZWQgZXhjbHVzaXZlbHkgYXMgdGhleSBwcm92aWRlIHJvdW5kZWQgdmFsdWVzLlxuICAgIHZhciBjbGllbnRXaWR0aCA9IHRhcmdldC5jbGllbnRXaWR0aDtcbiAgICB2YXIgY2xpZW50SGVpZ2h0ID0gdGFyZ2V0LmNsaWVudEhlaWdodDtcblxuICAgIC8vIEJ5IHRoaXMgY29uZGl0aW9uIHdlIGNhbiBjYXRjaCBhbGwgbm9uLXJlcGxhY2VkIGlubGluZSwgaGlkZGVuIGFuZFxuICAgIC8vIGRldGFjaGVkIGVsZW1lbnRzLiBUaG91Z2ggZWxlbWVudHMgd2l0aCB3aWR0aCAmIGhlaWdodCBwcm9wZXJ0aWVzIGxlc3NcbiAgICAvLyB0aGFuIDAuNSB3aWxsIGJlIGRpc2NhcmRlZCBhcyB3ZWxsLlxuICAgIC8vXG4gICAgLy8gV2l0aG91dCBpdCB3ZSB3b3VsZCBuZWVkIHRvIGltcGxlbWVudCBzZXBhcmF0ZSBtZXRob2RzIGZvciBlYWNoIG9mXG4gICAgLy8gdGhvc2UgY2FzZXMgYW5kIGl0J3Mgbm90IHBvc3NpYmxlIHRvIHBlcmZvcm0gYSBwcmVjaXNlIGFuZCBwZXJmb3JtYW5jZVxuICAgIC8vIGVmZmVjdGl2ZSB0ZXN0IGZvciBoaWRkZW4gZWxlbWVudHMuIEUuZy4gZXZlbiBqUXVlcnkncyAnOnZpc2libGUnIGZpbHRlclxuICAgIC8vIGdpdmVzIHdyb25nIHJlc3VsdHMgZm9yIGVsZW1lbnRzIHdpdGggd2lkdGggJiBoZWlnaHQgbGVzcyB0aGFuIDAuNS5cbiAgICBpZiAoIWNsaWVudFdpZHRoICYmICFjbGllbnRIZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIGVtcHR5UmVjdDtcbiAgICB9XG5cbiAgICB2YXIgc3R5bGVzID0gZ2V0V2luZG93T2YodGFyZ2V0KS5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCk7XG4gICAgdmFyIHBhZGRpbmdzID0gZ2V0UGFkZGluZ3Moc3R5bGVzKTtcbiAgICB2YXIgaG9yaXpQYWQgPSBwYWRkaW5ncy5sZWZ0ICsgcGFkZGluZ3MucmlnaHQ7XG4gICAgdmFyIHZlcnRQYWQgPSBwYWRkaW5ncy50b3AgKyBwYWRkaW5ncy5ib3R0b207XG5cbiAgICAvLyBDb21wdXRlZCBzdHlsZXMgb2Ygd2lkdGggJiBoZWlnaHQgYXJlIGJlaW5nIHVzZWQgYmVjYXVzZSB0aGV5IGFyZSB0aGVcbiAgICAvLyBvbmx5IGRpbWVuc2lvbnMgYXZhaWxhYmxlIHRvIEpTIHRoYXQgY29udGFpbiBub24tcm91bmRlZCB2YWx1ZXMuIEl0IGNvdWxkXG4gICAgLy8gYmUgcG9zc2libGUgdG8gdXRpbGl6ZSB0aGUgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGlmIG9ubHkgaXQncyBkYXRhIHdhc24ndFxuICAgIC8vIGFmZmVjdGVkIGJ5IENTUyB0cmFuc2Zvcm1hdGlvbnMgbGV0IGFsb25lIHBhZGRpbmdzLCBib3JkZXJzIGFuZCBzY3JvbGwgYmFycy5cbiAgICB2YXIgd2lkdGggPSB0b0Zsb2F0KHN0eWxlcy53aWR0aCksXG4gICAgICAgIGhlaWdodCA9IHRvRmxvYXQoc3R5bGVzLmhlaWdodCk7XG5cbiAgICAvLyBXaWR0aCAmIGhlaWdodCBpbmNsdWRlIHBhZGRpbmdzIGFuZCBib3JkZXJzIHdoZW4gdGhlICdib3JkZXItYm94JyBib3hcbiAgICAvLyBtb2RlbCBpcyBhcHBsaWVkIChleGNlcHQgZm9yIElFKS5cbiAgICBpZiAoc3R5bGVzLmJveFNpemluZyA9PT0gJ2JvcmRlci1ib3gnKSB7XG4gICAgICAgIC8vIEZvbGxvd2luZyBjb25kaXRpb25zIGFyZSByZXF1aXJlZCB0byBoYW5kbGUgSW50ZXJuZXQgRXhwbG9yZXIgd2hpY2hcbiAgICAgICAgLy8gZG9lc24ndCBpbmNsdWRlIHBhZGRpbmdzIGFuZCBib3JkZXJzIHRvIGNvbXB1dGVkIENTUyBkaW1lbnNpb25zLlxuICAgICAgICAvL1xuICAgICAgICAvLyBXZSBjYW4gc2F5IHRoYXQgaWYgQ1NTIGRpbWVuc2lvbnMgKyBwYWRkaW5ncyBhcmUgZXF1YWwgdG8gdGhlIFwiY2xpZW50XCJcbiAgICAgICAgLy8gcHJvcGVydGllcyB0aGVuIGl0J3MgZWl0aGVyIElFLCBhbmQgdGh1cyB3ZSBkb24ndCBuZWVkIHRvIHN1YnRyYWN0XG4gICAgICAgIC8vIGFueXRoaW5nLCBvciBhbiBlbGVtZW50IG1lcmVseSBkb2Vzbid0IGhhdmUgcGFkZGluZ3MvYm9yZGVycyBzdHlsZXMuXG4gICAgICAgIGlmIChNYXRoLnJvdW5kKHdpZHRoICsgaG9yaXpQYWQpICE9PSBjbGllbnRXaWR0aCkge1xuICAgICAgICAgICAgd2lkdGggLT0gZ2V0Qm9yZGVyc1NpemUoc3R5bGVzLCAnbGVmdCcsICdyaWdodCcpICsgaG9yaXpQYWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoTWF0aC5yb3VuZChoZWlnaHQgKyB2ZXJ0UGFkKSAhPT0gY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgICAgICBoZWlnaHQgLT0gZ2V0Qm9yZGVyc1NpemUoc3R5bGVzLCAndG9wJywgJ2JvdHRvbScpICsgdmVydFBhZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvbGxvd2luZyBzdGVwcyBjYW4ndCBiZSBhcHBsaWVkIHRvIHRoZSBkb2N1bWVudCdzIHJvb3QgZWxlbWVudCBhcyBpdHNcbiAgICAvLyBjbGllbnRbV2lkdGgvSGVpZ2h0XSBwcm9wZXJ0aWVzIHJlcHJlc2VudCB2aWV3cG9ydCBhcmVhIG9mIHRoZSB3aW5kb3cuXG4gICAgLy8gQmVzaWRlcywgaXQncyBhcyB3ZWxsIG5vdCBuZWNlc3NhcnkgYXMgdGhlIDxodG1sPiBpdHNlbGYgbmVpdGhlciBoYXNcbiAgICAvLyByZW5kZXJlZCBzY3JvbGwgYmFycyBub3IgaXQgY2FuIGJlIGNsaXBwZWQuXG4gICAgaWYgKCFpc0RvY3VtZW50RWxlbWVudCh0YXJnZXQpKSB7XG4gICAgICAgIC8vIEluIHNvbWUgYnJvd3NlcnMgKG9ubHkgaW4gRmlyZWZveCwgYWN0dWFsbHkpIENTUyB3aWR0aCAmIGhlaWdodFxuICAgICAgICAvLyBpbmNsdWRlIHNjcm9sbCBiYXJzIHNpemUgd2hpY2ggY2FuIGJlIHJlbW92ZWQgYXQgdGhpcyBzdGVwIGFzIHNjcm9sbFxuICAgICAgICAvLyBiYXJzIGFyZSB0aGUgb25seSBkaWZmZXJlbmNlIGJldHdlZW4gcm91bmRlZCBkaW1lbnNpb25zICsgcGFkZGluZ3NcbiAgICAgICAgLy8gYW5kIFwiY2xpZW50XCIgcHJvcGVydGllcywgdGhvdWdoIHRoYXQgaXMgbm90IGFsd2F5cyB0cnVlIGluIENocm9tZS5cbiAgICAgICAgdmFyIHZlcnRTY3JvbGxiYXIgPSBNYXRoLnJvdW5kKHdpZHRoICsgaG9yaXpQYWQpIC0gY2xpZW50V2lkdGg7XG4gICAgICAgIHZhciBob3JpelNjcm9sbGJhciA9IE1hdGgucm91bmQoaGVpZ2h0ICsgdmVydFBhZCkgLSBjbGllbnRIZWlnaHQ7XG5cbiAgICAgICAgLy8gQ2hyb21lIGhhcyBhIHJhdGhlciB3ZWlyZCByb3VuZGluZyBvZiBcImNsaWVudFwiIHByb3BlcnRpZXMuXG4gICAgICAgIC8vIEUuZy4gZm9yIGFuIGVsZW1lbnQgd2l0aCBjb250ZW50IHdpZHRoIG9mIDMxNC4ycHggaXQgc29tZXRpbWVzIGdpdmVzXG4gICAgICAgIC8vIHRoZSBjbGllbnQgd2lkdGggb2YgMzE1cHggYW5kIGZvciB0aGUgd2lkdGggb2YgMzE0LjdweCBpdCBtYXkgZ2l2ZVxuICAgICAgICAvLyAzMTRweC4gQW5kIGl0IGRvZXNuJ3QgaGFwcGVuIGFsbCB0aGUgdGltZS4gU28ganVzdCBpZ25vcmUgdGhpcyBkZWx0YVxuICAgICAgICAvLyBhcyBhIG5vbi1yZWxldmFudC5cbiAgICAgICAgaWYgKE1hdGguYWJzKHZlcnRTY3JvbGxiYXIpICE9PSAxKSB7XG4gICAgICAgICAgICB3aWR0aCAtPSB2ZXJ0U2Nyb2xsYmFyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKE1hdGguYWJzKGhvcml6U2Nyb2xsYmFyKSAhPT0gMSkge1xuICAgICAgICAgICAgaGVpZ2h0IC09IGhvcml6U2Nyb2xsYmFyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNyZWF0ZVJlY3RJbml0KHBhZGRpbmdzLmxlZnQsIHBhZGRpbmdzLnRvcCwgd2lkdGgsIGhlaWdodCk7XG59XG5cbi8qKlxyXG4gKiBDaGVja3Mgd2hldGhlciBwcm92aWRlZCBlbGVtZW50IGlzIGFuIGluc3RhbmNlIG9mIHRoZSBTVkdHcmFwaGljc0VsZW1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IC0gRWxlbWVudCB0byBiZSBjaGVja2VkLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXG52YXIgaXNTVkdHcmFwaGljc0VsZW1lbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFNvbWUgYnJvd3NlcnMsIG5hbWVseSBJRSBhbmQgRWRnZSwgZG9uJ3QgaGF2ZSB0aGUgU1ZHR3JhcGhpY3NFbGVtZW50XG4gICAgLy8gaW50ZXJmYWNlLlxuICAgIGlmICh0eXBlb2YgU1ZHR3JhcGhpY3NFbGVtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkgeyByZXR1cm4gdGFyZ2V0IGluc3RhbmNlb2YgZ2V0V2luZG93T2YodGFyZ2V0KS5TVkdHcmFwaGljc0VsZW1lbnQ7IH07XG4gICAgfVxuXG4gICAgLy8gSWYgaXQncyBzbywgdGhlbiBjaGVjayB0aGF0IGVsZW1lbnQgaXMgYXQgbGVhc3QgYW4gaW5zdGFuY2Ugb2YgdGhlXG4gICAgLy8gU1ZHRWxlbWVudCBhbmQgdGhhdCBpdCBoYXMgdGhlIFwiZ2V0QkJveFwiIG1ldGhvZC5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZXh0cmEtcGFyZW5zXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQpIHsgcmV0dXJuIHRhcmdldCBpbnN0YW5jZW9mIGdldFdpbmRvd09mKHRhcmdldCkuU1ZHRWxlbWVudCAmJiB0eXBlb2YgdGFyZ2V0LmdldEJCb3ggPT09ICdmdW5jdGlvbic7IH07XG59KSgpO1xuXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgcHJvdmlkZWQgZWxlbWVudCBpcyBhIGRvY3VtZW50IGVsZW1lbnQgKDxodG1sPikuXHJcbiAqXHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IC0gRWxlbWVudCB0byBiZSBjaGVja2VkLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXG5mdW5jdGlvbiBpc0RvY3VtZW50RWxlbWVudCh0YXJnZXQpIHtcbiAgICByZXR1cm4gdGFyZ2V0ID09PSBnZXRXaW5kb3dPZih0YXJnZXQpLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbn1cblxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgYW4gYXBwcm9wcmlhdGUgY29udGVudCByZWN0YW5nbGUgZm9yIHByb3ZpZGVkIGh0bWwgb3Igc3ZnIGVsZW1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IC0gRWxlbWVudCBjb250ZW50IHJlY3RhbmdsZSBvZiB3aGljaCBuZWVkcyB0byBiZSBjYWxjdWxhdGVkLlxyXG4gKiBAcmV0dXJucyB7RE9NUmVjdEluaXR9XHJcbiAqL1xuZnVuY3Rpb24gZ2V0Q29udGVudFJlY3QodGFyZ2V0KSB7XG4gICAgaWYgKCFpc0Jyb3dzZXIpIHtcbiAgICAgICAgcmV0dXJuIGVtcHR5UmVjdDtcbiAgICB9XG5cbiAgICBpZiAoaXNTVkdHcmFwaGljc0VsZW1lbnQodGFyZ2V0KSkge1xuICAgICAgICByZXR1cm4gZ2V0U1ZHQ29udGVudFJlY3QodGFyZ2V0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2V0SFRNTEVsZW1lbnRDb250ZW50UmVjdCh0YXJnZXQpO1xufVxuXG4vKipcclxuICogQ3JlYXRlcyByZWN0YW5nbGUgd2l0aCBhbiBpbnRlcmZhY2Ugb2YgdGhlIERPTVJlY3RSZWFkT25seS5cclxuICogU3BlYzogaHR0cHM6Ly9kcmFmdHMuZnh0Zi5vcmcvZ2VvbWV0cnkvI2RvbXJlY3RyZWFkb25seVxyXG4gKlxyXG4gKiBAcGFyYW0ge0RPTVJlY3RJbml0fSByZWN0SW5pdCAtIE9iamVjdCB3aXRoIHJlY3RhbmdsZSdzIHgveSBjb29yZGluYXRlcyBhbmQgZGltZW5zaW9ucy5cclxuICogQHJldHVybnMge0RPTVJlY3RSZWFkT25seX1cclxuICovXG5mdW5jdGlvbiBjcmVhdGVSZWFkT25seVJlY3QocmVmKSB7XG4gICAgdmFyIHggPSByZWYueDtcbiAgICB2YXIgeSA9IHJlZi55O1xuICAgIHZhciB3aWR0aCA9IHJlZi53aWR0aDtcbiAgICB2YXIgaGVpZ2h0ID0gcmVmLmhlaWdodDtcblxuICAgIC8vIElmIERPTVJlY3RSZWFkT25seSBpcyBhdmFpbGFibGUgdXNlIGl0IGFzIGEgcHJvdG90eXBlIGZvciB0aGUgcmVjdGFuZ2xlLlxuICAgIHZhciBDb25zdHIgPSB0eXBlb2YgRE9NUmVjdFJlYWRPbmx5ICE9PSAndW5kZWZpbmVkJyA/IERPTVJlY3RSZWFkT25seSA6IE9iamVjdDtcbiAgICB2YXIgcmVjdCA9IE9iamVjdC5jcmVhdGUoQ29uc3RyLnByb3RvdHlwZSk7XG5cbiAgICAvLyBSZWN0YW5nbGUncyBwcm9wZXJ0aWVzIGFyZSBub3Qgd3JpdGFibGUgYW5kIG5vbi1lbnVtZXJhYmxlLlxuICAgIGRlZmluZUNvbmZpZ3VyYWJsZShyZWN0LCB7XG4gICAgICAgIHg6IHgsIHk6IHksIHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgIHRvcDogeSxcbiAgICAgICAgcmlnaHQ6IHggKyB3aWR0aCxcbiAgICAgICAgYm90dG9tOiBoZWlnaHQgKyB5LFxuICAgICAgICBsZWZ0OiB4XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVjdDtcbn1cblxuLyoqXHJcbiAqIENyZWF0ZXMgRE9NUmVjdEluaXQgb2JqZWN0IGJhc2VkIG9uIHRoZSBwcm92aWRlZCBkaW1lbnNpb25zIGFuZCB0aGUgeC95IGNvb3JkaW5hdGVzLlxyXG4gKiBTcGVjOiBodHRwczovL2RyYWZ0cy5meHRmLm9yZy9nZW9tZXRyeS8jZGljdGRlZi1kb21yZWN0aW5pdFxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0geCAtIFggY29vcmRpbmF0ZS5cclxuICogQHBhcmFtIHtudW1iZXJ9IHkgLSBZIGNvb3JkaW5hdGUuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIFJlY3RhbmdsZSdzIHdpZHRoLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IC0gUmVjdGFuZ2xlJ3MgaGVpZ2h0LlxyXG4gKiBAcmV0dXJucyB7RE9NUmVjdEluaXR9XHJcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUmVjdEluaXQoeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgIHJldHVybiB7IHg6IHgsIHk6IHksIHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfTtcbn1cblxuLyoqXHJcbiAqIENsYXNzIHRoYXQgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGF0aW9ucyBvZiB0aGUgY29udGVudCByZWN0YW5nbGUgb2ZcclxuICogcHJvdmlkZWQgRE9NIGVsZW1lbnQgYW5kIGZvciBrZWVwaW5nIHRyYWNrIG9mIGl0J3MgY2hhbmdlcy5cclxuICovXG52YXIgUmVzaXplT2JzZXJ2YXRpb24gPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICB0aGlzLmJyb2FkY2FzdFdpZHRoID0gMDtcbiAgICB0aGlzLmJyb2FkY2FzdEhlaWdodCA9IDA7XG4gICAgdGhpcy5jb250ZW50UmVjdF8gPSBjcmVhdGVSZWN0SW5pdCgwLCAwLCAwLCAwKTtcblxuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xufTtcblxuLyoqXHJcbiAqIFVwZGF0ZXMgY29udGVudCByZWN0YW5nbGUgYW5kIHRlbGxzIHdoZXRoZXIgaXQncyB3aWR0aCBvciBoZWlnaHQgcHJvcGVydGllc1xyXG4gKiBoYXZlIGNoYW5nZWQgc2luY2UgdGhlIGxhc3QgYnJvYWRjYXN0LlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXG5cblxuLyoqXHJcbiAqIFJlZmVyZW5jZSB0byB0aGUgbGFzdCBvYnNlcnZlZCBjb250ZW50IHJlY3RhbmdsZS5cclxuICpcclxuICogQHByaXZhdGUge0RPTVJlY3RJbml0fVxyXG4gKi9cblxuXG4vKipcclxuICogQnJvYWRjYXN0ZWQgd2lkdGggb2YgY29udGVudCByZWN0YW5nbGUuXHJcbiAqXHJcbiAqIEB0eXBlIHtudW1iZXJ9XHJcbiAqL1xuUmVzaXplT2JzZXJ2YXRpb24ucHJvdG90eXBlLmlzQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZWN0ID0gZ2V0Q29udGVudFJlY3QodGhpcy50YXJnZXQpO1xuXG4gICAgdGhpcy5jb250ZW50UmVjdF8gPSByZWN0O1xuXG4gICAgcmV0dXJuIHJlY3Qud2lkdGggIT09IHRoaXMuYnJvYWRjYXN0V2lkdGggfHwgcmVjdC5oZWlnaHQgIT09IHRoaXMuYnJvYWRjYXN0SGVpZ2h0O1xufTtcblxuLyoqXHJcbiAqIFVwZGF0ZXMgJ2Jyb2FkY2FzdFdpZHRoJyBhbmQgJ2Jyb2FkY2FzdEhlaWdodCcgcHJvcGVydGllcyB3aXRoIGEgZGF0YVxyXG4gKiBmcm9tIHRoZSBjb3JyZXNwb25kaW5nIHByb3BlcnRpZXMgb2YgdGhlIGxhc3Qgb2JzZXJ2ZWQgY29udGVudCByZWN0YW5nbGUuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtET01SZWN0SW5pdH0gTGFzdCBvYnNlcnZlZCBjb250ZW50IHJlY3RhbmdsZS5cclxuICovXG5SZXNpemVPYnNlcnZhdGlvbi5wcm90b3R5cGUuYnJvYWRjYXN0UmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVjdCA9IHRoaXMuY29udGVudFJlY3RfO1xuXG4gICAgdGhpcy5icm9hZGNhc3RXaWR0aCA9IHJlY3Qud2lkdGg7XG4gICAgdGhpcy5icm9hZGNhc3RIZWlnaHQgPSByZWN0LmhlaWdodDtcblxuICAgIHJldHVybiByZWN0O1xufTtcblxudmFyIFJlc2l6ZU9ic2VydmVyRW50cnkgPSBmdW5jdGlvbih0YXJnZXQsIHJlY3RJbml0KSB7XG4gICAgdmFyIGNvbnRlbnRSZWN0ID0gY3JlYXRlUmVhZE9ubHlSZWN0KHJlY3RJbml0KTtcblxuICAgIC8vIEFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbiBmb2xsb3dpbmcgcHJvcGVydGllcyBhcmUgbm90IHdyaXRhYmxlXG4gICAgLy8gYW5kIGFyZSBhbHNvIG5vdCBlbnVtZXJhYmxlIGluIHRoZSBuYXRpdmUgaW1wbGVtZW50YXRpb24uXG4gICAgLy9cbiAgICAvLyBQcm9wZXJ0eSBhY2Nlc3NvcnMgYXJlIG5vdCBiZWluZyB1c2VkIGFzIHRoZXknZCByZXF1aXJlIHRvIGRlZmluZSBhXG4gICAgLy8gcHJpdmF0ZSBXZWFrTWFwIHN0b3JhZ2Ugd2hpY2ggbWF5IGNhdXNlIG1lbW9yeSBsZWFrcyBpbiBicm93c2VycyB0aGF0XG4gICAgLy8gZG9uJ3Qgc3VwcG9ydCB0aGlzIHR5cGUgb2YgY29sbGVjdGlvbnMuXG4gICAgZGVmaW5lQ29uZmlndXJhYmxlKHRoaXMsIHsgdGFyZ2V0OiB0YXJnZXQsIGNvbnRlbnRSZWN0OiBjb250ZW50UmVjdCB9KTtcbn07XG5cbnZhciBSZXNpemVPYnNlcnZlclNQSSA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBjb250cm9sbGVyLCBjYWxsYmFja0N0eCkge1xuICAgIHRoaXMuYWN0aXZlT2JzZXJ2YXRpb25zXyA9IFtdO1xuICAgIHRoaXMub2JzZXJ2YXRpb25zXyA9IG5ldyBNYXBTaGltKCk7XG5cbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBjYWxsYmFjayBwcm92aWRlZCBhcyBwYXJhbWV0ZXIgMSBpcyBub3QgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICB0aGlzLmNhbGxiYWNrXyA9IGNhbGxiYWNrO1xuICAgIHRoaXMuY29udHJvbGxlcl8gPSBjb250cm9sbGVyO1xuICAgIHRoaXMuY2FsbGJhY2tDdHhfID0gY2FsbGJhY2tDdHg7XG59O1xuXG4vKipcclxuICogU3RhcnRzIG9ic2VydmluZyBwcm92aWRlZCBlbGVtZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgdG8gYmUgb2JzZXJ2ZWQuXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cblxuXG4vKipcclxuICogUmVnaXN0cnkgb2YgdGhlIFJlc2l6ZU9ic2VydmF0aW9uIGluc3RhbmNlcy5cclxuICpcclxuICogQHByaXZhdGUge01hcDxFbGVtZW50LCBSZXNpemVPYnNlcnZhdGlvbj59XHJcbiAqL1xuXG5cbi8qKlxyXG4gKiBQdWJsaWMgUmVzaXplT2JzZXJ2ZXIgaW5zdGFuY2Ugd2hpY2ggd2lsbCBiZSBwYXNzZWQgdG8gdGhlIGNhbGxiYWNrXHJcbiAqIGZ1bmN0aW9uIGFuZCB1c2VkIGFzIGEgdmFsdWUgb2YgaXQncyBcInRoaXNcIiBiaW5kaW5nLlxyXG4gKlxyXG4gKiBAcHJpdmF0ZSB7UmVzaXplT2JzZXJ2ZXJ9XHJcbiAqL1xuXG4vKipcclxuICogQ29sbGVjdGlvbiBvZiByZXNpemUgb2JzZXJ2YXRpb25zIHRoYXQgaGF2ZSBkZXRlY3RlZCBjaGFuZ2VzIGluIGRpbWVuc2lvbnNcclxuICogb2YgZWxlbWVudHMuXHJcbiAqXHJcbiAqIEBwcml2YXRlIHtBcnJheTxSZXNpemVPYnNlcnZhdGlvbj59XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJzEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC4nKTtcbiAgICB9XG5cbiAgICAvLyBEbyBub3RoaW5nIGlmIGN1cnJlbnQgZW52aXJvbm1lbnQgZG9lc24ndCBoYXZlIHRoZSBFbGVtZW50IGludGVyZmFjZS5cbiAgICBpZiAodHlwZW9mIEVsZW1lbnQgPT09ICd1bmRlZmluZWQnIHx8ICEoRWxlbWVudCBpbnN0YW5jZW9mIE9iamVjdCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIGdldFdpbmRvd09mKHRhcmdldCkuRWxlbWVudCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgXCJFbGVtZW50XCIuJyk7XG4gICAgfVxuXG4gICAgdmFyIG9ic2VydmF0aW9ucyA9IHRoaXMub2JzZXJ2YXRpb25zXztcblxuICAgIC8vIERvIG5vdGhpbmcgaWYgZWxlbWVudCBpcyBhbHJlYWR5IGJlaW5nIG9ic2VydmVkLlxuICAgIGlmIChvYnNlcnZhdGlvbnMuaGFzKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG9ic2VydmF0aW9ucy5zZXQodGFyZ2V0LCBuZXcgUmVzaXplT2JzZXJ2YXRpb24odGFyZ2V0KSk7XG5cbiAgICB0aGlzLmNvbnRyb2xsZXJfLmFkZE9ic2VydmVyKHRoaXMpO1xuXG4gICAgLy8gRm9yY2UgdGhlIHVwZGF0ZSBvZiBvYnNlcnZhdGlvbnMuXG4gICAgdGhpcy5jb250cm9sbGVyXy5yZWZyZXNoKCk7XG59O1xuXG4vKipcclxuICogU3RvcHMgb2JzZXJ2aW5nIHByb3ZpZGVkIGVsZW1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IC0gRWxlbWVudCB0byBzdG9wIG9ic2VydmluZy5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xuUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLnVub2JzZXJ2ZSA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50LicpO1xuICAgIH1cblxuICAgIC8vIERvIG5vdGhpbmcgaWYgY3VycmVudCBlbnZpcm9ubWVudCBkb2Vzbid0IGhhdmUgdGhlIEVsZW1lbnQgaW50ZXJmYWNlLlxuICAgIGlmICh0eXBlb2YgRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgIShFbGVtZW50IGluc3RhbmNlb2YgT2JqZWN0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgZ2V0V2luZG93T2YodGFyZ2V0KS5FbGVtZW50KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwYXJhbWV0ZXIgMSBpcyBub3Qgb2YgdHlwZSBcIkVsZW1lbnRcIi4nKTtcbiAgICB9XG5cbiAgICB2YXIgb2JzZXJ2YXRpb25zID0gdGhpcy5vYnNlcnZhdGlvbnNfO1xuXG4gICAgLy8gRG8gbm90aGluZyBpZiBlbGVtZW50IGlzIG5vdCBiZWluZyBvYnNlcnZlZC5cbiAgICBpZiAoIW9ic2VydmF0aW9ucy5oYXModGFyZ2V0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgb2JzZXJ2YXRpb25zLmRlbGV0ZSh0YXJnZXQpO1xuXG4gICAgaWYgKCFvYnNlcnZhdGlvbnMuc2l6ZSkge1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXJfLnJlbW92ZU9ic2VydmVyKHRoaXMpO1xuICAgIH1cbn07XG5cbi8qKlxyXG4gKiBTdG9wcyBvYnNlcnZpbmcgYWxsIGVsZW1lbnRzLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXG5SZXNpemVPYnNlcnZlclNQSS5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNsZWFyQWN0aXZlKCk7XG4gICAgdGhpcy5vYnNlcnZhdGlvbnNfLmNsZWFyKCk7XG4gICAgdGhpcy5jb250cm9sbGVyXy5yZW1vdmVPYnNlcnZlcih0aGlzKTtcbn07XG5cbi8qKlxyXG4gKiBDb2xsZWN0cyBvYnNlcnZhdGlvbiBpbnN0YW5jZXMgdGhlIGFzc29jaWF0ZWQgZWxlbWVudCBvZiB3aGljaCBoYXMgY2hhbmdlZFxyXG4gKiBpdCdzIGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXG5SZXNpemVPYnNlcnZlclNQSS5wcm90b3R5cGUuZ2F0aGVyQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHRoaXMuY2xlYXJBY3RpdmUoKTtcblxuICAgIHRoaXMub2JzZXJ2YXRpb25zXy5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZhdGlvbikge1xuICAgICAgICBpZiAob2JzZXJ2YXRpb24uaXNBY3RpdmUoKSkge1xuICAgICAgICAgICAgdGhpcyQxLmFjdGl2ZU9ic2VydmF0aW9uc18ucHVzaChvYnNlcnZhdGlvbik7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbi8qKlxyXG4gKiBJbnZva2VzIGluaXRpYWwgY2FsbGJhY2sgZnVuY3Rpb24gd2l0aCBhIGxpc3Qgb2YgUmVzaXplT2JzZXJ2ZXJFbnRyeVxyXG4gKiBpbnN0YW5jZXMgY29sbGVjdGVkIGZyb20gYWN0aXZlIHJlc2l6ZSBvYnNlcnZhdGlvbnMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cblJlc2l6ZU9ic2VydmVyU1BJLnByb3RvdHlwZS5icm9hZGNhc3RBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gRG8gbm90aGluZyBpZiBvYnNlcnZlciBkb2Vzbid0IGhhdmUgYWN0aXZlIG9ic2VydmF0aW9ucy5cbiAgICBpZiAoIXRoaXMuaGFzQWN0aXZlKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjdHggPSB0aGlzLmNhbGxiYWNrQ3R4XztcblxuICAgIC8vIENyZWF0ZSBSZXNpemVPYnNlcnZlckVudHJ5IGluc3RhbmNlIGZvciBldmVyeSBhY3RpdmUgb2JzZXJ2YXRpb24uXG4gICAgdmFyIGVudHJpZXMgPSB0aGlzLmFjdGl2ZU9ic2VydmF0aW9uc18ubWFwKGZ1bmN0aW9uIChvYnNlcnZhdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IFJlc2l6ZU9ic2VydmVyRW50cnkob2JzZXJ2YXRpb24udGFyZ2V0LCBvYnNlcnZhdGlvbi5icm9hZGNhc3RSZWN0KCkpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jYWxsYmFja18uY2FsbChjdHgsIGVudHJpZXMsIGN0eCk7XG4gICAgdGhpcy5jbGVhckFjdGl2ZSgpO1xufTtcblxuLyoqXHJcbiAqIENsZWFycyB0aGUgY29sbGVjdGlvbiBvZiBhY3RpdmUgb2JzZXJ2YXRpb25zLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXG5SZXNpemVPYnNlcnZlclNQSS5wcm90b3R5cGUuY2xlYXJBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hY3RpdmVPYnNlcnZhdGlvbnNfLnNwbGljZSgwKTtcbn07XG5cbi8qKlxyXG4gKiBUZWxscyB3aGV0aGVyIG9ic2VydmVyIGhhcyBhY3RpdmUgb2JzZXJ2YXRpb25zLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXG5SZXNpemVPYnNlcnZlclNQSS5wcm90b3R5cGUuaGFzQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdGl2ZU9ic2VydmF0aW9uc18ubGVuZ3RoID4gMDtcbn07XG5cbi8vIFJlZ2lzdHJ5IG9mIGludGVybmFsIG9ic2VydmVycy4gSWYgV2Vha01hcCBpcyBub3QgYXZhaWxhYmxlIHVzZSBjdXJyZW50IHNoaW1cbi8vIGZvciB0aGUgTWFwIGNvbGxlY3Rpb24gYXMgaXQgaGFzIGFsbCByZXF1aXJlZCBtZXRob2RzIGFuZCBiZWNhdXNlIFdlYWtNYXBcbi8vIGNhbid0IGJlIGZ1bGx5IHBvbHlmaWxsZWQgYW55d2F5LlxudmFyIG9ic2VydmVycyA9IHR5cGVvZiBXZWFrTWFwICE9PSAndW5kZWZpbmVkJyA/IG5ldyBXZWFrTWFwKCkgOiBuZXcgTWFwU2hpbSgpO1xuXG4vKipcclxuICogUmVzaXplT2JzZXJ2ZXIgQVBJLiBFbmNhcHN1bGF0ZXMgdGhlIFJlc2l6ZU9ic2VydmVyIFNQSSBpbXBsZW1lbnRhdGlvblxyXG4gKiBleHBvc2luZyBvbmx5IHRob3NlIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMgdGhhdCBhcmUgZGVmaW5lZCBpbiB0aGUgc3BlYy5cclxuICovXG52YXIgUmVzaXplT2JzZXJ2ZXIgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZXNpemVPYnNlcnZlcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uLicpO1xuICAgIH1cbiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50LicpO1xuICAgIH1cblxuICAgIHZhciBjb250cm9sbGVyID0gUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLmdldEluc3RhbmNlKCk7XG4gICAgdmFyIG9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyU1BJKGNhbGxiYWNrLCBjb250cm9sbGVyLCB0aGlzKTtcblxuICAgIG9ic2VydmVycy5zZXQodGhpcywgb2JzZXJ2ZXIpO1xufTtcblxuLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzIG9mIFJlc2l6ZU9ic2VydmVyLlxuWydvYnNlcnZlJywgJ3Vub2JzZXJ2ZScsICdkaXNjb25uZWN0J10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgUmVzaXplT2JzZXJ2ZXIucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAocmVmID0gb2JzZXJ2ZXJzLmdldCh0aGlzKSlbbWV0aG9kXS5hcHBseShyZWYsIGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciByZWY7XG4gICAgfTtcbn0pO1xuXG52YXIgaW5kZXggPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIEV4cG9ydCBleGlzdGluZyBpbXBsZW1lbnRhdGlvbiBpZiBhdmFpbGFibGUuXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwkMS5SZXNpemVPYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbCQxLlJlc2l6ZU9ic2VydmVyO1xuICAgIH1cblxuICAgIHJldHVybiBSZXNpemVPYnNlcnZlcjtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGluZGV4O1xuIiwidmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsIGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaCAoZSkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXHJcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XHJcbn1cclxuXHJcbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cclxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3NcclxuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gXCJyZXNpemUtb2JzZXJ2ZXItcG9seWZpbGxcIjtcblxuZnVuY3Rpb24gRHluYW1pY1RhYnMoY29udGFpbmVySUQpIHtcblxuXHRpZiAoIWNvbnRhaW5lcklEKSB7XG5cdFx0Y29uc29sZS5sb2coXCJFUlJPUjogVG8gcmVnaXN0ZXIgZHluYW1pYyB0YWJzLCBwYXNzIGluIHRoZSBJRCBvZiBhIG5vZGUgY29udGFpbmluZyB0aGUgdGFic1wiKTtcblx0XHRyZXR1cm5cblx0fVxuXG5cdHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVySUQpO1xuXG5cdHRoaXMucmVnaXN0ZXJlZFRhYnMgPSBbXTtcblxuXHR0aGlzLmFjdGl2ZVRhYkluZGV4ID0gMDtcblxuXHR0aGlzLnN3aXRjaENhbGxiYWNrcyA9IFtdO1xuXG5cdHRoaXMuZnJhbWVyID0gdGhpcy5jb250YWluZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImR5bmFtaWMtdGFicy1mcmFtZXJcIilbMF07XG5cblx0dGhpcy5mcmFtZXJTaGlmdCA9IDA7IC8vIHRoZSBhbW91bnQgaW4gcGl4ZWxzIHRoYXQgdGhlIHRhYnMgaGF2ZSBiZWVuIHNjcm9sbGVkXG5cblx0dGhpcy5mcmFtZXJXaWR0aCA9IDA7XG5cblx0dGhpcy50b3RhbFRhYnNXaWR0aCA9IDA7XG5cblx0dGhpcy5pbmRpY2F0b3JCYXIgPSB0aGlzLmNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZHQtaW5kaWNhdG9yLWJhclwiKVswXTtcblxuXHR0aGlzLmFycm93TGVmdCA9IHRoaXMuY29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJhcnJvdy1sZWZ0XCIpWzBdO1xuXG5cdHRoaXMuYXJyb3dSaWdodCA9IHRoaXMuY29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJhcnJvdy1yaWdodFwiKVswXTtcblxuXHR0aGlzLmFycm93TGVmdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5zY3JvbGxMZWZ0LmJpbmQodGhpcywgMC44NSkpO1xuXG5cdHRoaXMuYXJyb3dSaWdodC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5zY3JvbGxSaWdodC5iaW5kKHRoaXMsIDAuODUpKTtcblxuXHRjb25zdCBybyA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xuXHRcdGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuXHRcdFx0dGhpcy5yZWZyZXNoTGF5b3V0KCk7XG5cdFx0XHRjb25zdCB7bGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0fSA9IGVudHJ5LmNvbnRlbnRSZWN0O1xuXHRcdFx0Y29uc29sZS5sb2coJ0VsZW1lbnQ6JywgZW50cnkudGFyZ2V0KTtcblx0XHRcdGNvbnNvbGUubG9nKGBFbGVtZW50J3Mgc2l6ZTogJHsgd2lkdGggfXB4IHggJHsgaGVpZ2h0IH1weGApO1xuXHRcdFx0Y29uc29sZS5sb2coYEVsZW1lbnQncyBwYWRkaW5nczogJHsgdG9wIH1weCA7ICR7IGxlZnQgfXB4YCk7XG5cdFx0fVxuXHR9KTtcblx0cm8ub2JzZXJ2ZSh0aGlzLmZyYW1lcik7XG5cdC8vIHRoaXMuZnJhbWVyLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZWZyZXNoTGF5b3V0LmJpbmQodGhpcykpXG5cdC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVmcmVzaExheW91dC5iaW5kKHRoaXMpKTtcblxufVxuXG4vLyByZWdpc3RlclRhYnMgcmVnaXN0ZXJzIHRoZSB0YWJzIHdpdGggdGhlIElEcyBpbiB0aGUgdGFic0lEcyBhcnJheS4gVGhlIG9wdGlvbmFsIGlkUHJlZml4IHBhcmFtZXRlciBjYW4gYmUgc2V0XG4vLyB0byBwcmVmaXggZWFjaCB0YXJnZXRlZCB0YWIgZWxlbWVudCBieSBJRCB3aXRoIHRoZSBzdHJpbmcuXG5EeW5hbWljVGFicy5wcm90b3R5cGUucmVnaXN0ZXJUYWJzID0gZnVuY3Rpb24odGFiSURzLCBpZFByZWZpeCA9IFwiXCIpIHtcblxuXHRpZiAodGFiSURzID09PSB1bmRlZmluZWQgfHwgdGFiSURzLmxlbmd0aCA9PT0gMCkge1xuXHRcdGNvbnNvbGUubG9nKFwiRVJST1I6IE11c3QgcGFzcyBpbiBhbiBhcnJheSBvZiB0YWIgSURzIHRvIHJlZ2lzdGVyXCIpXG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gY29uc29sZS5sb2coXCJSRUdJU1RFUklORyBUQUJTLiBDdXJyZW50IHRhYnM6XCIsIEpTT04uc3RyaW5naWZ5KHRoaXMucmVnaXN0ZXJlZFRhYnMpKVxuXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgdGFiSURzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dGhpcy5yZWdpc3RlclRhYihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZFByZWZpeCt0YWJJRHNbaV0pKVxuXHR9XG5cblx0Ly8gY29uc29sZS5sb2coXCJ0YWJzIHJlZ2lzdGVyZWQ7IHRoZSBvYmplY3Q6XCIsIHRoaXMpXG5cdC8vIGNvbnNvbGUubG9nKFwidGFicyByZWdpc3RlcmVkOyB0aGUgdGFiczpcIiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnJlZ2lzdGVyZWRUYWJzKSkpO1xuXG5cdHNldEFjdGl2ZUhpZ2hsaWdodC5jYWxsKHRoaXMsIDApOyAvLyBhbHdheXMgcmVzZXQgd2hlbiByZWdpc3RlcmluZyBuZXcgdGFiczsgYXZvaWQgcmVzZXR0aW5nIGluZGljYXRvciBub3dcblx0dGhpcy5yZWZyZXNoTGF5b3V0KCk7XG5cbn1cblxuLy8gcmVnaXN0ZXJBbGxUYWJzIHJlZ2lzdGVycyBhbGwgdGFicyAoZWxlbWVudHMgaW5zaWRlIG9mIHRoZSBjb250YWluZXIgdGhhdCBoYXZlIHRoZSBjbGFzcyBcImR5bmFtaWMtdGFiXCIpIGFuZFxuLy8gcmVmcmVzaGVzIHRoZSBsYXlvdXQuXG5EeW5hbWljVGFicy5wcm90b3R5cGUucmVnaXN0ZXJBbGxUYWJzID0gZnVuY3Rpb24oKSB7XG5cblx0Y29uc3QgdGFicyA9IHRoaXMuY29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkeW5hbWljLXRhYlwiKVxuXG5cdGlmICh0YWJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdGNvbnNvbGUubG9nKFwiRVJST1I6IFRoZXJlIGFyZSBubyB0YWJzIHRvIHJlZ2lzdGVyXCIpXG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YWJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dGhpcy5yZWdpc3RlclRhYih0YWJzW2ldKTtcblx0fVxuXG5cdC8vIFJlc2V0IHRoZSBhY3RpdmUgdGFiIGFuZCByZWZyZXNoIHRoZSBsYXlvdXQgYmVjYXVzZSB3ZSBhcmUgcmVnaXN0ZXJpbmcgYWxsIHRhYnMuXG5cdHNldEFjdGl2ZUhpZ2hsaWdodC5jYWxsKHRoaXMsIDApO1xuXHR0aGlzLnJlZnJlc2hMYXlvdXQoKTtcblxufVxuXG4vLyByZWdpc3RlclRhYiByZWdpc3RlcnMgdGhlIHBhc3NlZCBpbiB0aGUgSFRNTCB0YWIgZWxlbWVudC5cbkR5bmFtaWNUYWJzLnByb3RvdHlwZS5yZWdpc3RlclRhYiA9IGZ1bmN0aW9uKHRhYiwgcmVmcmVzaExheW91dCA9IGZhbHNlKSB7XG5cblx0Ly8gUmVtb3ZlIHRoZSBkaXNwbGF5Om5vbmUgc3R5bGUgcHJvcGVydHkgdGhhdCBpcyBieSBkZWZhdWx0IG9uIHVucmVnaXN0ZXJlZCB0YWJzLlxuXHR0YWIuc2V0QXR0cmlidXRlKFwiZGF0YS1kdHJcIiwgXCJ5XCIpO1xuXG5cdC8vIFRoZSBsZW5ndGggb2YgdGhlIHJlZ2lzdGVyZWRUYWJzIGFycmF5IHdpbGwgYmUgdGhlIGluZGV4IG9mIHRoZSBuZXcgdGFiLlxuXHRjb25zdCBuZXdUYWJJbmRleCA9IHRoaXMucmVnaXN0ZXJlZFRhYnMubGVuZ3RoO1xuXG5cdGxldCBwYXJlbnQgPSB0aGlzO1xuXG5cdC8vIEFkZCBjbGljayBsaXN0ZW5lciB0byBzZXQgYWN0aXZlIHRhYiBhbmQgZmlyZSBvZmYgY2FsbGJhY2tzIHVwb24gc3dpdGNoaW5nIHRhYnMuXG5cdHRhYi5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uKGUpIHtcblx0XHRpZiAoZS50eXBlID09PSBcImNsaWNrXCIpIHtcblx0XHRcdHBhcmVudC5zZXRBY3RpdmVUYWJJbmRleChuZXdUYWJJbmRleCk7XG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHBhcmVudC5zd2l0Y2hDYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0cGFyZW50LnN3aXRjaENhbGxiYWNrc1tpXShwYXJlbnQuYWN0aXZlVGFiSW5kZXgsIG5ld1RhYkluZGV4KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0dGFiLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0YWIpO1xuXG5cdC8vIEFkZCB0aGUgaW5pdGlhbGl6ZWQgdGFiLlxuXHR0aGlzLnJlZ2lzdGVyZWRUYWJzLnB1c2goe1xuXHRcdGVsOiB0YWIsXG5cdFx0cmVjdDoge1xuXHRcdFx0bGVmdDogMCxcblx0XHRcdHdpZHRoOiAwXG5cdFx0fVxuXHR9KTtcblxuXHQvLyBXaGVuIHJlZ2lzdGVyaW5nIGEgc2luZ2xlIHRhYiBwcm9ncmFtbWF0aWNhbGx5LCByZWZyZXNoTGF5b3V0IHNob3VsZCBiZSBzZXQgdG8gdHJ1ZS5cblx0Ly8gT3RoZXJ3aXNlLCB3aGVuIHVzaW5nIG1ldGhvZCByZWdpc3RlclRhYnMgb3IgcmVnaXN0ZXJBbGxUYWJzLCByZWZyZXNoTGF5b3V0IGlzIGNhbGxlZCBhZnRlclxuXHQvLyBhbGwgb2YgdGhlIGRlc2lyZWQgdGFicyBhcmUgcmVnaXN0ZXJlZC5cblx0aWYgKHJlZnJlc2hMYXlvdXQpIHtcblx0XHR0aGlzLnJlZnJlc2hMYXlvdXQoKTtcblx0fVxuXG59XG5cbi8vIGRlcmVnaXN0ZXJBbGxUYWJzIGRlLXJlZ2lzdGVycyBhbGwgdGFicy4gTG9vayBhdCBmdW5jdGlvbiBkZXJlZ2lzdGVyVGFiIHRvIHVuZGVyc3RhbmQgd2hhdCBpdCBtZWFuc1xuLy8gdG8gZGUtcmVnaXN0ZXIgYSB0YWIuXG5EeW5hbWljVGFicy5wcm90b3R5cGUuZGVyZWdpc3RlckFsbFRhYnMgPSBmdW5jdGlvbigpIHtcblx0Zm9yIChsZXQgaSA9IHRoaXMucmVnaXN0ZXJlZFRhYnMubGVuZ3RoOyBpID4gMDsgaS0tKSB7XG5cdFx0dGhpcy5kZXJlZ2lzdGVyVGFiKDApO1xuXHR9XG5cdHRoaXMuc3dpdGNoQ2FsbGJhY2tzID0gW107XG5cdHRoaXMucmVmcmVzaExheW91dCgpO1xufVxuXG4vLyBkZXJlZ2lzdGVyVGFiIGRlLXJlZ2lzdGVycyB0aGUgdGFiIHdpdGggdGhlIGdpdmVuIGluZGV4OiB0aGUgZWxlbWVudCdzIGNsaWNrIGV2ZW50IGxpc3RlbmVyIChhbmQgdGhlIGFkZGVkIGNhbGxiYWNrcylcbi8vIGlzIHJlbW92ZWQsIHRoZSBlbGVtZW50IGlzIGhpZGRlbiBmcm9tIHZpZXcsIGFuZCBpdCBpcyByZW1vdmVkIGZyb20gdGhlIHJlZ2lzdGVyZWRUYWJzIGFycmF5LFxuRHluYW1pY1RhYnMucHJvdG90eXBlLmRlcmVnaXN0ZXJUYWIgPSBmdW5jdGlvbih0YWJJbmRleCwgcmVmcmVzaExheW91dCA9IGZhbHNlKSB7XG5cblx0Ly8gUmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lci5cblx0Ly8gdGhpcy5yZWdpc3RlcmVkVGFic1t0YWJJbmRleF0uZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMucmVnaXN0ZXJlZFRhYnNbdGFiSW5kZXhdLm9jKVxuXHR0aGlzLnJlZ2lzdGVyZWRUYWJzW3RhYkluZGV4XS5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5yZWdpc3RlcmVkVGFic1t0YWJJbmRleF0uZWwpO1xuXG5cdC8vIFJlbW92ZSB0aGUgXCJkYXRhLWR0clwiIGF0dHJpYnV0ZSB0byBoaWRlIHRoZSB0YWIgZnJvbSB2aWV3LlxuXHR0aGlzLnJlZ2lzdGVyZWRUYWJzW3RhYkluZGV4XS5lbC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLWR0clwiKTtcblxuXHQvLyBSZW1vdmUgdGhlIGFjdGl2ZSBhdHRyaWJ1dGUgKGluIGNhc2UgaXQgaXMgYWN0aXZlKS5cblx0dGhpcy5yZWdpc3RlcmVkVGFic1t0YWJJbmRleF0uZWwucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1kdGFjdGl2ZVwiKTtcblxuXHRjb25zdCBtbCA9IHRoaXMucmVnaXN0ZXJlZFRhYnNbdGFiSW5kZXhdLmVsLnN0eWxlW1wibWFyZ2luLWxlZnRcIl07XG5cdGlmIChtbCAhPT0gXCIwcHhcIiAmJiBtbCAhPT0gXCJcIikge1xuXHRcdHRoaXMucmVnaXN0ZXJlZFRhYnNbdGFiSW5kZXhdLmVsLnN0eWxlW1wibWFyZ2luLWxlZnRcIl0gPSBcIjBweFwiO1xuXHR9XG5cblx0Ly8gU3BsaWNlIHRoZSBlbGVtZW50IG91dCBvZiB0aGUgYXJyYXkuXG5cdHRoaXMucmVnaXN0ZXJlZFRhYnMuc3BsaWNlKHRhYkluZGV4LCAxKTtcblxuXHRpZiAodGhpcy5yZWdpc3RlcmVkVGFicy5sZW5ndGggPT09IDApIHtcblx0XHR0aGlzLmluZGljYXRvckJhci5zdHlsZS53aWR0aCA9IFwiMFwiO1xuXHR9XG5cblx0Ly8gV2hlbiBkZS1yZWdpc3RlcmluZyBhIHNpbmdsZSB0YWIgcHJvZ3JhbW1hdGljYWxseSwgcmVmcmVzaExheW91dCBzaG91bGQgYmUgc2V0IHRvIHRydWUuXG5cdC8vIE90aGVyd2lzZSwgd2hlbiB1c2luZyBtZXRob2QgZGVyZWdpc3RlclRhYnMgb3IgZGVyZWdpc3RlckFsbFRhYnMsIHJlZnJlc2hMYXlvdXQgaXMgY2FsbGVkIGFmdGVyXG5cdC8vIGFsbCBvZiB0aGUgYXBwcm9wcmlhdGUgdGFicyBhcmUgZGUtcmVnaXN0ZXJlZC5cblx0aWYgKHJlZnJlc2hMYXlvdXQpIHtcblx0XHR0aGlzLnJlZnJlc2hMYXlvdXQoKTtcblx0fVxuXG59XG5cbi8vIHNldEFjdGl2ZVRhYkluZGV4IHNldHMgdGhlIGFjdGl2ZSB0YWIgYnkgaXRzIGluZGV4IGluIHRoZSBhcnJheSBvZiByZWdpc3RlcmVkIHRhYnMgYW5kIHRoZW4gc2Nyb2xscyB0byBpdCBpZiBuZWNlc3NhcnkuXG5EeW5hbWljVGFicy5wcm90b3R5cGUuc2V0QWN0aXZlVGFiSW5kZXggPSBmdW5jdGlvbihuZXdJbmRleCkge1xuXG5cdC8vIGNvbnNvbGUubG9nKFwidGhpcy5yZWdpc3RlcmVkVGFicy5sZW5ndGggYmVmb3JlIHNldEFjdGl2ZVRhYkluZGV4XCIsIHRoaXMucmVnaXN0ZXJlZFRhYnMubGVuZ3RoKVxuXHQvLyBjb25zb2xlLmxvZyhcInRoaXMuYWN0aXZlVGFiSW5kZXggYmVmb3JlIHNldEFjdGl2ZVRhYkluZGV4XCIsIHRoaXMuYWN0aXZlVGFiSW5kZXgpXG5cblx0Ly8gUmVzZXQgaWYgdGhlcmUgYXJlIG5vIHJlZ2lzdGVyZWQgdGFicy5cblx0aWYgKHRoaXMucmVnaXN0ZXJlZFRhYnMubGVuZ3RoID09PSAwKSB7XG5cdFx0dGhpcy5hY3RpdmVUYWJJbmRleCA9IDA7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gSWYgc29tZXRoaW5nIHdlaXJkIGlzIGhhcHBlbmluZywgd2UgZG9uJ3Qgd2FudCBhbiBpbnZhbGlkIGluZGV4IG9mIGFuIGFycmF5IGFjY2Vzc2VkLlxuXHRpZiAobmV3SW5kZXggPj0gdGhpcy5yZWdpc3RlcmVkVGFicy5sZW5ndGgpIHtcblx0XHRjb25zb2xlLmxvZyhcIkVSUk9SOiBJbnZhbGlkIHRhYiBpbmRleCBmYWlsZWQgdG8gc2V0XCIpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHRoaXMuYWN0aXZlVGFiSW5kZXggPSBuZXdJbmRleDtcblx0c2V0QWN0aXZlSGlnaGxpZ2h0LmNhbGwodGhpcywgbmV3SW5kZXgpO1xuXHR0aGlzLnNjcm9sbFRvQWN0aXZlVGFiKCk7IC8vIFJlLXBvc2l0aW9uIHRoZSBpbmRpY2F0b3JcblxuXHQvLyBjb25zb2xlLmxvZyhcInRoaXMucmVnaXN0ZXJlZFRhYnMubGVuZ3RoIGFmdGVyIHNldEFjdGl2ZVRhYkluZGV4XCIsIHRoaXMucmVnaXN0ZXJlZFRhYnMubGVuZ3RoKVxuXHQvLyBjb25zb2xlLmxvZyhcInRoaXMuYWN0aXZlVGFiSW5kZXggYWZ0ZXIgc2V0QWN0aXZlVGFiSW5kZXhcIiwgdGhpcy5hY3RpdmVUYWJJbmRleClcblxufVxuXG5EeW5hbWljVGFicy5wcm90b3R5cGUuYWRkU3dpdGNoQ2FsbGJhY2sgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHR0aGlzLnN3aXRjaENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbn1cblxuRHluYW1pY1RhYnMucHJvdG90eXBlLnJlZnJlc2hMYXlvdXQgPSBmdW5jdGlvbigpIHtcblxuXHRpZiAodGhpcy5yZWdpc3RlcmVkVGFicy5sZW5ndGggPT09IDApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBjb25zb2xlLmxvZyhcIlJFRlJFU0hJTkcgbGF5b3V0OyB0aGlzLmFjdGl2ZVRhYkluZGV4OlwiLCB0aGlzLmFjdGl2ZVRhYkluZGV4KVxuXG5cdHRoaXMuZnJhbWVyV2lkdGggPSB0aGlzLmZyYW1lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcblxuXHR0aGlzLnRvdGFsVGFic1dpZHRoID0gMDtcblx0bGV0IHdpZHRocyA9IHRoaXMucmVnaXN0ZXJlZFRhYnMubWFwKHRhYiA9PiB7XG5cdFx0Y29uc3QgdyA9IHRhYi5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcblx0XHR0aGlzLnRvdGFsVGFic1dpZHRoICs9IHdcblx0XHRyZXR1cm4gd1xuXHR9KVxuXHQvLyBjb25zb2xlLmxvZyhcIkFsbCB3aWR0aHNcIiwgd2lkdGhzKVxuXG5cdC8vIGNvbnNvbGUubG9nKFwiVE9UQUwgVEFCUyBXSURUSDpcIiwgdGhpcy50b3RhbFRhYnNXaWR0aClcblxuXHRpZiAodGhpcy50b3RhbFRhYnNXaWR0aCA+IHRoaXMuZnJhbWVyV2lkdGgpIHtcblx0XHR0aGlzLmZyYW1lci5zdHlsZVtcInRleHQtYWxpZ25cIl0gPSBcImxlZnRcIjtcblx0XHQvLyBjb25zb2xlLmxvZyhcImZyYW1lciBzaGlmdFwiLCB0aGlzLmZyYW1lclNoaWZ0KVxuXHRcdHJlc2V0UmVjdHMuY2FsbCh0aGlzLCAwLCB3aWR0aHMpO1xuXHRcdHRoaXMuc2Nyb2xsVG9BY3RpdmVUYWIoKTsgLy8gaW5kaWNhdG9yIHdpbGwgYmUgcmVzZXRcblx0fSBlbHNlIHtcblx0XHR0aGlzLmZyYW1lci5zdHlsZVtcInRleHQtYWxpZ25cIl0gPSBcImNlbnRlclwiO1xuXHRcdHRoaXMuc2V0VGFic09mZnNldCgwKTsgLy8gcmVzZXQgdGhlIHNjcm9sbCBhbW91bnQgKG1hcmdpbi1sZWZ0IG9mIHRoZSBmaXJzdCB0YWIpIHRvIDBcblx0XHRyZXNldFJlY3RzLmNhbGwodGhpcywgKHRoaXMuZnJhbWVyV2lkdGggLSB0aGlzLnRvdGFsVGFic1dpZHRoKSAvIDIsIHdpZHRocyk7XG5cdFx0dGhpcy5yZXNldEluZGljYXRvcigpOyAvLyByZXNldCB3aXRoIG5ldyB0YWIgZGltZW5zaW9ucyAoVnVlIHdpbGwgcnVuIHNldEFjdGl2ZVRhYkluZGV4IGFueXdheSwgYnV0IHRoYXQncyBva2F5KVxuXHRcdHRoaXMuaGlkZUFycm93KCk7XG5cdH1cblxufVxuXG5EeW5hbWljVGFicy5wcm90b3R5cGUuc2Nyb2xsVG9BY3RpdmVUYWIgPSBmdW5jdGlvbigpIHtcblxuXHQvLyBSZXR1cm4gaWYgdGhlcmUncyBubyBuZWVkIHRvIHNjcm9sbCBhbnl3aGVyZS5cblx0aWYgKHRoaXMudG90YWxUYWJzV2lkdGggPD0gdGhpcy5mcmFtZXJXaWR0aCkgeyAvLyB0aGUgdG90YWwgbnVtYmVyIG9mIGZyYW1lciB3aWR0aHMgdGhhdCBlcXVhbCB0aGUgbGVuZ3RoIG9mIHRvdGFsVGFic1dpZHRoXG5cdFx0dGhpcy5yZXNldEluZGljYXRvcigpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGxldCBhY3RpdmVUYWIgPSB0aGlzLnJlZ2lzdGVyZWRUYWJzW3RoaXMuYWN0aXZlVGFiSW5kZXhdO1xuXG5cdC8vIHBpeGVscyB0byB0aGUgbGVmdCBlZGdlLCByZWxhdGl2ZSB0byB0aGUgbGVmdCBlZGdlIG9mIGZyYW1lclxuXHRjb25zdCBsZWZ0RWRnZSA9IGFjdGl2ZVRhYi5yZWN0LmxlZnQgKyB0aGlzLmZyYW1lclNoaWZ0O1xuXG5cdC8vIHBpeGVscyB0byB0aGUgcmlnaHQgZWRnZSwgcmVsYXRpdmUgdG8gdGhlIGxlZnQgZWRnZSBvZiBmcmFtZXJcblx0Y29uc3QgcmlnaHRFZGdlID0gYWN0aXZlVGFiLnJlY3QubGVmdCArIGFjdGl2ZVRhYi5yZWN0LndpZHRoICsgdGhpcy5mcmFtZXJTaGlmdDtcblxuXHRpZiAobGVmdEVkZ2UgPCAwKSB7IC8vIHNjcm9sbCB0byB0aGUgbGVmdFxuXG5cdFx0Ly8gY29uc29sZS5sb2coXCJsZWZ0RWRnZVwiLCBsZWZ0RWRnZSk7XG5cblx0XHQvLyB0aGUgbGVmdCBlZGdlIG9mIGFjdGl2ZVRhYiBpcyBpbiB0aGUgbmVnYXRpdmUgblRoRnJhbWVcblx0XHRjb25zdCBuVGhGcmFtZSA9IE1hdGguYWJzKGxlZnRFZGdlKSAvIHRoaXMuZnJhbWVyV2lkdGg7XG5cblx0XHQvLyBjb25zb2xlLmxvZyhcIm5UaEZyYW1lXCIsIG5UaEZyYW1lKTtcblxuXHRcdC8vIGNvbnNvbGUubG9nKFwiLShuVGhGcmFtZSAtICgoYWN0aXZlVGFiLnJlY3Qud2lkdGggKiAxLjEpIC8gdGhpcy5mcmFtZXJXaWR0aCkpXCIsIG5UaEZyYW1lICsgKChhY3RpdmVUYWIucmVjdC53aWR0aCAqIDEuMSkgLyB0aGlzLmZyYW1lcldpZHRoKSlcblxuXHRcdHRoaXMuc2Nyb2xsTGVmdChuVGhGcmFtZSArICgoYWN0aXZlVGFiLnJlY3Qud2lkdGggKiAxLjEpIC8gdGhpcy5mcmFtZXJXaWR0aCkpO1xuXG5cdH0gZWxzZSBpZiAocmlnaHRFZGdlID4gdGhpcy5mcmFtZXJXaWR0aCkgeyAvLyBzY3JvbGwgdG8gdGhlIHJpZ2h0XG5cblx0XHQvLyBjb25zb2xlLmxvZyhcInJpZ2h0RWRnZVwiLCByaWdodEVkZ2UpO1xuXG5cdFx0Ly8gdGhlIHJpZ2h0IGVkZ2Ugb2YgYWN0aXZlVGFiIGlzIGluIHRoZSBuVGhGcmFtZVxuXHRcdGNvbnN0IG5UaEZyYW1lID0gcmlnaHRFZGdlIC8gdGhpcy5mcmFtZXJXaWR0aDtcblxuXHRcdC8vIGNvbnNvbGUubG9nKFwiblRoRnJhbWVcIiwgblRoRnJhbWUpO1xuXG5cdFx0Ly8gY29uc29sZS5sb2coXCJuVGhGcmFtZSAtICgoYWN0aXZlVGFiLnJlY3Qud2lkdGggKiAxLjEpIC8gdGhpcy5mcmFtZXJXaWR0aClcIiwgblRoRnJhbWUgKyAoKGFjdGl2ZVRhYi5yZWN0LndpZHRoICogMS4xKSAvIHRoaXMuZnJhbWVyV2lkdGgpKVxuXG5cdFx0dGhpcy5zY3JvbGxSaWdodChuVGhGcmFtZSAtICgoYWN0aXZlVGFiLnJlY3Qud2lkdGggKiAxLjEpIC8gdGhpcy5mcmFtZXJXaWR0aCkpO1xuXG5cdH0gZWxzZSB7IC8vIHRoZXJlIGlzIG5vIHNjcm9sbGluZyBuZWVkZWRcblxuXHRcdGlmICh0aGlzLmFjdGl2ZVRhYkluZGV4ID09PSAwKSB7IC8vIGlmIGFjdGl2ZSB0YWIgaXMgdGhlIGZpcnN0IG9uZVxuXHRcdFx0dGhpcy5oaWRlQXJyb3coXCJsZWZ0XCIpO1xuXHRcdH1cblx0XHR0aGlzLnJlc2V0SW5kaWNhdG9yKCk7IC8vIHJlc2V0IGJlY2F1c2Ugbm90IHNjcm9sbGluZyBhbmQgbm90IHJlc2V0dGluZyBpbiBzZXRBY3RpdmVUYWJJbmRleFxuXG5cdH1cblxuXHQvLyBjaGVjayBpZiB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gc2Nyb2xsIHJpZ2h0XG5cdGNvbnN0IGxhc3RUYWIgPSB0aGlzLnJlZ2lzdGVyZWRUYWJzW3RoaXMucmVnaXN0ZXJlZFRhYnMubGVuZ3RoIC0gMV0ucmVjdDtcblx0Ly8gY29uc29sZS5sb2coXCJsYXN0VGFiXCIsIGxhc3RUYWIpXG5cdGNvbnN0IHJpZ2h0RWRnZUxhc3QgPSBsYXN0VGFiLmxlZnQgKyBsYXN0VGFiLndpZHRoICsgdGhpcy5mcmFtZXJTaGlmdDtcblx0aWYgKHJpZ2h0RWRnZUxhc3QgPiB0aGlzLmZyYW1lcldpZHRoKSB7XG5cdFx0dGhpcy5zaG93QXJyb3coXCJyaWdodFwiKTtcblx0fVxuXG59XG5cbkR5bmFtaWNUYWJzLnByb3RvdHlwZS5yZXNldEluZGljYXRvciA9IGZ1bmN0aW9uKCkge1xuXHRsZXQgaW5keCA9IHRoaXMuYWN0aXZlVGFiSW5kZXg7XG5cdC8vIENoZWNrIGlmIHRoZSBpbmRleCBvZiB0aGUgYWN0aXZlIHRhYiBpcyBwb3NzaWJsZSBnaXZlbiB0aGUgY3VycmVudCBudW1iZXIgb2YgcmVnaXN0ZXJlZCB0YWJzLlxuXHRpZiAoaW5keCA+PSB0aGlzLnJlZ2lzdGVyZWRUYWJzLmxlbmd0aCkge1xuXHRcdC8vIEFjdCBhcyBpZiB3ZSB3ZXJlIG9uIHRoZSB0YWIgaW5kZXggb2YgdGhlIG5ldyBsYXN0IHRhYiwgYnV0IGRvbid0IHNldCB0aGlzIHRhYiBhcyBhY3RpdmU7IHRoZSBhcHAgc2hvdWxkIHNldCB0aGUgdGFiIGluZGV4IG1hbnVhbGx5LlxuXHRcdGluZHggPSB0aGlzLnJlZ2lzdGVyZWRUYWJzLmxlbmd0aCAtIDE7XG5cdH1cblx0Ly8gY29uc29sZS5sb2coXCJ8fHx8IFJFU0VUVElORyBJTkRJQ0FUT1IgVE8gaW5kZXhcIiwgaW5keCwgXCIgbGVmdDpcIiwgdGhpcy5mcmFtZXJTaGlmdCArIHRoaXMucmVnaXN0ZXJlZFRhYnNbaW5keF0ucmVjdC5sZWZ0KVxuXHQvLyBjb25zb2xlLmxvZyhcInRoaXMucmVnaXN0ZXJlZFRhYnNbaW5keF0ucmVjdC5sZWZ0XCIsIHRoaXMucmVnaXN0ZXJlZFRhYnNbaW5keF0ucmVjdC5sZWZ0KVxuXHQvLyBjb25zb2xlLmxvZyhcInRoaXMuZnJhbWVyU2hpZnRcIiwgdGhpcy5mcmFtZXJTaGlmdClcblx0Ly8gY29uc29sZS5sb2coXCJJTkRJQ0FUT1IgTkVXIExFRlRcIiwgdGhpcy5mcmFtZXJTaGlmdCArIHRoaXMucmVnaXN0ZXJlZFRhYnNbaW5keF0ucmVjdC5sZWZ0KVxuXHQvLyBjb25zb2xlLmxvZyhcIklORElDQVRPUiBORVcgV0lEVEhcIiwgdGhpcy5yZWdpc3RlcmVkVGFic1tpbmR4XS5yZWN0LndpZHRoKVxuXHR0aGlzLmluZGljYXRvckJhci5zdHlsZS5sZWZ0ID0gKHRoaXMuZnJhbWVyU2hpZnQgKyB0aGlzLnJlZ2lzdGVyZWRUYWJzW2luZHhdLnJlY3QubGVmdCkgKyBcInB4XCI7XG5cdHRoaXMuaW5kaWNhdG9yQmFyLnN0eWxlLndpZHRoID0gdGhpcy5yZWdpc3RlcmVkVGFic1tpbmR4XS5yZWN0LndpZHRoICsgXCJweFwiO1xufVxuXG4vLyBzY3JvbGwgbGVmdCBuIGZyYW1lV2lkdGhzOyBmcmFtZVdpZHRocyBkZWZhdWx0cyB0byAwLjg1IGlmIHVuZGVmaW5lZFxuRHluYW1pY1RhYnMucHJvdG90eXBlLnNjcm9sbExlZnQgPSBmdW5jdGlvbihmcmFtZXJXaWR0aHMpIHtcblxuXHRpZiAoZnJhbWVyV2lkdGhzID09PSB1bmRlZmluZWQpIHtcblx0XHRmcmFtZXJXaWR0aHMgPSAwLjg1O1xuXHR9XG5cblx0bGV0IHBpeGVsc1RvU2hpZnQgPSBmcmFtZXJXaWR0aHMgKiB0aGlzLmZyYW1lcldpZHRoO1xuXG5cdC8vIGlmIGF0IGxlZnQgZWRnZSwgZG9uJ3Qgc2Nyb2xsXG5cdGlmICh0aGlzLmZyYW1lclNoaWZ0ID49IDApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRpZiAoTWF0aC5hYnModGhpcy5mcmFtZXJTaGlmdCkgPiBwaXhlbHNUb1NoaWZ0KSB7XG5cblx0XHQvLyBzY3JvbGwgbGVmdCBwaXhlbHNUb1NoaWZ0XG5cdFx0dGhpcy5zZXRUYWJzT2Zmc2V0KHRoaXMuZnJhbWVyU2hpZnQgKyBwaXhlbHNUb1NoaWZ0KVxuXG5cdH0gZWxzZSB7XG5cblx0XHQvLyBzY3JvbGwgdG8gdGhlIGxlZnQgZWRnZVxuXHRcdHRoaXMuc2V0VGFic09mZnNldCgwKVxuXHRcdHRoaXMuaGlkZUFycm93KFwibGVmdFwiKVxuXG5cdH1cblxuXHR0aGlzLnJlc2V0SW5kaWNhdG9yKCk7XG5cblx0dGhpcy5zaG93QXJyb3coXCJyaWdodFwiKTtcblxufVxuXG4vLyBzY3JvbGwgdGhlIHRoZSByaWdodCBuIGZyYW1lV2lkdGhzOyBmcmFtZVdpZHRocyBkZWZhdWx0cyB0byAwLjg1IGlmIHVuZGVmaW5lZFxuRHluYW1pY1RhYnMucHJvdG90eXBlLnNjcm9sbFJpZ2h0ID0gZnVuY3Rpb24oZnJhbWVyV2lkdGhzKSB7XG5cblx0aWYgKGZyYW1lcldpZHRocyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0ZnJhbWVyV2lkdGhzID0gMC44NTtcblx0fVxuXG5cdGxldCBwaXhlbHNUb1NoaWZ0ID0gZnJhbWVyV2lkdGhzICogdGhpcy5mcmFtZXJXaWR0aDtcblxuXHQvLyB0aGUgbnVtYmVyIG9mIHBpeGVscyB0aGF0IHlvdSBjYW4gc3RpbGwgc2Nyb2xsIHRvIHRoZSByaWdodFxuXHRjb25zdCBjYW5TaGlmdCA9IE1hdGguYWJzKHRoaXMudG90YWxUYWJzV2lkdGggLSB0aGlzLmZyYW1lcldpZHRoICsgdGhpcy5mcmFtZXJTaGlmdCk7XG5cblx0Ly8gaWYgYXQgcmlnaHQgZWRnZSwgZG9uJ3Qgc2Nyb2xsXG5cdGlmIChjYW5TaGlmdCA8PSAwKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0aWYgKGNhblNoaWZ0ID4gcGl4ZWxzVG9TaGlmdCkge1xuXG5cdFx0Ly8gc2Nyb2xsIHJpZ2h0IHBpeGVsc1RvU2hpZnRcblx0XHR0aGlzLnNldFRhYnNPZmZzZXQodGhpcy5mcmFtZXJTaGlmdCAtIHBpeGVsc1RvU2hpZnQpXG5cblx0fSBlbHNlIHtcblxuXHRcdC8vIHNjcm9sbCB0byB0aGUgcmlnaHQgZWRnZVxuXHRcdHRoaXMuc2V0VGFic09mZnNldCgtKHRoaXMudG90YWxUYWJzV2lkdGggLSB0aGlzLmZyYW1lcldpZHRoKSlcblx0XHR0aGlzLmhpZGVBcnJvdyhcInJpZ2h0XCIpXG5cblx0fVxuXG5cdHRoaXMucmVzZXRJbmRpY2F0b3IoKTtcblxuXHR0aGlzLnNob3dBcnJvdyhcImxlZnRcIik7XG5cbn1cblxuRHluYW1pY1RhYnMucHJvdG90eXBlLnNldFRhYnNPZmZzZXQgPSBmdW5jdGlvbihvZmZzZXQpIHtcblx0dGhpcy5mcmFtZXJTaGlmdCA9IG9mZnNldDtcblx0dGhpcy5yZWdpc3RlcmVkVGFic1swXS5lbC5zdHlsZVtcIm1hcmdpbi1sZWZ0XCJdID0gdGhpcy5mcmFtZXJTaGlmdCtcInB4XCI7XG59XG5cbi8vIHNwZWNpZnkgd2hldGhlciB0byBzaG93IHRoZSBcImxlZnRcIiBhcnJvdywgdGhlIFwicmlnaHRcIiBhcnJvdywgb3IgYm90aCAobm8gYXJndW1lbnQpXG5EeW5hbWljVGFicy5wcm90b3R5cGUuc2hvd0Fycm93ID0gZnVuY3Rpb24obGVmdFJpZ2h0QWxsKSB7XG5cdGlmIChsZWZ0UmlnaHRBbGwgPT09IFwibGVmdFwiKSB7XG5cdFx0dGhpcy5hcnJvd0xlZnQuc3R5bGUudmlzaWJpbGl0eSA9IFwiXCI7XG5cdH0gZWxzZSBpZiAobGVmdFJpZ2h0QWxsID09PSBcInJpZ2h0XCIpIHtcblx0XHR0aGlzLmFycm93UmlnaHQuc3R5bGUudmlzaWJpbGl0eSA9IFwiXCI7XG5cdH0gZWxzZSB7XG5cdFx0dGhpcy5hcnJvd0xlZnQuc3R5bGUudmlzaWJpbGl0eSA9IFwiXCI7XG5cdFx0dGhpcy5hcnJvd1JpZ2h0LnN0eWxlLnZpc2liaWxpdHkgPSBcIlwiO1xuXHR9XG59XG5cbi8vIHNwZWNpZnkgd2hldGhlciB0byBoaWRlIHRoZSBcImxlZnRcIiBhcnJvdywgdGhlIFwicmlnaHRcIiBhcnJvdywgb3IgYm90aCAobm8gYXJndW1lbnQpXG5EeW5hbWljVGFicy5wcm90b3R5cGUuaGlkZUFycm93ID0gZnVuY3Rpb24obGVmdFJpZ2h0QWxsKSB7XG5cdGlmIChsZWZ0UmlnaHRBbGwgPT09IFwibGVmdFwiKSB7XG5cdFx0dGhpcy5hcnJvd0xlZnQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cdH0gZWxzZSBpZiAobGVmdFJpZ2h0QWxsID09PSBcInJpZ2h0XCIpIHtcblx0XHR0aGlzLmFycm93UmlnaHQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cdH0gZWxzZSB7XG5cdFx0dGhpcy5hcnJvd0xlZnQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cdFx0dGhpcy5hcnJvd1JpZ2h0LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuXHR9XG59XG5cbi8vIFByaXZhdGUgdXRpbGl0eSBmdW5jdGlvbnM6XG5cbi8vIHNldEFjdGl2ZUhpZ2hsaWdodCBtYXJrcyBhIHJlZ2lzdGVyZWQgdGFiIGluIHRoZSBET00gYXMgdGhlIGFjdGl2ZSBvbmUgYWZ0ZXIgdW4tbWFya2luZyB0aGUgY3VycmVudCBhY3RpdmVcbi8vIHRhYiBhcyBhY3RpdmUuXG5mdW5jdGlvbiBzZXRBY3RpdmVIaWdobGlnaHQodGFiSW5kZXgpIHtcblx0Ly8gSWYgdGhlIGFycmF5IG9mIHJlZ2lzdGVyZWQgdGFicyBlaXRoZXIgaGFzIG5vdCBjaGFuZ2VkIG9yIGdvdCBjaGFuZ2VkIGJ1dCBoYXMgdGhlIHNhbWUgbnVtYmVyIG9mIHRhYnMsXG5cdC8vIG11c3QgY2hlY2sgdG8gbm90IHRyeSB0byBzZXQgb3V0IG9mIHJhbmdlIHRhYiBpbmRleCBhcyBub3QgYWN0aXZlLlxuXHRpZiAodGhpcy5hY3RpdmVUYWJJbmRleCA8IHRoaXMucmVnaXN0ZXJlZFRhYnMubGVuZ3RoKSB7XG5cdFx0dGhpcy5yZWdpc3RlcmVkVGFic1t0aGlzLmFjdGl2ZVRhYkluZGV4XS5lbC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLWR0YWN0aXZlXCIpO1xuXHR9XG5cdHRoaXMucmVnaXN0ZXJlZFRhYnNbdGFiSW5kZXhdLmVsLnNldEF0dHJpYnV0ZShcImRhdGEtZHRhY3RpdmVcIiwgXCJ5XCIpO1xufVxuXG4vLyByZXNldFJlY3RzIHJlc2V0cyB0aGUgYm91bmRpbmdDbGllbnRSZWN0IGluZm8gb2YgYWxsIHJlZ2lzdGVyZWQgdGFicy5cbmZ1bmN0aW9uIHJlc2V0UmVjdHMoZmlyc3RMZWZ0LCB3aWR0aHMpIHtcblx0Ly8gZmlyc3QsIHNldCB0aGUgZmlyc3QgdGFiIG1hbnVhbGx5IGJlY2F1c2UgaXRzIGxlZnQgbXVzdCBiZSAwXG5cdHNldE5ld1JlY3QuY2FsbCh0aGlzLCAwLCB7bGVmdDogZmlyc3RMZWZ0LCB3aWR0aDogd2lkdGhzWzBdfSk7XG5cdC8vIGFkanVzdCBhbGwgdGhlIG90aGVyIHRhYnNcblx0Zm9yIChsZXQgaSA9IDEsIHRhYnNMZW4gPSB0aGlzLnJlZ2lzdGVyZWRUYWJzLmxlbmd0aDsgaSA8IHRhYnNMZW47IGkrKykge1xuXHRcdHNldE5ld1JlY3QuY2FsbCh0aGlzLCBpLCB7bGVmdDogdGhpcy5yZWdpc3RlcmVkVGFic1tpLTFdLnJlY3QubGVmdCArIHRoaXMucmVnaXN0ZXJlZFRhYnNbaS0xXS5yZWN0LndpZHRoLCB3aWR0aDogd2lkdGhzW2ldfSlcblx0fVxufVxuXG4vLyBzZXROZXdSZWN0IHJlcGxhY2VzIGEgcmVnaXN0ZXJlZCB0YWIgYnkgdGhlIGFycmF5IHNwbGljZSBtZXRob2QgKHRvIG1ha2UgdGhlIG11dGF0aW9uIHdhdGNoYWJsZSBmcm9tIG91dHNpZGUpLlxuZnVuY3Rpb24gc2V0TmV3UmVjdCh0YWJJbmRleCwgcmVjdCkge1xuXHR0aGlzLnJlZ2lzdGVyZWRUYWJzLnNwbGljZSh0YWJJbmRleCwgMSwge1xuXHRcdGVsOiB0aGlzLnJlZ2lzdGVyZWRUYWJzW3RhYkluZGV4XS5lbCxcblx0XHQvLyBvYzogdGhpcy5yZWdpc3RlcmVkVGFic1t0YWJJbmRleF0ub2MsXG5cdFx0cmVjdDogcmVjdFxuXHR9KVxufVxuXG5leHBvcnQgZGVmYXVsdCBEeW5hbWljVGFicztcbiJdLCJzb3VyY2VSb290IjoiIn0=